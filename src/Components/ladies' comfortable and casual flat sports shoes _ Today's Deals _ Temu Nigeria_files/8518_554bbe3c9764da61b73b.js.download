(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[8518],{28854:function(e,t,n){"use strict";function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return e&&t&&t.scene?`${e}${e.includes("?")?"&":"?"}scene=${t.scene}`:e}n.d(t,{w:function(){return r}})},96074:function(e,t,n){"use strict";n.d(t,{W1:function(){return u},qi:function(){return i},wu:function(){return c},yp:function(){return a}});n(44114),n(25440);const r=["p_search","p_rec","m_rec"];function o(e,t,n){if(Array.isArray(t))n=n||[],t.forEach((function(t,r){"object"==typeof t&&null!==t?n.push(o(e,t)):null!==t&&n.push(t)}));else{n=n||{};for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(r.includes(s)){n[e(s)]="string"==typeof t[s]?t[s]:JSON.stringify(t[s]);continue}"object"==typeof t[s]&&null!==t[s]?n[e(s)]=o(e,t[s],Array.isArray(t[s])?[]:{}):null!==t[s]&&(n[e(s)]=t[s])}}return n}function s(e){return e.replace(/([A-Z])/g,(function(e,t){return"_"+t.toLowerCase()}))}function i(e,t){return o(s,e,t)}function a(e){return e.replace(/_(\w)/g,(function(e,t){return t.toUpperCase()}))}function c(e,t){return o(a,e,t)}function u(e,t){return function e(n,o,s){if(Array.isArray(o))s=s||[],o.forEach((function(t,r){"object"==typeof t&&null!==t?s.push(e(n,t)):null!==t&&s.push(t)}));else{s=s||{};for(const i in o)if(Object.prototype.hasOwnProperty.call(o,i)){if(t?.includes(i)){s[n(i)]=o[i];continue}if(r.includes(i)){s[n(i)]="string"==typeof o[i]?o[i]:JSON.stringify(o[i]);continue}"object"==typeof o[i]&&null!==o[i]?s[n(i)]=e(n,o[i],Array.isArray(o[i])?[]:{}):null!==o[i]&&(s[n(i)]=o[i])}}return s}(a,e)}},90230:function(e,t,n){"use strict";n.d(t,{L8:function(){return l},N:function(){return u},Vm:function(){return c}});var r=n(33514),o=n(94971),s=n(95789),i=n(47739),a=n(53075);function c(e){let{onClose:t=()=>{},onSuccess:n=()=>{},axiosHttp:a,loginScene:c,moduleConfig:u}=e;const l=()=>{f(),t?.()},p=(0,o.Ri)("region"),f=(0,s.A)(r.createElement(i.Ay,{modalVisible:!0,axiosHttp:a,onCloseClick:l,regionId:p,loginScene:c,onSuccess:async()=>{await(n?.()),l()},moduleConfig:u}))}function u(){return{errorCodeHandlers:{40001:()=>{}}}}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:601;return{errorCodeHandlers:{40001:()=>{c({loginScene:e,onSuccess:()=>{(0,a.Qw)()}})}}}}},36513:function(e,t,n){"use strict";function r(e,t){try{return e()}catch(e){return t}}n.d(t,{T:function(){return r}})},5220:function(e,t,n){"use strict";n.d(t,{Bv:function(){return b},Et:function(){return A},Gs:function(){return D},Nw:function(){return h},R5:function(){return C},RP:function(){return x},Yh:function(){return k},cQ:function(){return H},eM:function(){return m},ft:function(){return P},hk:function(){return _},k6:function(){return w},lQ:function(){return v},nF:function(){return g},pY:function(){return S},vd:function(){return L},x6:function(){return d},xQ:function(){return f},yQ:function(){return y}});n(16280),n(25440),n(3296),n(48408),n(44114);var r=n(13852),o=n(34477),s=(n(70074),n(83052)),i=n(68009),a=n(64423),c=n(20162),u=n(35396),l=n(53075),p=n(56733);const f=async e=>{let{loader:t,errLoader:n}=e;try{const{default:e}=await t();return e}catch(e){const t=function(){return null};if(n){const{default:e}=await n();return e}return t}},h=e=>{try{return(0,r.Si)(e)}catch(e){return(0,o.fL)(e,{error_message:"getPathnameWithSearchAndHash error"}),""}};function d(e,t){if(!e)return t;try{return JSON.parse(e)||t}catch(e){return t}}const g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=null;return function(){n&&clearTimeout(n),n=setTimeout((()=>{e.apply(this,arguments),n=null}),t)}};function m(e,t){let{successToastInfo:n,failToastInfo:r,onSuccessCb:o,onFailCb:u}=t;const l=(0,i.tb)(),p=document.createElement("textarea");let f,h;p.style.position="fixed",p.style.top="0",p.style.left="0",p.value=e,p.hasAttribute("readonly")||p.setAttribute("readonly",""),document.body.appendChild(p),l.system===a.IJ.IOS?(f=document.createRange(),f.selectNodeContents(p),h=window.getSelection(),h&&(h.removeAllRanges(),h.addRange(f)),p.setSelectionRange(0,999999)):p.select();try{if(!document.execCommand("copy"))throw new Error;o?o():c.A.success(n||(0,s.t)("CopiedSuccessfully",{ns:"global"}))}catch(e){u?u():c.A.success(r||(0,s.t)("CopyFailed",{ns:"global"}))}finally{document.body.removeChild(p)}}const y=(e,t)=>{const{goodsId:n,uniqueId:r}=t||{};return r?!e[r]&&(e[r]=r,(!e[n]||!e[n]?.noUniqueId)&&(e[n]=n,!0)):!e[n]&&(e[n]={noUniqueId:!0},!0)},w=(()=>{const e={},t=(e,t)=>t?.filter((t=>y(e,t)));return n=>{let{scene:r,filter:o,data:s}=n;s=s||[],e[r]||(e[r]={});const i=e[r];o=o||t;return{res:o(i,s),destroy:()=>{delete e[r]}}}})(),b=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0).toString().replace(/\d+/,(function(e){return e.replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")}))},_=(e,t)=>e?.length&&t?e.length*t:0,A=e=>"number"==typeof e,v=()=>{},C=(e,t)=>{if(!e)return;const n=e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>e.HAVE_CURRENT_DATA;t&&!n&&e.play()?.catch(v),t||e.pause()},P=e=>e?.map?.((e=>e.text))?.join(""),S=e=>{const t=e?.filter?.((e=>e?.type===u.aV.text));return t?.map?.((e=>e?.value)).join(" ")||""},D=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return()=>{n&&e?.stopPropagation?.(),"Enter"!==e?.key&&13!==e?.keyCode||t?.(e)}};function k(e){return/windows|win32/i.test(e)}const x=e=>Object.entries(e).every((e=>{let[t,n]=e;return t&&n})),H=e=>{1===e&&(0,l.Qw)(location.href)},L=e=>[p.gq.au,p.gq.nz].includes(e)},13338:function(e,t,n){"use strict";n.d(t,{Ew:function(){return s},QL:function(){return o},Z7:function(){return r}});const r=(0,n(77668).MN)({key:"GetActionsAtom",createActions(e){let{getActions:t,getAtomValue:n}=e;return{getActions:t,getAtomValue:n}}});function o(){return r.useActions().getActions}function s(){return r.useActions().getAtomValue}},63962:function(e,t,n){"use strict";n.d(t,{zw:function(){return O.zw},dD:function(){return ue},LP:function(){return O.LP},HF:function(){return a},a3:function(){return B},Pj:function(){return O.Pj}});var r=n(33514),o=n(47116),s=n(14511),i=n(34243);function a(e,t){let{store:n}=e;return e=>{class a extends r.Component{constructor(){super(...arguments),this.state={hasError:!1}}static createStore(){return new n}componentDidMount(){const e=this.props.store;e&&e.prepareClientData&&e.prepareClientData()}render(){return r.createElement(e,this.props)}}return a.displayName=`appProvider(${e.displayName||e.name})`,a.Store=n,a.pageConfig={...t},(0,s.eE)(i.A)((0,o.PA)(a))}}n(16280);var c=n(43360),u=n(28523),l=n(50453),p=n(2212),f=n(32370),h=n(96007),d=n(34477),g=n(31426);const m=["goods","mall","all_review_detail","goods_video"];var y=async(e,t)=>{if(!window.rawData&&!window.__SEO__REDIRECT__API__REQUESTED__){const{pageConfig:n,Store:r}=e,o=n?.pageProperty?.pageName,s=(window?.location?.pathname||"").endsWith("/goods.html");if(m.includes(o)&&!s)try{const e=n?.metaParams||r?.metaParams,o=n?.createMetaParams||r?.createMetaParams,s=e||o?.(t.query),i=await(0,g.gp)({params:s,http:t.store.$axiosHttp});[g.cY.nf,g.cY.tr,g.cY.mp,g.cY.tmr].includes(i)&&await new Promise((()=>{}))}catch(e){(0,d.fL)(e)}}},w=n(37451),b=n(47450),_=n(25728),A=n(98089),v=n(92717),C=n(87441),P=n(29863);let S;const D=e=>{S=e};n(44114);let k,x=[];function H(){return"undefined"==typeof window?Promise.resolve():"undefined"==typeof MessageChannel?new Promise((e=>{setTimeout(e,0)})):(k||(k=new MessageChannel,k.port1.onmessage=()=>{x.forEach((e=>e(null))),x=[]}),new Promise((e=>{x.push(e),k.port2.postMessage(null)})))}const L=["bec-fe.web-ui","bec-fe.web-sku-selector","bec-fe.login-dialog","bec-fe.chat","bec-fe.popup-sms-modal-coupon-pc","bec-fe.bui-web-goods-list","bec-fe.web-card-bind","bec-fe.web-pay","bec-fe.web-payment-list","bec-fe.web-add-to-order","bec-fe.bg-cui-empty","bec-fe.bg-cui-dialog","bec-fe.bg-fun-web-widgets"];var I={debug:!1,defaultNS:"global",supportedLngs:["en","en-GB","es","es-ES","fr","de","it","ja","pt","pt-BR","ko","sv","nl","cs","pl","el","ar","he","da","sk","ro","fi","nb","hu","sl","hr","bg","lv","et","lt","pt-US","zu","ru","uk","tr","zh-TW","fil","kk","ka","ms","az","pt-PR","pt-GU","pt-MP","pt-VI","hy","th","zh-Hans","sr","is","ga","mt","zh-Hant","uz","es-DE","es-IT","es-MA","es-AD","bs","ur","pt-IE","es-FR","vi","es-GB","sq","mk","mn","si"],extraSumerNs:{collect:["error","global","collect","bec-fe.tree-menu",...L],goods:["goods","global","comments","bec-fe.web-pay","bec-fe.web-share","bec-fe.popup-download-ui-pc","bec-fe.web-reviews",...L],goods_snapshot:["goods","global","comments","bec-fe.web-pay","bec-fe.web-reviews",...L],mall:["global","mall","comments","goods","bec-fe.web-reviews",...L],"shop-collect":["global","error","collect","bec-fe.tree-menu",...L],shopping_cart:["shopping_cart","global",...L],"csr/shopping_cart_skeleton":["shopping_cart","global"],review_guidelines:["guidelines"],bgm_popular_shops:["global","mall",...L],shopping_cart_share:["shopping_cart_share","global",...L],wishlist:["wishlist","global",...L],goods_appeal:["goods_appeal","error","global",...L]}},O=n(87650),$=n(63560),R=n.n($);var E=n(13852),T=n(82701);window.Proxy||(0,w.jK)({useProxies:"never"});const j=["/w/shopping_cart.html"];async function q(e){(0,b.Om)();const{Component:t}=e;t?.initClient?.();const n=t.pageConfig||{},r=n.pageProperty||{};window.__pmmPagePath=r.pagePath;const o=j.includes(r.pagePath)&&["A","C"].includes(function(){let e="";return e=(0,P.Ay)("execute_script_with_split"),e||""}());window.__IS__HIT__JS__SPLIT=o,o&&await H(),function(e){const t=e.pageProperty?.pv?.keys;if(!t)return;const n=e.pageRegExp,r=(0,E.Xe)(location.search);if(n){const e=[].concat(n).concat(n.map((e=>`/csr${e}`))).reduce(((e,t)=>e||new c.A(t).exec(location.pathname)),null);e&&e.groups&&Object.assign(r,{...r,...e.groups})}const o=t.reduce(((e,t)=>{let n,o;return"string"==typeof t?(n=t,o=r[n]):"object"==typeof t&&(n=t.key,o=r[n],t.mapping&&t.mapping.forEach((function(e){null!=r[e]&&(o=r[e])})),null==o&&null!=t.default&&(o=t.default)),null!=n&&null!=o&&(e[n]=o),e}),{});delete e.pageProperty.pv,0!==Object.keys(o).length&&(e.pageProperty.extraPvParams=o,(0,T.As)(o))}(n);const s=window.pmmAppInfo||{},i=s?.extraTags||{},{spiderType:a,importantIT:u,...l}=i||{};let p=a;if(!a){const e=(0,_.EU)(window.navigator.userAgent);p=e?_.Tw[e]:_.Tw.User}const{pageInfo:f}=await(0,C.K)(e,{pmmAppInfo:{...s,extraTags:{...l,...p?{spiderType:p,importantIT:u}:{}}},commonErrorLoggerParams:e=>("unhandledrejection reason:"===e?.page?e.extraInfo={errorCode:5e5,errorMsg:"page boot unhandledrejection reason is null"}:e?.page?.includes("Minified React error")?e.extraInfo={errorCode:500001}:(e?.page?.includes("Failed to execute 'removeChild' on 'Node'")||e?.page?.includes("can't access dead object"))&&(e.extraInfo={errorCode:500002}),e),...n,i18nConfig:I});D(f),o&&await H();const h=window.rawData||{};if(h.store){const e=window.__CHUNK_DATA__||{};Object.keys(e).forEach((t=>{!function(e,t,n){const r=t.split(".");r.pop();const o=r.join(".");(0,w.h5)((()=>{Object.entries(n||{}).forEach((t=>{let[n,r]=t;o?R()(e,`${o}.${n}`,r):e[n]=r}))}))}(h.store,t,e[t].data)}));const n=t.createStore(),r=(0,v.b)({pageInfo:f});n.fromJS(h.store,r),window.__INITIAL_PROPS__={...window.rawData,...window.__INITIAL_PROPS__,store:n},(0,A.q)(n?.webLayoutData)}o&&await H()}var N=n(4146),M=n.n(N),F=n(77668),z=n(36513),Q=n(13338),J=n(22284);function V(){const e=(0,O.Pj)();return e.getAtomActions=(0,Q.QL)(),e.getAtomValue=(0,Q.Ew)(),null}const U=e=>{const t=t=>{const{$atomValue:n,$ctx:s}=t.store||{};return(0,r.useEffect)((()=>()=>{(0,J.A)({eventType:1,scene:1,event:"withMobx_unmount",tags:{sessionId:(0,z.T)((()=>sessionStorage.getItem("x-session-id")))}})}),[]),r.createElement(o.Kq,t,r.createElement(F.a,{value:n,ctx:s},r.createElement(V,null),r.createElement(e,t)))},n=e.displayName||e.name;return t.displayName=`withMobx(${n})`,M()(t,e),t};n(69841);const G=e=>(0,p.r)(e,(e=>({alreadyCriticalCSS:!!e?.__res?.locals?.leoUseCritical}))),B=e=>{const t=(0,f.o)({Component:U(e?.pageConfig?.loadable?G(e):e),getInitialProps:async t=>{const n=t.store=t.store||e.createStore(),{pageRegExp:r}=e.pageConfig;if(r){const e=r.reduce(((e,n)=>e||new c.A(n).exec(t.pathname)),null);if(e&&e.groups){const n=Object.getOwnPropertyDescriptor(t,"query").get;Object.defineProperty(t,"query",{get(){return{...n(),...e.groups}}})}}const{__req:o,__res:s}=t||{};return await Promise.all([n.initData(t),y(e,t)]),o?.monitor?.logFirstScreenDataLoad(),n.isRobot&&n.isMetaRefresh&&!s.__seo__redirect__tag&&l.Ay.uniformForward("/too_many_requests.html"),{store:n}},getChunkDataFetcher:async(t,n)=>{const r=t.store=t.store||window.__INITIAL_PROPS__?.store||e.createStore();return r.getChunkDataFetcher?.(t,n)||{}},title:t=>{const{title:n}=e.pageConfig||{};return"function"==typeof n?n(t):n},metaParams:t=>{const{pageConfig:n,Store:r}=e,o=n?.metaParams||r?.metaParams,s=n?.createMetaParams||r?.createMetaParams;return o||s?.(t.query)}});return{page:t,startClient:async()=>{if(window.isMetaRefresh)throw Error("do not contiune");return(0,u.c)(),e?.pageConfig?.loadable&&await(0,h.ai)(),q(t)}}};var K=n(38095),W=n(64423),Y=n(20162),X=n(28854),Z=n(96074);const ee=["p_rec","prec","pRec","p_search","psearch","pSearch"];function te(e,t){if(Array.isArray(e))t=t||[],e.forEach((e=>{"object"==typeof e&&null!==e?t.push(te(e)):t.push(e)}));else{t=t||{};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(ee.includes(n)?delete t[n]:"object"==typeof e[n]&&null!==e[n]?t[n]=te(e[n],Array.isArray(e[n])?[]:{}):t[n]=e[n])}return t}var ne=n(68009),re=n(5220);const oe=()=>{const{isNativePlatform:e}=(0,ne.tb)();return e};var se=n(53826);function ie(e){5e4!==e.errorCode&&e.errorMsg&&Y.A.error(e.errorMsg)}function ae(e,t){return t?t(e):{error:(0,se.nD)(e)}}const ce={$riskControlCrawler:null,lock:null};class ue{constructor(e,t){var n=this;this.$axiosHttp=void 0,this.get=(e,t,n,r,o)=>{const{useAntiToken:s=!1,...i}=t;return this.$axiosHttp.get(e,{params:i,timeout:o,useAntiToken:s}).then((e=>{const r=(0,Z.wu)(e);return n?n(r,t):r})).catch((e=>ae(e,r)))},this.post=function(e){let{useNativeAntiToken:t=!1,useAntiToken:r=!1,useRawResponse:o=!1,defaultErrorHandler:s=ie,errorCodeHandlers:i,excludedKeys:a=[],...c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0,p=arguments.length>4?arguments[4]:void 0;return n.$axiosHttp.post(e,c,{useNativeAntiToken:t,useAntiToken:r,useRawResponse:o,defaultErrorHandler:s,errorCodeHandlers:i,timeout:p,excludedKeys:a}).then((e=>{const t=(0,Z.W1)(e,a);return u?u(t,c):t})).catch((e=>ae(e,l)))},this.baseGet=e=>{let{url:t,params:n,format:r,errorHandler:o,timeout:s}=e;return this.get(t,n,r,o,s)},this.basePost=e=>{let{url:t,params:n,format:r,errorHandler:o,timeout:s}=e;return this.post(t,n,r,o,s)},this.getRisk=async e=>{let{url:t,params:n,format:r,errorHandler:o,timeout:s}=e;return n.useAntiToken=!0,this.get(t,n,r,o,s)},this.postRisk=async e=>{let{url:t,params:n={},format:r,errorHandler:o,timeout:s}=e;n.useAntiToken=!0;try{return oe()?n.useNativeAntiToken=!0:n.anti_content=await this.getRiskInfo(),this.basePost({url:t,params:n,format:r,errorHandler:o,timeout:s})}catch(e){return Promise.reject(e)}},this.postRiskNew=async e=>{let{url:t,params:n={},format:r,errorHandler:o,timeout:s}=e;return n.useAntiToken=!0,this.basePost({url:t,params:n,format:r,errorHandler:o,timeout:s})},this.queryUserInfo=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.errorCodeHandlers={40001:()=>null},n.postRisk({url:"/api/bg-barbera-api/user/short/profile",params:e,errorHandler:()=>null}).then((e=>e?.result||null))},this.queryCartNum=()=>(0,W.H_)(window.navigator.userAgent)?Promise.resolve(0):this.postRisk({url:"/api/bg/bg-uranus-api/uranus_cart/user_cart_num",params:{shipping_scene:2}}).then((e=>e?.result?.allAmountSum||0)),this.querySearchShade=()=>{const e={scene:"shade_words"};return this.postRisk({url:(0,X.w)("/api/poppy/v1/shade_words",e),params:e}).then((e=>e?.result?.data?.shadeWords))},this.queryFooterData=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.baseGet({url:"/api/bg/buffon/fuji/region/pay/icon",params:e}).then((e=>e?.supportedPayIconList||null))},this.queryCategoryData=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.postRisk({url:"/api/poppy/v1/opt_list",params:{scene:"opt_list_all",...e}})},this.queryTopActivityInfo=()=>{const e="activity_info_v2";return this.basePost({url:"/api/alexa/pc/homepage/module_query",params:{module_names:[e]}}).then((t=>(t?.result?.homeModuleList||[]).find((t=>t?.moduleName===e))?.data))},this.queryTitleBarList=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.postRisk({url:"/api/poppy/v1/title_bar_list",params:{scene:"home_title_bar_list",offset:0,pageSize:0,pageSn:"",...e}}).then((e=>e?.result?.data?.titleBarList||[]))},this.$axiosHttp=e;const{requestContext:r}=t||{},{userAgent:o}=r||{};let s=!1;r&&(s=((0,P.Ay)("switches",r,"")||{}).removePrecPsearch);const i=s&&(0,W.H_)(o);this.addPlugins(t,i),oe()||this.initRiskControl()}addPlugins(e,t){const n=[];n.push({request:e=>{const t=(e.query,{});return"get"===e.method?e.params=Object.assign(t,e.params||{}):e.data=Object.assign(t,e.data||{}),e}}),t&&n.push({response(e){if(e?.config?.useRawResponse){const t=te(e.data);return e.data=t,e}return te(e)}}),((e,t)=>{t.forEach((t=>{e.interceptors.request.use(t.request),e.interceptors.response.use(t.response,t.responseError)}))})(this.$axiosHttp,n)}async initRiskControl(){if(ce.lock)return ce.lock;let e;ce.lock=new Promise((t=>{e=t}));const[t,r]=await Promise.all([(0,K.Fm)(),(0,re.xQ)({loader:()=>n.e(7523).then(n.bind(n,76503))})]);ce.$riskControlCrawler=new r({serverTime:t}),e()}async getRiskInfo(){return ce.$riskControlCrawler||await this.initRiskControl(),ce.$riskControlCrawler.messagePackSync?.()}queryCreditBalance(){return this.postRisk({url:"/api/bg/buffon/asset/centre/balance",params:{errorCodeHandlers:{40001:()=>null}},errorHandler:()=>null})}queryServerTime(){return(0,K.Fm)()}}},53826:function(e,t,n){"use strict";n.d(t,{OQ:function(){return o},mi:function(){return r},nD:function(){return s}});n(27208);const r=e=>40001===parseInt(e.errorCode,10)||"needLogin"===e.errorMsg||"needLogin"===e.errorCode,o=e=>54001===parseInt(e.errorCode,10),s=e=>e||{}},87650:function(e,t,n){"use strict";n.d(t,{zw:function(){return b},LP:function(){return L},Pj:function(){return I}});var r,o,s=n(33514),i=n(47116),a=n(13425),c=n(60055),u=(n(35639),n(27208),n(37451)),l=n(76038),p=n(29863),f=n(98701),h=n(37374),d=n(24517),g=n(90230),m=n(13338);const y=Object.prototype.hasOwnProperty,w="__ItemType__";let b=(r=class{static list(){const e=u.sH.array([],{deep:!1});return e[w]=this,e}constructor(e){this.getParent=void 0,(0,a.A)(this,"setStoreData",o,this),(0,u.Gn)(this),this.getParent=()=>e}get $service(){return this.$root.$service}get $parent(){return this.getParent()}get $root(){return this.$parent.$root||this.$parent}fromJS(e){return _(this,e,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}},(0,c.A)(r.prototype,"$service",[u.EW],Object.getOwnPropertyDescriptor(r.prototype,"$service"),r.prototype),o=(0,c.A)(r.prototype,"setStoreData",[u.XI],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{this[e]=t}}}),r);function _(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t)for(const r in t)if(y.call(t,r)){if(n&&!(r in e))continue;const o=e[r];o instanceof b?o.fromJS(t[r],n):o instanceof Array&&o.length&&o[0]instanceof b?e[r]=(t[r]||[]).map((t=>new o[0].constructor(e).fromJS(t,n))):e[r]=o instanceof Array&&w in o?(t[r]||[]).map((t=>new o[w](e).fromJS(t,n))):t[r]}return e}var A,v,C,P,S,D,k,x;async function H(e,t,n){if("function"!=typeof e)return Promise.all(Object.entries(e).map((async e=>{let[r,o]=e;"function"==typeof o&&(o={dump:!1,loader:o});const s=o.loader,i=await Promise.resolve(s(t,n));(0,u.h5)((()=>{o.dump?Object.assign(n,i):n[r]=i}))})));{const r=await e(t,n);(0,u.h5)((()=>Object.assign(n,r)))}}let L=(A=u.XI.bound,v=class{constructor(){this.$axiosHttp=null,this.$service=void 0,this.$ctx=void 0,this.$atomValue=void 0,(0,a.A)(this,"lang",C,this),this.getAtomActions=void 0,this.getAtomValue=void 0,(0,a.A)(this,"headAndFootStaticConfigs",P,this),this.pageSn=void 0,this.needHeadData=!0,this.needFootData=!0,(0,a.A)(this,"webLayoutData",S,this),this.graySceneList=[],this.commonGraySceneList=[],(0,a.A)(this,"grayConfig",D,this),this.initQueryLayoutData=!0,this.userAgent="",this.footerLinkNoFollow=!1,this.layoutDataOptions=void 0,this.seoData=void 0,(0,a.A)(this,"queryLayoutData",k,this),this.afterQueryLayoutData=(e,t)=>{},this.beforeQueryLayoutData=e=>{},(0,a.A)(this,"setStoreData",x,this),this.checkAndPopLogin=async e=>{let{onSuccess:t,loginScene:n,useCookie:r}=e,o=!1;return o=r?!!await(0,d.mQ)():await this.$service.queryUserInfo(),!!o||(this.popLogin({onSuccess:t,loginScene:n}),!1)},this.hasOneLogin=!1,this.popLogin=e=>{if(this.hasOneLogin)return;this.hasOneLogin=!0;(0,g.Vm)({onClose:()=>{this.hasOneLogin=!1,e?.onClose?.()},onSuccess:()=>{this.hasOneLogin=!1,e?.onSuccess?.()},axiosHttp:this.$axiosHttp,loginScene:e.loginScene})},(0,u.Gn)(this)}initAxiosHttp(e){var t;this.$axiosHttp=e.$axiosHttp,this.$ctx=(t=e,{...t,toJSON(){return null}})}initServices(e,t){}getDatasource(){return[]}async loadDatasource(e,t){return Array.isArray(e)?e.reduce(((e,n)=>e.then((()=>H(n,t,this)))),Promise.resolve()):H(e,t,this)}initData(e){this.initAxiosHttp(e),this.initServices(this.$axiosHttp,e);const t=(0,f.h8)(void 0,this.$ctx);this.$atomValue=t,t.toJSON=()=>({atoms:t.atoms}),m.Z7.__init(t),this.getAtomActions=t.atoms[m.Z7.__key].actions.getActions,this.getAtomValue=t.atoms[m.Z7.__key].actions.getAtomValue,this.lang=this.getAtomValue(l.M).resolvedLanguage||e?.cookies?.language;const n=this.getDatasource();return Promise.all([this.loadDatasource(n,e),this.initQueryLayoutData?this.queryLayoutData(e):Promise.resolve(null)])}async queryCommonConfigData(e){const t=(0,p.Ay)("commonConfigs",e.__res)||{};(0,u.h5)((()=>{this.headAndFootStaticConfigs=t}))}prepareClientData(){}getChunkDataFetcher(e,t){}fromJS(e,t){const n={},r=e=>e instanceof b,o=e=>e instanceof Array&&e.length&&e[0]instanceof b,s=e=>e instanceof Array&&w in e;if(e){for(const e in this){const t=this[e];(r(t)||o(t)||s(t))&&(n[e]=t)}Object.assign(this,e)}for(const e in n){const t=n[e];r(t)?this[e]=t.fromJS(this[e]):o(t)?this[e]=(this[e]||[]).map((e=>new t[0].constructor(this).fromJS(e))):s(t)&&(this[e]=(this[e]||[]).map((e=>new t[w](this).fromJS(e))))}this.initAxiosHttp(t),this.initServices(this.$axiosHttp,t)}toJSON(){return(0,u.HO)(this)}},C=(0,c.A)(v.prototype,"lang",[u.sH],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=(0,c.A)(v.prototype,"headAndFootStaticConfigs",[u.sH],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),(0,c.A)(v.prototype,"queryCommonConfigData",[A],Object.getOwnPropertyDescriptor(v.prototype,"queryCommonConfigData"),v.prototype),S=(0,c.A)(v.prototype,"webLayoutData",[u.sH],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),D=(0,c.A)(v.prototype,"grayConfig",[u.sH],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),k=(0,c.A)(v.prototype,"queryLayoutData",[u.XI],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{this.beforeQueryLayoutData(e);const t=await(0,h.T)(e,{needHeadData:this.needHeadData,needFootData:this.needFootData,extendHeaderData:this.extendHeaderData,$axiosHttp:this.$axiosHttp,getRiskInfo:this.$service.getRiskInfo.bind(this.$service),pageSn:this.pageSn,store:this,graySceneList:this.commonGraySceneList.concat(this.graySceneList),extendFooterData:this.footerLinkNoFollow?{footerLinkRel:"nofollow"}:{},options:{needPreloadImage:!0,shoppingCartSidebar:[10032,10040].includes(this.pageSn),...this.layoutDataOptions}});(0,u.h5)((()=>{this.webLayoutData=t,this.grayConfig=t.commonData?.expConfig||{}})),this.afterQueryLayoutData?.(t,e)}}}),x=(0,c.A)(v.prototype,"setStoreData",[u.XI],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{this[e]=t}}}),v);function I(){const{store:e}=s.useContext(i.Db);return e||{}}},85829:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var r=n(4246);function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=window.pmmAppInfo?.reportPath||window.__pmmPagePath,{isEnforceRobot:n}=window.leoConfig||{};if(!t||n)return;const o=function(e,t){return["/w/goods.html"].includes(e)&&"string"==typeof window.leoConfig?.use_prefetch_goods?{grayTag:`goods_lazy_small_${window.leoConfig.use_prefetch_goods}`}:["/w/mall.html"].includes(e)?t?.query?.refer_page_sn||t?.query?._x_src?{grayTag:"mall_with_ref"}:{grayTag:"mall_no_ref"}:(["/w/shopping_cart.html"].includes(e)&&window.leoConfig,{})}(t,e),s={groupId:"11",pn:t,pagePath:t,pc:!0,...o};r.H.init(s)}},24828:function(e,t,n){"use strict";n.d(t,{B:function(){return o}});var r=n(32036);function o(e){const t=e.metaParams||e.constructor.metaParams||e.constructor.createMetaParams?.(e.query);t&&(0,r.A)({...t,origin_url:window.location.pathname},e.$axiosHttp)}},50477:function(){},42634:function(){}}]);
//# sourceMappingURL=http://temudebug.com/sourcemaps/assets/modernjs/8518_554bbe3c9764da61b73b.js.map