(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[6267],{80909:function(e,t,n){var r=n(30641),a=n(38329)(r);e.exports=a},30641:function(e,t,n){var r=n(86649),a=n(95950);e.exports=function(e,t){return e&&r(e,t,a)}},5128:function(e,t,n){var r=n(80909),a=n(64894);e.exports=function(e,t){var n=-1,s=a(e)?Array(e.length):[];return r(e,(function(e,r,a){s[++n]=t(e,r,a)})),s}},46155:function(e,t,n){var r=n(34932),a=n(47422),s=n(15389),o=n(5128),i=n(73937),c=n(27301),l=n(43714),u=n(83488),m=n(56449);e.exports=function(e,t,n){t=t.length?r(t,(function(e){return m(e)?function(t){return a(t,1===e.length?e[0]:e)}:e})):[u];var d=-1;t=r(t,c(s));var p=o(e,(function(e,n,a){return{criteria:r(t,(function(t){return t(e)})),index:++d,value:e}}));return i(p,(function(e,t){return l(e,t,n)}))}},73937:function(e){e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},53730:function(e,t,n){var r=n(44394);e.exports=function(e,t){if(e!==t){var n=void 0!==e,a=null===e,s=e==e,o=r(e),i=void 0!==t,c=null===t,l=t==t,u=r(t);if(!c&&!u&&!o&&e>t||o&&i&&l&&!c&&!u||a&&i&&l||!n&&l||!s)return 1;if(!a&&!o&&!u&&e<t||u&&n&&s&&!a&&!o||c&&n&&s||!i&&s||!l)return-1}return 0}},43714:function(e,t,n){var r=n(53730);e.exports=function(e,t,n){for(var a=-1,s=e.criteria,o=t.criteria,i=s.length,c=n.length;++a<i;){var l=r(s[a],o[a]);if(l)return a>=c?l:l*("desc"==n[a]?-1:1)}return e.index-t.index}},38329:function(e,t,n){var r=n(64894);e.exports=function(e,t){return function(n,a){if(null==n)return n;if(!r(n))return e(n,a);for(var s=n.length,o=t?s:-1,i=Object(n);(t?o--:++o<s)&&!1!==a(i[o],o,i););return n}}},42877:function(e,t,n){var r=n(46155),a=n(56449);e.exports=function(e,t,n,s){return null==e?[]:(a(t)||(t=null==t?[]:[t]),a(n=s?void 0:n)||(n=null==n?[]:[n]),r(e,t,n))}},32934:function(e){e.exports={wrap:"_1L3qvH4Y",bg:"_1Ak5Qiub",innerBg:"_3-8dYa2n",clock:"_21raclwy",textWrap:"_2uJcxGDo",textContent:"_1XKh1-eL",entTime:"_3boSRVtl",entTimeText:"_2KLqScM_",hide:"_2nYQhHfu",show:"_1kN8P0X0",clockRight:"_2I3u8ORc",clockInnerWidth:"_3gG9mU4w",textShow:"_3NON_gKd",clockAnimation:"_3qRpHEko",clockTranslate:"_27Yluvqo",clockInnerAnimation:"_2pO6syG-",textShowAnimation:"_2InKlMU_"}},32893:function(e){e.exports={wrap:"_3mw8ps2R",content:"_3CaSeiTi",click:"_1vMQptd7",endTimeInfo:"_1t7j7Ogs",entTimeWrap:"_11SyvK5W",activityText:"_1X6a6b2l",frameStyleText:"_3SGtxaSO",divider:"_1eOoxUiu",entTime:"_2vRxhmmd",entTimeText:"_2jj6RMAJ",entTimeRichText:"_2NAMyIC_",arrow:"_3FQv0M3-",frameStyleArrow:"_3lAPIi8-",endTimeImage:"_2Reeuq-g",activityMarkImage:"_3LgctZDb",activityIcon:"_2Y_cD7Mn",activityTipsText:"_2mNqubKt",activityV2:"TqqJOn3f",activityV2Name:"_89kC5rvl",activityV2Left:"_1OFNHpsF",activityV2Rgiht:"_3Irk2Hvt",right:"_2BvOMtJC",sideText:"_3lOSd_IQ",clockWrap:"_30-8u6L5",clockBg:"_1XUAPsJS",clock:"_3KxyQ-NS",clockAnimation:"_2mrenqV5",clockTranslate:"_212G8cV4",clockNotAnimation:"_3wnLSpwD",clockImg:"_3R5A_DQp",clockInner:"_307n160J",clockInnerAnimation:"_3uBNk5M0",clockInnerWidth:"_1blhGn_F",clockInnerNotAnimation:"_2nSN1xLV",afterName:"_19Eimdjg",activityNameRich:"_2mVR37es",activityNameRichWrap:"NO6mmBFU"}},9699:function(e){e.exports={wrap:"_2nVeyNCz",content:"_2QQEVpBZ",child:"_1thUmrmy",banner:"oa4Sfigi",newBanner:"_2jbucvNr"}},11739:function(e){e.exports={wrap:"_1e6SxiFg",content:"oSFF9xFn",left:"_39-Z_XCE",right:"_2er5qYGw",firstLine:"_2iyHIkRg",bar:"_1M8fSbsU",innerBar:"_1bdjv-Kz",isFinish:"_1oqIjReU",clickStatus:"_2xaCqp4R",img:"_3dJvoXs9"}},64018:function(e){e.exports={entry:"_20k621be",container:"_1_XBJEUA",explainIcon:"_22sEeLM-",linePriceExplain:"_3ygWP2Nw",title:"_2BXEOOZ6",priceRichItem:"d6YtcpXw",tipsContent:"_3mtOcbQ1",tipsContentItem:"_2ITA9wZj",tipsLink:"_3CS1LCeY"}},22780:function(e){e.exports={wrap:"_1dSkmEAs",animate:"_2wdCn209",flash:"_3t97fVtc"}},86967:function(e){e.exports={btn:"_14nNQcmk",btnText:"_2y4qpjEX",flashContainer:"_1gKmzUCE",activeMask:"_1e6CgjSL"}},3759:function(e){e.exports={item:"_1qiC-ts4",isSelected:"_33vMhCHJ",showQuickLook:"_3qUazrGE",quickLook:"_3EFWfiZf",quickLookIcon:"_2CmxsJg5",normalItem:"_2hOY2DLW",normalPrice:"_1reQpvf_",unit:"_2ounmtZq",goodsImg:"_29lmgcqa",saleInfo:"_2ehSg6gL",goodsName:"_3nvsmvXt"}},76737:function(e){e.exports={container:"_3axfhCC5",head:"_2u2DMXf-",goodsList:"_3FLeY3Ws",regularGoodsList:"dQRNBuQN",bottomBtn:"_2dPs2jct",none:"_Dkzco0u"}},12707:function(e){e.exports={wrap:"_10071P6-",title:"_3RvpUidt",titleText:"_3BQzvQW0",seeMore:"_139ztZYj",showQuickLook:"_3R4fvi00",quickLook:"_25gYedk6",goodsItem:"_2kvY6kYI",quicklookContainer:"_2-s2kGDL",quicklookContentCls:"_3tbUgXgB",quickLookIcon:"_1yb64O1Y",goodsInfo:"fqy6l4w_",saleInfo:"_26GgQS6E",cartIcon:"AgiNbPCU",addCartBtn:"_3glKuMcI",addCartBtnText:"_2wPxSt2m",addCartBadge:"_2IfyHUET",imgWrap:"_3r6wYQVP",img:"_3hZ6y8kk",goodsName:"_1B6RiKs5",titleArrowIcon:"_2jWueI66",arrow:"_2-KOT4u7",leftArrow:"_3iysU4Cu",baseArrowBtn:"qXUpwQYG",rightArrow:"ExAxSHyZ",arrowMask:"zWVYvrez",rich:"_3PZNRSzh",localWarehouse:"_3t7nsJfx"}},80518:function(e){e.exports={multiContainer:"_3DE9xULq",containerHeight:"KwvjoamC",scrollWrap:"_1ZdJTzgd",wrap:"_3ydKWX49",rich:"_3oAgBq8u",icon:"_2b5YoVhb",right:"_2vXGLiQj",text:"vQZEOqdG",clickStatus:"_3WILGMO5"}},98949:function(e){e.exports={wrap:"SojPWr4U",textarea:"jOoDzKd7",count:"Qw-Cj2Vb",textLength:"_21TXP6Ge"}},71042:function(e){e.exports={wrap:"_3KWq0SSC",operateArea:"if0yj5fa",missingUrl:"_6aMQhGzW",imgDimensionInvalid:"_1q3Ti9wQ",uploadIcon:"_3LKR4oQG",uploadText:"_2ToLWidc",optional:"_1jpFyUIY",preview:"_27OzQJxa",previewClose:"_1AY_4670",closeIcon:"jP7q84N4",failMask:"_3Uwjpuey",failMaskNotice:"_1a_hzeOV",failMaskBtn:"_1zsLJct_",btnInner:"_3P2A2aAM",progress:"_1NLRPPrD",previewImg:"_3-znvXUo",imgDimension:"_1juzz_rD"}},91684:function(e){e.exports={wrap:"_3itiye6N",noticeText:"_1u5AKxkd",noticeTextIcon:"_20JvY_7-",imgs:"qhSLnakH",title:"ztg8wqzh",noticeWrap:"npFqKjQP"}},79746:function(e){e.exports={wrap:"eN29zfen",imgs:"_2maLpzdb",title:"_2uUSRS4i",color:"_3zLf6cSh",item:"l-sl5EQi",itemActive:"_3T2-_bgM"}},45030:function(e){e.exports={wrap:"_1x-8XBaR",textInputWarp:"_2c5vgNu5",focusClassName:"_3PQ6oAnA",title:"_1hn-qoJH",star:"_1Bau-_O4",operateArea:"_2-VOn31x",error:"ijzsGZSb",notice:"beZOIUT_",noticeText:"_3Wlayx0V",noticeTextIcon:"_2JOD8BWw"}},18906:function(e){e.exports={uploadImg:"cy2HMZVC",imgWrap:"VNiLyQit"}},5676:function(e){e.exports={uploadText:"_2jJATp1S",textWrap:"_2mr0nj_t"}},18298:function(e){e.exports={region:"_3oMh_0BI",idxTag:"_3RHQRqsk",overflowNotice:"LEv9fg7f",overflowNoticeText:"_2hki7hPH"}},60725:function(e){e.exports={wrap:"_1zvT30L6",img:"_1m2Il_Kw",canvasArea:"q982tu46",textWrap:"o5tW_URR",baseBottom:"_3bhAjXqK",topImg:"_2k0syFf8",bottomImg:"_13VP5VoW",overflowNotice:"_1fAN5LR2",overflowNoticeText:"o32r7Hcp",maskImg:"RWIh9IYH"}},22703:function(e){e.exports={resizer:"_15BMMUqB",pointer:"_2Dmt-5Ie",pointerEnhance:"_2rDyUxgK",topLeft:"_14_vl0lb",topRight:"_2xOcJCiR",bottomLeft:"_1tZ3Jxk6",bottomRight:"_1IcUGwc3",dragPointer:"fqeFzUi0",rotateIcon:"EDT8wf6k"}},65580:function(e){e.exports={content:"_32JxRciS",contentMinHeight:"_2rPctB5d",addCartBtn:"_1i84dcbG",btnWrap:"_3_s6WNDs",left:"E6liwerB",right:"_3qC412B0",leftTitle:"bOqbebpv",sensitiveUnderline:"UpIsiioM",sensitiveTips:"_31r1DfqL"}},83464:function(e){e.exports={wrap:"_2aMrWeZK",mask:"_3ySKXAcN",title:"oTffqYet",titleDesc:"_2AOH6jA4",popup:"_2S1gSudx",content:"a6ZkkU-E"}},82856:function(e){e.exports={wrap:"kG72lr5d",title:"_1Ht0VvyY",content:"_1PttWun-",contentNormal:"_2iLNpCx9",contentActive:"_2KHUPIFg",btnWrapper:"_2My4mluJ",btn:"_2qgI44e0"}},6278:function(e){e.exports={container:"_2WqgSypJ",clickable:"_2a4ERvzW",richText:"_1-BCsyzb",arrow:"_28t9Co-y",v3Wrap:"_1acJod2D",v3WrapClickable:"_3wQACGmO",v3Suffix:"_2UALhOos",v3Arrow:"_3TwSIazI",v3Prefix:"_1ZSNHiPn",rankExplainDialog:"_2AmsNKCp",explainEntry:"YJB-0J2M"}},48218:function(e){e.exports={wrap:"_2vhzyycG"}},69480:function(e){e.exports={wrap:"_1G5YlKtz",table:"_3E_TEmAe",columm:"_2r1YwfZY",activeCol:"_3fDZUDFj",activeRow:"g6_qSWUA",activeItem:"_34EMSx9k",cell:"F4MkHSAq",content:"WZsoY8He",tr:"_3apTjT9q",headerLine:"_25-6PcJP",activeRowV2:"_1xctOThQ"}},22639:function(e){e.exports={wrap:"ChThOVYz",headers:"_3ppgos0D",headerItem:"_3wv2G8Wq",headerItemBorder:"_1ixuB7jr",activeHeaderItem:"CmZyPj8_",typeSelect:"_3r5-l3ll",listCls:"_1UE-i9ql",typeSelectWrap:"_1ZykSRoW"}},81927:function(e){e.exports={content:"_37Ffkapr",titleItem:"_3KLg0TaZ",activeItem:"_2Q7Jy_KW",activeItemLine:"_1a3rV4A4",label:"_3I9KIYqJ",desc:"_2ESeVwtv",info:"_2k_hjdco",imgWrap:"_2k1X546c"}},21356:function(e){e.exports={measure:"_1pVs321H",picWrap:"_2cb0zIhm",img:"JKVJ_CaD",pointer:"_3Sv5Qp5Z",notice:"_2m7zwAjE",noticeIcon:"_1m_sqSj1",noticeInfo:"Dk6EULrx",noticeMeasure:"_1aUQXElf",noticeArrow:"RRGTsyX5"}},61410:function(e){e.exports={wrap:"_165jXLtP",skuItem:"_15b58uHl",selected:"_2P4lwdX6",sizeSpecHead:"_3QizT3SA",curLocationWrap:"_38ybkr7B",suffix:"cB2BXb9y",curLocation:"_2BsxgG4q",curLocationArrow:"_1a6Wri2D",locationList:"KdClGmjg",locationListItem:"vrj9htPF",locationListActiveItem:"_1QRNLTO5",locationListItemSelected:"FW_3eWkm"}},88072:function(e){e.exports={wrap:"_1d76qZRU",right:"fkt1yfHk",unit:"_2OQF4M8n",in:"_3jGAzWRx",cm:"_32C9kqhX",isActive:"_1RM1SCQr",left:"_34IXSXnY"}},1011:function(e){e.exports={wrap:"XjZnP6PS"}},41637:function(e){e.exports={bodyMeasurement:"_1p5ZJpM1",marginTop:"_1oL2sJE_",desc:"_3PAVlcmD",descIcon:"_3KGStLcD",tipIcon:"_1nksnMbA"}},64138:function(e){e.exports={wrap:"_2fmA_Brm",title:"_1b5Qw6BE",content:"_3i22wXlK",scroll:"_32Wuu9L8",label:"FCerqlrP",desc:"_3K1UJf2O",info:"aRrN75zQ",imgWrap:"_1kwtO0sX"}},90368:function(e){e.exports={wrap:"_1PYZ8rSj",right:"_30bw1F1Y",avatar:"_3eCPPfLq",sizeDesc:"_1rzee65b",item:"_1jMIuLjB",bodyDesc:"xTek6y55"}},67591:function(e){e.exports={productDetails:"_2k-_-2xO",marginTop:"_2oIV-b-B",suitWrap:"_2zPr8rwu",baseChoiceBtns:"_2iAoduPX",baseChoiceBtn:"c3QCKVfb",selected:"_1UF3RZma",tip:"_31iCpk3s",tipIcon:"m3ibik8s"}},95352:function(e){e.exports={wrap:"_3xy3pxs3",container:"T_o_oUZK",title:"tp59JoEF",list:"_1W0Bh9mw",anchor:"_2VLTSheo",item:"_343rDyB9",content:"_2wqQmeHH",line:"jaDQ5hfu",activeItem:"_3IuW1Dry"}},66709:function(e){e.exports={wrap:"hPbD-b9Z",right:"dC8Jb9n8",unitWrap:"caD-YJpr",entryCls:"_2p4LXx8K"}},78159:function(e){e.exports={tableHeader:"_1UVK5j9N",tableHeaderTitle:"_3gewJ2Pe",measureText:"_2LHLTg9i",measureIcon:"_2ZUZkjGY"}},63521:function(e){e.exports={wrap:"_16yUh-rZ",entry:"_2nNPlYdS",content:"_2rPQmclW",activeSize:"_1Je0Tnte",arrow:"_3tkOMs-H",activeArrow:"-w3B-3yH",list:"_2-GvWH7L",listItem:"_3HNGApgq",activeItem:"_2z7tF16_",selectedIcon:"_1PmDPET8",suffix:"Y7glkg5y"}},61504:function(e){e.exports={wrap:"_3pIzOXvk",modelTryOn:"_3UPv6VGw",modelTryWrap:"_1cNcyeUF",SizeDistribution:"_2XpStoNA",bodyDescCls:"_1A_tQAFx",sizeDescCls:"_3MgNkGNU",line:"_28Gu5S-8"}},24096:function(e){e.exports={content:"_3EU5xDVW",recommendedSize:"_1Fvpe2Oj",unavailableSize:"_2X3HP-rj",eidtBox:"_32en8efB",editInfo:"_35fJBJ5s",editBtn:"_2yFCipr-",editIcon:"_1zhg_QlG",upper:"_3zLEK2Tp",mearsurementName:"-MVHsIZh"}},12362:function(e){e.exports={wrap:"W_zu69Pk",table:"bRjzBxjb",firstCol:"_3nxLHzoz",columm:"_2UKOePr3",cell:"_2WLHLy8t",content:"nCVxH_NI",tr:"r7N3_T-5",activeCol:"gC89Qdd4",activeRow:"_28BKANca",activeItem:"_2QJ_HAI7"}},7981:function(e){e.exports={content:"_10bQ7uS7",sizeDescSection:"_2x1nlJ5S",leftText:"_2oZYhbcq",leftTextName:"dFW0SQHN",leftTextDesc:"_2vpcsgAs",btns:"_2qYNx5NV",btn:"_2ocDekDQ",btnLeft:"_3J7XRWgx",btnRight:"_21NLIU5j",selected:"_1bFVo5Lu",userSizesSection:"_3I0XRbhs",userSizesSelection:"_2jMGfZ5Z",usItem:"_22eFlyA_",userSizesSubmit:"_1YG6xWC3",usTitle:"_341putUp",selectCountContent:"_1raR6mWy",selectList:"_1EEBRvik",selectItem:"_6LdBI76x",learnMore:"a6VqdLyQ",learnText:"_3FQfxWhN",arrowIcon:"-sFwL9XD"}},81783:function(e){e.exports={wrap:"s21vBvyJ",content:"_3-rPCjUd",title:"_2lbrmrwt",info:"_2-8LKflk",label:"_2Vfm2mYX",desc:"aAzYNJFe",imgWrap:"_33YqpTPV"}},68419:function(e){e.exports={wrap:"IoshMa4i",disabled:"_3tVv2hHk",currentVal:"_29kOwCha",unselected:"_2l2Av1wt",arrow:"_1EKUqNLr",arrowIcon:"_3-9D_m5Q",activeArrowIcon:"_1CNsdfEx",list:"_3GORlf5S",listInnerCls:"_3KEtqoZm",listContent:"rRsguONk",selectItem:"_1bXSPwty",selectedItem:"_2-B-pR5B"}},21657:function(e){e.exports={wrap:"CL2zS-oz",title:"_2VaZms3u",desc:"_3IzP9ve5",link:"_2CCq3WNz",btn:"_3CnvxUth"}},65200:function(e){e.exports={wrap:"kJ0WL5aD",titleWrap:"_11Twv6fY",tabTitle:"xHaURlRq",singleTitle:"_3NSTlsB2",active:"st_MTouR",content:"aG1By3pG",tabContent:"zw4SefNx",contentActive:"_2VR59h_u",error:"_3rM5cJ_2",mask:"_3AKB9hTa"}},99148:function(e){e.exports={arrowWrap:"_25dYS982",left:"_28zm51BO",right:"_3k4C_4gK",top:"a4dvrkWv"}},58600:function(e){e.exports={align:"_2h7fb3b9"}},14623:function(e){e.exports={progress:"WBuBiDES",graphOuter:"_3jIrdFLR",graphInner:"_8qktIcss"}},41722:function(e){e.exports={goodsInfo:"_3OO09lOB",flexContainer:"s-OSTRRG",cartIcon:"_2d4W16Wq",goodsSaleInfo:"_86Uu8KY6"}},35554:function(e,t,n){"use strict";var r=n(14242),a=n(33514),s=n(97582),o=n(67388);const i=a.forwardRef(((e,t)=>{const{t:n,i18n:i}=(0,s.B)("bec-fe.svg-icons-pc");return a.createElement(o.i,(0,r.A)({ref:t,fill:"#0a8800"},e,{path:["M728.8 689.7c53.8 0 97.5 43.7 97.5 97.7 0 53.9-43.6 97.6-97.5 97.6-53.8 0-97.5-43.7-97.4-97.6 0-53.9 43.6-97.6 97.4-97.7z m-460.7 0c53.8 0 97.5 43.7 97.4 97.7 0 53.9-43.6 97.6-97.4 97.6-53.8 0-97.5-43.7-97.5-97.6 0-53.9 43.6-97.6 97.5-97.7z m362.3-543.4c59.4-0.5 108.1 47.2 108.6 106.6l0 52.7 42.3 0.2c92.6 0.3 167.7 75.1 168.2 167.7l1.3 201.8c0.3 43.7-34.1 79.6-77.4 81.5-12.9-64.2-67.3-113.2-134-118l-0.4-176.8 0.1 176.8c-3.4-0.2-6.8-0.4-10.3-0.4-71.8 0-131.7 51.3-144.9 119.4l-171.1 1.5c-13.7-67.4-73.3-118-144.7-118-70.1 0-128.9 48.9-144 114.5-29.7-11.7-50.7-40.5-51-74.4l0-449.7c0-44.5 35.8-80.6 80.3-81.1l477-4.3z m-111 79.9l-140.8 0c-5.9 0-11.2 3.4-13.3 8.6l-76.5 190.9c-0.6 1.5-0.9 3.1-0.9 4.7 0 7.4 6.3 13.3 14.2 13.3l88.3 0-37.3 131.4c-1.3 4.7 0.2 9.8 4 13.1 5.7 5 14.7 4.8 20-0.6l210.8-210.2c2.5-2.5 3.9-5.7 3.8-9.1 0-7.4-6.3-13.3-14.2-13.4l-96.3 0 51.2-110.1c0.8-1.7 1.2-3.5 1.2-5.3 0-7.4-6.3-13.3-14.2-13.3z"],"aria-label":e["aria-label"]??(i.exists("aria-label.PindaoBenben",{ns:"bec-fe.svg-icons-pc"})?n("aria-label.PindaoBenben"):void 0),rtlPath:["M295.2 689.7c-53.8 0-97.5 43.7-97.5 97.7 0 53.9 43.6 97.6 97.5 97.6 53.8 0 97.5-43.7 97.4-97.6 0-53.9-43.6-97.6-97.4-97.7z m460.7 0c-53.8 0-97.5 43.7-97.5 97.7 0 53.9 43.6 97.6 97.5 97.6 53.8 0 97.5-43.7 97.5-97.6 0-53.9-43.6-97.6-97.5-97.7z m-362.4-543.4c-59.4-0.5-108.1 47.2-108.6 106.6l0 52.7-42.2 0.2c-92.6 0.3-167.7 75.1-168.3 167.7l-1.3 201.8c-0.3 43.7 34.1 79.6 77.4 81.5 12.9-64.2 67.3-113.2 134.1-118l0.3-176.8 0 176.8c3.4-0.2 6.8-0.4 10.3-0.4 71.8 0 131.7 51.3 144.9 119.4l171.1 1.5c13.7-67.4 73.3-118 144.7-118 70.1 0 128.9 48.9 143.9 114.5 29.7-11.7 50.7-40.5 51-74.4l0-449.7c0-44.5-35.8-80.6-80.2-81.1l-477.1-4.3z m129.5 79.9l140.8 0c7.8 0 14.2 6 14.2 13.3 0 1.8-0.4 3.7-1.2 5.3l-51.2 110.1 96.3 0c7.8 0 14.2 6 14.2 13.4 0 3.4-1.4 6.7-3.8 9.1l-210.8 210.2c-5.4 5.4-14.4 5.6-20 0.6-3.8-3.4-5.3-8.4-4-13.1l37.3-131.4-88.4 0c-7.8 0-14.2-6-14.2-13.3 0-1.6 0.3-3.2 0.9-4.7l76.6-190.9c2.1-5.2 7.4-8.6 13.3-8.6z"]}))}));i.supportRtl=!0,t.A=i},86080:function(e,t,n){"use strict";var r=n(14242),a=n(33514),s=n(97582),o=n(67388);const i=a.forwardRef(((e,t)=>{const{t:n,i18n:i}=(0,s.B)("bec-fe.svg-icons-pc");return a.createElement(o.i,(0,r.A)({ref:t,fill:"#0a8800"},e,{path:["M790.3 731.9c54.9 0 99.4 44.5 99.4 99.3 0 54.9-44.5 99.4-99.4 99.4-54.9 0-99.4-44.5-99.4-99.4 0-54.9 44.5-99.4 99.4-99.3z m-469.8 0c54.9 0 99.4 44.5 99.3 99.3 0 54.9-44.5 99.4-99.3 99.4-54.9 0-99.4-44.5-99.4-99.4 0-54.9 44.5-99.4 99.4-99.3z m302.4-574.5c59.5-0.6 108.3 47.1 109 106.6l0 12.6 68.4 0.1c118.4 0.2 214.5 96 215.2 214.4l1.3 245.5c0.2 39.9-32 72.5-71.8 72.7l-5.3 0c-9.3-74.2-72.7-131.6-149.4-131.7-74.6 0-136.6 54.3-148.5 125.6l-173 1.9c-12.4-70.7-74.1-124.4-148.3-124.4-74.1 0-135.7 53.5-148.3 123.9-29-9.1-50.2-36-50.5-68.1l0-171.7-70.5 0.4c-28.1 0.2-51-22.5-51.1-50.6 0-28.6 23-51.5 51.2-51.5l75 0 169.2-0.3c43.1-0.1 78-35 78-78.3-0.1-43.1-35.1-77.9-78.2-77.8l-169.1 0.3c-1.5 0-3 0-4.5 0.1l0-72.9c0-39.6 31.9-71.9 71.5-72.3l429.7-4.5z m189.7 206.9l-73.9 0.8-0.6 144.6 199.7-0.8 0-20.9 0-0.9c-0.7-68.5-56.7-123.4-125.2-122.8z m-517.2-15.5c19.8 0 35.9 16 35.9 35.8 0 19.9-16.1 36-35.9 36l-169.1 0.4c-1.6 0-3.1-0.1-4.6-0.3l0-0.1-1.3-0.1c-15.1-2.4-27.1-14.4-29.6-29.5l-0.4-5.8c0-17.9 13-32.8 30-35.6l1.3-0.1 4.6-0.3 169.1-0.4z"],"aria-label":e["aria-label"]??(i.exists("aria-label.ShangxiangWuliumianxing",{ns:"bec-fe.svg-icons-pc"})?n("aria-label.ShangxiangWuliumianxing"):void 0),rtlPath:["M233.7 731.9c-54.9 0-99.4 44.5-99.4 99.3 0 54.9 44.5 99.4 99.4 99.4 54.9 0 99.4-44.5 99.4-99.4 0-54.9-44.5-99.4-99.4-99.3z m469.8 0c-54.9 0-99.4 44.5-99.3 99.3 0 54.9 44.5 99.4 99.3 99.4 54.9 0 99.4-44.5 99.4-99.4 0-54.9-44.5-99.4-99.4-99.3z m-302.4-574.5c-59.5-0.6-108.3 47.1-109 106.6l0 12.6-68.4 0.1c-118.4 0.2-214.5 96-215.2 214.4l-1.3 245.5c-0.2 39.9 32 72.5 71.8 72.7l5.3 0c9.3-74.2 72.7-131.6 149.4-131.7 74.6 0 136.6 54.3 148.5 125.6l173 1.9c12.4-70.7 74.1-124.4 148.3-124.4 74.1 0 135.7 53.5 148.3 123.9 29-9.1 50.2-36 50.5-68.1l0-171.7 70.5 0.4c28.1 0.2 51-22.5 51.1-50.6 0-28.6-23-51.5-51.2-51.5l-75 0-169.2-0.3c-43.1-0.1-78-35-78-78.3 0.1-43.1 35.1-77.9 78.2-77.8l169.1 0.3c1.5 0 3 0 4.5 0.1l0-72.9c0-39.6-31.9-71.9-71.5-72.3l-429.7-4.5z m-189.7 206.9l73.9 0.8 0.6 144.6-199.7-0.8 0-20.9 0-0.9c0.7-68.5 56.7-123.4 125.2-122.8z m517.2-15.5c-19.8 0-35.9 16-35.9 35.8 0 19.9 16.1 36 35.9 36l169.1 0.4c1.6 0 3.1-0.1 4.6-0.3l0-0.1 1.3-0.1c15.1-2.4 27.1-14.4 29.6-29.5l0.4-5.8c0-17.9-13-32.8-30-35.6l-1.3-0.1-4.6-0.3-169.1-0.4z"]}))}));i.supportRtl=!0,t.A=i},15610:function(e,t,n){"use strict";var r=n(14242),a=n(33514),s=n(97582),o=n(67388);const i=a.forwardRef(((e,t)=>{const{t:n,i18n:i}=(0,s.B)("bec-fe.svg-icons-pc");return a.createElement(o.i,(0,r.A)({ref:t,fill:"#000000"},e,{path:["M1407.8 166c3.2 3 6.2 6 9.2 9.2l606.4 642c117.3 124.2 277.9 197.8 447.8 206l31.9 0.8-2503.1 0c181.6 0 355.1-74.8 479.8-206.8l606.3-642c86.3-91.4 230.3-95.5 321.7-9.2z"],"aria-label":e["aria-label"]??(i.exists("aria-label.ZhanshiTipsjiantouhei",{ns:"bec-fe.svg-icons-pc"})?n("aria-label.ZhanshiTipsjiantouhei"):void 0),rtlPath:[]}))}));i.supportRtl=!1,t.A=i},85778:function(e,t,n){"use strict";n.d(t,{A:function(){return x},M:function(){return h}});n(16280),n(44114);var r=n(23058),a=n(20162),s=n(11266),o=n(87969);var i=n(48983),c=n(76280),l=n(22284),u=n(96704),m=n(59252);var d=async e=>{const t=(()=>{const e=(0,u.x)();return e.stageStart("api"),e})(),n=await(0,m.Ay)(e);return(e=>{e&&(e.stageEnd("api"),e.end({name:"pc_shoppingcart_operate_cart_api"}))})(t),n},p=n(86214),g=n(54201),f=n(52793);const h={},y={},E=(e,t)=>{const{pageSn:n,pageElSn:r,clientCartScene:a,goodsId:s,skuId:o,operateType:i,fromNum:c,num:l,extraMap:u,customizedInfo:m,addSuccToastType:d,addSuccTipsType:p,disablePopAll:f,showButton:y,checkoutFloatBenefitType:E,operateExtendMap:v}=e;return{page_sn:n,page_el_sn:r,goods_id:Number(s),sku_id:Number(o),from_num:c,num:l,operate_type:i,cart_data_type:1,extra_map:u||{},customized_info:"object"==typeof m?(0,g.qi)(m):m,cart_window_type:0,in_window:0,client_cart_scene:a,add_succ_toast_type:d,add_succ_tips_type:p,disable_pop_all:f,show_button:y??h?.showButton,checkout_float_benefit_type:E??h?.checkoutFloatBenefitType,operate_extend_map:v,api_version:1}},v=(e,t,n)=>{const{result:c}=e||{},{success:u,toast:m,guideCleanWindowInfoV2:d,addSuccToast:p,addSuccExtra:h,checkoutInfo:y,skuDetail:E}=c||{},{ifForbidToast:v,forbidToastWhenPopup:x=[],successToast:I,failToast:k,ifToastLocateCenter:_,ifForbidCleanPopup:b,cleanPopupParams:w,cleanPopupOptions:C}=t||{},{pageSn:S,clientCartScene:N,goodsId:T,skuId:R,fromNum:A,num:z,operateType:L,customizedInfo:M}=n||{};let P;const D=d;let U=null;if(!u&&(P=f.U.REMOTE_FAILED,!b&&D&&"number"==typeof z&&"number"==typeof A)){const e={goods_id:T,sku_id:R,amount:1===L?z:z-A,is_selected:1,page_sn:S,cart_scene:N,customized_info:"object"==typeof M?(0,g.qi)(M):M,...w},t={...C,guideCleanWindowInfoV2:d,pageSn:S,bizLogScene:6};(0,s.A)(0,e,t)?U=o.n.FULL_CART_POPUP_V2:P=f.U.CLEAN_POPUP_FAILED}x.push(o.n.FULL_CART_POPUP_V2);const B=(()=>{const e=[];return(0,s.R)()&&e.push(o.n.FULL_CART_POPUP_V2),e})(),W="function"==typeof v&&!!v({openedPopupTypes:B,remoteData:c}),O="function"!=typeof v&&!!v,F=x.some((e=>e===U));if(!W&&!O&&!F){const e=_?r.A:a.A;if(u)if(p?.length)(0,i.A)(p,{ifToastLocateCenter:_,control:h,checkoutInfo:y,skuDetail:E});else{const t=m||I;t&&e.success(t)}else{const t=m||k;t&&e.error(t)}}return(0,l.A)({event:e?.success?u?"add_sku_succ":"add_sku_error":"add_sku_api_error",errorCode:c?.errorCode||e?.errorCode||0,errorMsg:e?.errorMsg,referPageSn:S,scene:6,eventType:3,extra:{params:n,errorCode:e?.errorCode,result:{toast:m,addSuccExtra:h,checkoutInfo:y}}}),{success:!P&&u,reason:P,remoteData:c,originRemoteData:e,openedPopupTypes:B.length?B:void 0}};var x=async(e,t)=>{if(!(e=>{const{pageSn:t,clientCartScene:n,goodsId:r,skuId:a,operateType:s,fromNum:o,num:i,customizedInfo:c}=e||{},u="number"==typeof o&&"number"==typeof i,m=1===s&&u&&0===o&&i>0||2===s&&u&&o>0&&i>0||3===s&&u&&o>0&&0===i,d=5===s&&!!c;if(!(t&&r&&a&&(m||d)&&n)){let o=100001;t?r&&a?[p.H.ADD,p.H.UPDATE,p.H.DELETE,p.H.UPDATE_CUSTOM].includes(s)?s!==p.H.UPDATE_CUSTOM||d?[p.H.ADD,p.H.UPDATE,p.H.DELETE].includes(s)&&!m?o=100006:n||(o=100007):o=100005:o=100004:o=100003:o=100002,(0,l.A)({event:"add_sku_params_error",referPageSn:t,scene:6,eventType:3,errorCode:o,extra:{params:e}})}return!0})(e))return{success:!1,reason:f.U.INVALID_ARGU};const{isSync:n,mergerInterval:r,asyncCallback:a,syncCallback:s,ifForbidRefreshCart:i}=t||{},{pageSn:u,pageElSn:m,clientCartScene:g,skuId:h,operateType:x,fromNum:I,num:k}=e,_=!![p.H.UPDATE_CUSTOM].includes(x)||n;let b;b=x===p.H.ADD?"api_add_sku":x===p.H.DELETE?"api_change_delete":"api_change_sku",(0,l.A)({event:b,referPageSn:u,scene:6,eventType:1,extra:{params:e,isSync:_}});const w=`${h}-${_?1:0}-${m||""}-${g}`;y[w]=y[w]||{isSync:!!_,isLocked:!1,timer:null,initFromNum:0,lastOperateType:0,lastNum:0,latestReq:null,waitingReq:null,lastUpdateTime:(new Date).getTime()};const{isLocked:C,timer:S,lastOperateType:N,lastNum:T}=y[w],R=((e,t)=>{const n=y[e]||{},{pageSn:r}=t||{};return e=>{let{initialFromNum:t,nextTimer:a,nextType:s,nextNum:o,nextReq:i,nextWaitingReq:c,ifCheckoutLivingState:u=!0,updateType:m=1}=e;if("number"==typeof t&&(n.initFromNum=t),(a||null===a)&&(n.timer=a),s&&(n.lastOperateType=s),"number"==typeof o&&(n.lastNum=o),(i instanceof Promise||null===i)&&(n.latestReq=i),(c instanceof Function||null===c)&&(n.waitingReq=c),u){const e=(new Date).getTime();e-n.lastUpdateTime>5e3&&(0,l.A)({event:`operate_cart_action_illegal_${m}`,referPageSn:r,scene:6,eventType:3,extra:{}}),n.lastUpdateTime=e}}})(w,{pageSn:u}),A=()=>{!i&&(0,c.Xd)(),y[w]=void 0};if(_){if(C)return{success:!1,reason:f.U.LOCKED};y[w].isLocked=!0;const n=E(e),r=await d(n),a=v(r,t,e);return s?.({...a,reqParams:e}),A(),a}return S&&clearTimeout(S),N?x===p.H.ADD?[p.H.ADD,p.H.UPDATE].includes(N)?R({nextNum:T+(k||1)}):R({nextType:p.H.ADD,nextNum:k}):x===p.H.UPDATE?R({nextType:p.H.UPDATE,nextNum:k}):R({nextType:p.H.DELETE,nextNum:0}):R({initialFromNum:I,nextType:x,nextNum:k}),y[w].timer=setTimeout((()=>{R({nextTimer:null,updateType:2});const{initFromNum:n,lastNum:r,latestReq:s}=y[w];if(n!==r){const i=((e,t)=>{let n=p.H.UPDATE;return 0===e&&t>0?n=p.H.ADD:e>0&&t>0?n=p.H.UPDATE:e>0&&0===t&&(n=p.H.DELETE),{operateType:n,fromNum:e,num:t}})(n,r),c={...e,...i},l=E(c),u=e=>{const n=v(e,t,c),{timer:r,waitingReq:s}=y[w],{success:i,openedPopupTypes:l}=n,u=l?.some((e=>[o.n.FULL_CART_POPUP_V2].includes(e)));a?.({...n,reqParams:c}),R({nextReq:null,nextWaitingReq:null,updateType:3}),!i||u?(r&&clearTimeout(r),A()):s?R({nextReq:s(),updateType:4}):!r&&A()};R(s?{nextWaitingReq:()=>(R({initialFromNum:r,updateType:7}),d(l).then(u)),updateType:6}:{initialFromNum:r,nextReq:d(l).then(u),updateType:5})}else{a?.({success:!1,reason:f.U.MERGED_UNCHANGED});const{latestReq:e,waitingReq:t}=y[w];e||t||A()}}),r||300),{success:!0,reason:f.U.OPERATION_MERGED,fakeOperatedData:{num:y[w].lastNum,operateType:y[w].lastOperateType}}}},52793:function(e,t,n){"use strict";n.d(t,{U:function(){return r}});let r=function(e){return e[e.REMOTE_FAILED=0]="REMOTE_FAILED",e[e.INVALID_ARGU=1]="INVALID_ARGU",e[e.LOCKED=2]="LOCKED",e[e.CLEAN_POPUP_FAILED=4]="CLEAN_POPUP_FAILED",e[e.OPERATION_MERGED=5]="OPERATION_MERGED",e[e.MERGED_UNCHANGED=6]="MERGED_UNCHANGED",e}({})},87969:function(e,t,n){"use strict";n.d(t,{n:function(){return r}});let r=function(e){return e[e.FULL_CART_POPUP_V2=4]="FULL_CART_POPUP_V2",e}({})},87019:function(e,t,n){"use strict";n.d(t,{U:function(){return i},Y:function(){return o}});var r=n(33514),a=n(30015),s=n(40119);let o=function(e){return e[e.SeparateDay=1]="SeparateDay",e[e.MergeHour=2]="MergeHour",e}({});const i=(0,r.memo)((function(e){let{endType:t,endLeftTime:n,endTimeColor:i,endTimeBackgroundColor:c,callback:l,digitsStyle:u={},colonStyle:m,nowTime:d}=e;const p=(0,r.useMemo)((()=>d||Date.now()),[d]),g=(0,r.useMemo)((()=>t===o.SeparateDay),[t]),f=(0,r.useMemo)((()=>({color:i,background:c})),[i,c]),h=()=>r.createElement("span",{style:{color:c,...m}},":");return r.createElement(a.A,{intervalGap:500,endTime:1e3*n,nowTime:p,renderFunc:e=>{let{hour:t,minute:n,second:a,day:o}=e;return r.createElement(r.Fragment,null,g&&o?r.createElement(r.Fragment,null,r.createElement("span",{style:{...f,...u},suppressHydrationWarning:!0},(0,s.yg)(o)),h()):null,r.createElement("span",{style:{...f,...u},suppressHydrationWarning:!0},g?(0,s.yg)(t):(0,s.yg)(24*o+t)),h(),r.createElement("span",{style:{...f,...u},suppressHydrationWarning:!0},(0,s.yg)(n)),h(),r.createElement("span",{style:{...f,...u},suppressHydrationWarning:!0},(0,s.yg)(a)))},rAF:!0,callback:l})}))},81887:function(e,t,n){"use strict";n.d(t,{t:function(){return N},O:function(){return T}});var r=n(33514),a=n(32485),s=n.n(a),o=n(14511),i=n(87837),c=n(97582),l=n(46694),u=n(27092),m=n(76475),d=n(21614),p=n(42743),g=n(45477),f=n(87019),h=n(77805),y=n(32934),E=n.n(y);var v=(0,o.W4)({name:"DynamicProgress"})((function(e){let{activityEndTime:t,endTimeCallBack:n}=e;const{t:a}=(0,c.B)("bec-fe.web-sku-selector"),{activityProgressStyle:o,clockAnimationCount:i,updateClockAnimationCount:l}=(0,r.useContext)(m.Bl),{clockIcon:u,progressBgColor:d,fontColor:p}=o||{},[y,v]=(0,r.useState)(!1),[x,I]=(0,r.useState)(!1),k=(0,r.useRef)(null),_=(0,r.useRef)(null),b=(0,r.useRef)(null),w=p?{color:p}:{};return(0,r.useEffect)((()=>{const e=(0,h.s)((()=>{const e=_.current;if(e){const t=e.getBoundingClientRect()?.width,n=Array.from(e?.children);if(n.length>0){const e=n.reduce(((e,t)=>e+(t.getBoundingClientRect()?.width||0)),0);v(Math.floor(e)>Math.floor(t))}}}),500);return e(),I(!0),l(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),u?r.createElement("div",{className:s()(E().wrap,x&&E().show),ref:k},r.createElement("div",{className:E().bg,style:d?{background:d}:{}},r.createElement("div",{className:s()(E().innerBg,{[E().clockInnerAnimation]:x&&1===i,[E().clockInnerWidth]:i>1})})),u?r.createElement("div",{className:s()(E().clock,{[E().clockAnimation]:x&&1===i,[E().clockRight]:i>1})},r.createElement(g.A,{className:E().clockImg,src:u,resizeWidth:100,alt:""})):null,r.createElement("div",{className:s()(E().textWrap,{[E().textShowAnimation]:x&&1===i,[E().textShow]:i>1})},r.createElement("div",{className:E().textContent,ref:_},y?null:r.createElement("span",{className:E().entTimeText,style:w},a("activityEndIn")),r.createElement("div",{className:E().entTime,ref:b,dir:"ltr"},r.createElement(f.U,{endLeftTime:t,callback:n,endType:f.Y.SeparateDay,digitsStyle:{display:"inline-block",width:15,textAlign:"center",...w},colonStyle:w}))))):null})),x=n(32893),I=n.n(x);const k=()=>{const{isRTL:e}=(0,l.Sz)(),{activityProgressStyle:t,clockAnimationCount:n,updateClockAnimationCount:a}=(0,r.useContext)(m.Bl),{clockIcon:o,activityProgress:i=90,width:c}=t||{},u=c||60,[d,p]=(0,r.useState)(!1),f=(0,r.useRef)(null);if((0,r.useEffect)((()=>{p(!0),a()}),[]),!o)return null;const h=i/100,y=7*i/1e3;let E=Math.max(0,Math.min(u-15,h*u-7.5)),v=-(u-h*u);return e&&(E=-E,v=-v),r.createElement("div",{className:I().clockWrap,ref:f},r.createElement("div",{className:I().clockBg,style:{width:u}},r.createElement("div",{className:s()(I().clockInner,{[I().clockInnerAnimation]:d&&1===n,[I().clockInnerNotAnimation]:n>1}),style:{width:u,"--progress-translate":`${v}px`,"--progress-translate-time":`${y}s`}})),o?r.createElement("div",{className:s()(I().clock,{[I().clockAnimation]:d&&1===n,[I().clockNotAnimation]:n>1}),style:{"--clock-translate":`${E}px`,"--clock-translate-time":`${y}s`}},r.createElement(g.A,{className:I().clockImg,src:o,resizeWidth:100,alt:""})):null)},_=()=>{const{endTimeImage:e,activityProgressStyle:t,showDynamicTimeImage:n}=(0,r.useContext)(m.Bl),{clockIcon:a}=t||{};if(a&&n)return r.createElement(k,null);const{url:s,width:o,height:i}=e||{};if(!s)return null;let c={};return o&&i&&(c={width:o,height:i}),r.createElement(g.A,{className:I().endTimeImage,src:e.url,style:c,resizeWidth:300,"aria-hidden":!0,alt:""})},b=e=>{let{endTimeText:t,endTimeRichText:n}=e;return r.createElement(r.Fragment,null,r.createElement("div",{className:I().divider}),r.createElement("div",{className:I().entTimeWrap},n?r.createElement(d.l5,{className:s()(I().entTimeText,I().entTimeRichText),newRichText:n,style:{textAlign:"left"}}):t?r.createElement("span",{className:I().entTimeText},t):null,r.createElement(_,null)))},w=(0,o.W4)({name:"ActivityBanner"})((function(e){let{isShowArrow:t,onClick:n,onMouseDown:a,onMouseLeave:o,activityInfo:i,serverRenderTime:l,skuActivityTip:h,contentClassName:y,skuActInfo:E,showDynamicTimeImage:x,showDynamicProgress:k}=e;const{t:w}=(0,c.B)("bec-fe.web-sku-selector"),{activityEndTime:C,defaultActivityName:S,endTimeImage:N,markImage:T,endTimeText:R,activityIconUrl:A}=i||{},[z,L]=(0,r.useState)(!!C),[M,P]=(0,r.useState)(0),D=t&&n,{activityNameRich:U,activityReductionRich:B,activityReductionText:W,arrowheadColor:O,frameStyle:F,sideTextRich:H}=E||{},V=E?.activityProgressStyle||i?.activityProgressStyle||{},$=U?.textRich?.length||E?.activityName||S,q=1===F,G=E?.bgColor||i?.bgColor,{clockIcon:j}=V||{};(0,r.useEffect)((()=>{L(!!C)}),[C]);const K=()=>{L(!1)},Q=()=>{if(U?.textRich?.length){const e=(0,p.uj)(U);return r.createElement(d.l5,{newRichText:U,className:I().activityNameRich,style:{textAlign:"left",...e?{color:e}:{}}})}return $};return r.createElement(m.Bl.Provider,{value:{activityProgressStyle:V,clockAnimationCount:M,updateClockAnimationCount:()=>{P((e=>e+1))},endTimeImage:N,endTimeText:R,showDynamicTimeImage:x}},r.createElement("div",{className:I().wrap,style:G?{backgroundColor:G}:{}},r.createElement("div",{className:s()(I().content,D&&I().click,y),onClick:()=>{D&&n?.()},onMouseDown:a,onMouseLeave:o,"aria-hidden":!0},T?.url&&!q?r.createElement(g.A,{className:I().activityMarkImage,src:T.url,resizeWidth:300,"aria-hidden":!0,alt:""}):null,h?r.createElement("div",{className:I().activityV2},r.createElement("div",{className:I().activityV2Left},r.createElement("span",{className:I().activityTipsText},h),r.createElement(_,null)),$?r.createElement("div",{className:I().activityV2Rgiht},A?r.createElement("span",{style:{backgroundImage:`url(${A}) linear-gradient(#fff, #fff)`,maskImage:`url(${A})`,WebkitMaskImage:`url(${A})`},className:I().activityIcon}):null,r.createElement("span",{className:I().activityV2Name},Q())):null):r.createElement(r.Fragment,null,r.createElement("div",{className:s()(I().endTimeInfo,q&&I().frameStyleText)},$?r.createElement("span",{className:s()(I().activityText,U?.textRich?.length&&I().activityNameRichWrap)},Q()):null,q?null:B?.textRich?.length?r.createElement(b,{endTimeRichText:B}):W?r.createElement(b,{endTimeText:W}):R?r.createElement(b,{endTimeText:R}):C&&z?j&&k?r.createElement(v,{activityEndTime:C,endTimeCallBack:K}):r.createElement("div",{className:I().afterName},r.createElement("div",{className:I().divider}),r.createElement("div",{className:I().entTimeWrap},C?r.createElement(r.Fragment,null,r.createElement("div",{className:I().entTime,dir:"ltr"},r.createElement(f.U,{endLeftTime:C,callback:K,endType:f.Y.SeparateDay,nowTime:l,digitsStyle:{display:"inline-block",width:18,textAlign:"center"}})),r.createElement("span",{className:I().entTimeText},w("activityEndIn"))):null,r.createElement(_,null))):null)),r.createElement("div",{className:I().right},H?.textRich?.length?r.createElement(d.l5,{className:I().sideText,newRichText:H,style:{textAlign:"left",color:H.textRich[0]?.fontColor}}):null,D?r.createElement(u.A,{className:s()(I().arrow,q&&I().frameStyleArrow),style:O?{fill:O}:{}}):null))))}));var C=n(9699),S=n.n(C);let N=function(e){return e[e.All=0]="All",e[e.ExplicitlySelected=1]="ExplicitlySelected",e[e.UnExplicitlySelected=2]="UnExplicitlySelected",e}({});const T=(0,o.W4)({name:"ActivityWrap"})((function(e){let{children:t,isShowArrow:n,onClick:a,onMouseDown:o,onMouseLeave:c,activityInfo:l,skuActInfo:u,serverRenderTime:m,skuActivityTip:d,className:p,contentClassName:g,contentBgClassName:f,showDynamicTimeImage:h,showDynamicProgress:y}=e;const{defaultActivityName:E}=l||{},{activityNameRich:v,activityName:x}=u||{},I=v?.textRich?.length||x||E,k=u?.bgColor||l?.bgColor;return I?r.createElement(i.nU,{page_el_sn:232423,useClick:!1},r.createElement("div",{className:s()(S().wrap,p)},r.createElement(w,{isShowArrow:n,onClick:a,onMouseDown:o,onMouseLeave:c,skuActivityTip:d,skuActInfo:u,activityInfo:l,serverRenderTime:m,contentClassName:g,showDynamicTimeImage:h,showDynamicProgress:y}),r.createElement("div",{className:S().content,style:k?{border:`2px solid ${k}`}:{}},r.createElement("div",{className:s()(S().banner,f),style:k?{background:k}:{}}),r.createElement("div",{className:S().child},t)))):t}))},94317:function(e,t,n){"use strict";n.d(t,{D:function(){return f}});var r=n(33514),a=n(32485),s=n.n(a),o=n(14511),i=n(53075),c=n(82141),l=n(35439),u=n(66531),m=n(11739),d=n.n(m),p=function(e){return e[e.process=1]="process",e[e.finish=2]="finish",e}(p||{});const g=(0,l.M)("transform");function f(e){let{gapAmount:t,minAmount:n,promotionProgressStatus:a,progressCls:o}=e;const i=+(100*(a===p.finish?1:0===n&&t>0?0:Math.max((n-t)/n||0,0))).toFixed(2);return r.createElement("div",{className:s()(d().bar,o)},r.createElement("div",{className:d().innerBar,style:{transform:`translateX(${-100+i}%)`,[g]:`translateX(${-100+i}%)`}}))}const h=e=>{let{collectPromotion:t,progressCls:n=""}=e;const{promotionProgressStatus:a,iconDisplayItem:o,promotionTextDisplayItem:l,minAmount:m,gapAmount:g,progressShow:h,cartLink:y}=t||{},E=a===p.finish,v=(0,r.useCallback)((()=>{y&&(0,i.MJ)((0,u.L)(y))}),[y]);return r.createElement("div",{className:s()(d().wrap,E?d().isFinish:"")},r.createElement("div",{className:d().content},r.createElement("div",{className:d().left},r.createElement(c.mJ,{displayItems:o?.displayItems,imageStyle:{marginRight:"7px"}})),r.createElement("div",{className:d().right},r.createElement("div",{className:s()(d().firstLine,y?d().clickStatus:""),onClick:v},r.createElement(c.mJ,{displayItems:l?.displayItems,imageStyle:{marginTop:"2px"},imageClassName:d().img})),!!h&&r.createElement(f,{gapAmount:g,minAmount:m,promotionProgressStatus:a,progressCls:n}))))};t.A=(0,o.eE)()((0,r.memo)(h))},82141:function(e,t,n){"use strict";n.d(t,{mJ:function(){return m}});var r=n(33514),a=n(82370),s=n(30015),o=n(40119),i=function(e){return e[e.TEXT=0]="TEXT",e[e.IMAGE=100]="IMAGE",e[e.COUNT_DOWN=300]="COUNT_DOWN",e[e.TIME=12]="TIME",e}(i||{});function c(e){let{displayItem:t,imageStyle:n={},className:s}=e;const{height:o,width:i,url:c}=t||{},l={height:o,width:i,...n};return c?r.createElement(a.Ay,{alt:"",src:c,style:l,"aria-hidden":!0,className:s}):null}function l(e){let{displayItem:t,textStyle:n={},className:a="",ignoreFontSize:s}=e;const{fontWeight:o,fontColor:i,color:c,fontSize:l,bold:u,text:m=""}=t||{},d={fontWeight:o||(u?500:400),color:i||c,...n};return s||(d.fontSize=l),r.createElement("span",{style:d,className:a},m)}function u(e){let{displayItem:t,onCountDown:n,isSeparateDay:a,serverTime:i,timeCls:c}=e;const{fontWeight:l,fontColor:u,color:m,fontSize:d,bold:p,text:g=""}=t||{},f={fontWeight:p?600:l,color:u||m,fontSize:d,direction:"ltr"};return r.createElement(s.A,{intervalGap:1e3,endTime:1e3*Number(g)||Date.now(),nowTime:1e3*i||Date.now(),renderFunc:e=>{let{hour:t,minute:n,second:s,day:i}=e;return r.createElement("span",{className:c,style:f,"aria-hidden":!0,dir:"ltr",suppressHydrationWarning:!0},a&&i?r.createElement(r.Fragment,null,r.createElement("span",{"data-type":"time",suppressHydrationWarning:!0},(0,o.yg)(i)),r.createElement("span",{"data-type":"colon"},":")):null,r.createElement("span",{"data-type":"time",suppressHydrationWarning:!0},a?(0,o.yg)(t):(0,o.yg)(24*i+t)),r.createElement("span",{"data-type":"colon"},":"),r.createElement("span",{"data-type":"time",suppressHydrationWarning:!0},(0,o.yg)(n)),r.createElement("span",{"data-type":"colon"},":"),r.createElement("span",{"data-type":"time",suppressHydrationWarning:!0},(0,o.yg)(s)))},rAF:!0,callback:n})}function m(e){let{displayItems:t,textStyle:n,textClassName:a,imageStyle:s,ignoreFontSize:o,imageClassName:m,isSeparateDay:d,onCountDown:p,serverTime:g,timeCls:f}=e;return Array.isArray(t)?r.createElement(r.Fragment,null,t.map(((e,t)=>{const{displayType:h}=e||{};return i.IMAGE===h?r.createElement(c,{displayItem:e,key:`${t}-${h}`,imageStyle:s,className:m}):h===i.COUNT_DOWN||h===i.TIME?r.createElement(u,{displayItem:e,isSeparateDay:d,onCountDown:p,key:`${t}-${h}`,serverTime:g,timeCls:f}):r.createElement(l,{displayItem:e,key:`${t}-${h}`,textStyle:n,className:a,ignoreFontSize:o})}))):null}},15418:function(e,t,n){"use strict";n.d(t,{jN:function(){return g},pY:function(){return f}});var r=n(33514),a=n(32485),s=n.n(a),o=n(97582),i=n(72620),c=n(84973),l=n(53075),u=n(80907),m=n(64018),d=n.n(m);const p=(0,r.memo)((e=>{let{sumerKey:t,linePriceExplainData:n}=e;const{linePriceTipsJumpUrl:a,linePriceTipsTitle:s}=n||{},{t:i}=(0,o.B)("bec-fe.web-sku-selector",{keyPrefix:"linePriceExplain"});return r.createElement(u.Ay,{page_el_sn:225011,useGc:!0},r.createElement("div",{className:d().container},i(t),s?r.createElement("div",{className:d().title,onClick:()=>{a&&(0,l.MJ)(a,{openTarget:"_blank"})},role:"link",tabIndex:0,"aria-label":s},s):null))})),g=(0,r.memo)((e=>{const{hideOverlay:t,className:n,iconClassName:a,pageElSn:o,sumerKey:l,linePriceExplainData:m,renderContent:g}=e||{};return l?r.createElement(c.A,{placement:"bottom",appendToBody:!0,adapted:!0,overlay:t?null:r.createElement(p,{linePriceExplainData:m,sumerKey:l}),overlayClassName:d().linePriceExplain},r.createElement("div",{className:s()(d().entry,n)},r.createElement(u.Ay,{page_el_sn:o},r.createElement("div",null,"function"==typeof g?g():r.createElement(i.A,{className:s()(d().explainIcon,a)}))))):null})),f=e=>{let{explainText:t,content:n}=e;return r.createElement(c.A,{appendToBody:!0,adapted:!0,overlay:(()=>{if(!Array.isArray(t)||!t?.length)return null;return r.createElement(u.Ay,{page_el_sn:225011},r.createElement("div",{className:d().tipsContent},t.map(((e,t)=>r.createElement("div",{className:s()(d().tipsContentItem,e?.link&&d().tipsLink),onClick:()=>{return t=e?.link,void(t&&(0,l.MJ)(t,{openTarget:"_blank"}));var t},role:"link",tabIndex:e?.link?0:-1,"aria-label":e?.text,key:t},e?.text)))))})()},r.createElement("div",{className:d().priceRichItem},n))}},67926:function(e,t,n){"use strict";n.d(t,{Y:function(){return y}});var r=n(14242),a=n(33514),s=n(32485),o=n.n(s),i=n(10147),c=n(1528),l=n(32167),u=n(80907),m=n(22780),d=n.n(m);const p=()=>a.createElement("div",{className:d().wrap},a.createElement("div",{className:d().animate}));var g=(0,a.memo)(p),f=n(86967),h=n.n(f);const y=e=>{let{pageElSn:t=0,others:n,onClick:s,type:m,useLoad:d=!0,useImpr:p=!0,useClick:f,disable:y,btnCustomContent:E,btnContent:v,btnBottomContent:x,btnCornerContent:I,beforeBtnTextIcon:k,beforeContentIcon:_,className:b,innerCls:w,style:C,label:S,showFlash:N,...T}=e;const R=()=>E||("string"!=typeof v?v:a.createElement(a.Fragment,null,a.createElement("span",{className:h().btnText,role:"button","aria-label":S},k,v),x,_)),A=()=>N?a.createElement(g,null):null;return d?a.createElement(u.Ay,{page_el_sn:t,others:n,useClick:f,useImpr:p},a.createElement(l.A,(0,r.A)({className:o()(h().btn,b,{[h().flashContainer]:N,[h().activeMask]:m===c.el.primary||void 0===m}),innerCls:o()(w),style:C,onClick:s,type:m,disable:y},T),R(),A(),I)):a.createElement(u.Ay,{page_el_sn:t,others:n,useClick:f,useImpr:p},a.createElement(i.A,(0,r.A)({className:o()(h().btn,b,{[h().flashContainer]:N,[h().activeMask]:m===c.el.primary||void 0===m}),innerCls:o()(w),style:C,onClick:s,type:m,disable:y},T),R(),A(),I))}},53340:function(e,t,n){"use strict";n.d(t,{I:function(){return Z},O:function(){return X}});var r=n(33514),a=n(32485),s=n.n(a),o=n(32389),i=n(95789),c=n(14511),l=n(97582),u=n(76280),m=n(87837),d=n(82370),p=n(10147),g=n(1528),f=n(62356),h=n(52248),y=n(40782),E=n(20755),v=n(40309),x=n(7682),I=n(19618),k=n(76475),_=n(29003),b=n(96179),w=n(66376),C=n(733),S=n(66531),N=n(14242),T=n(94802),R=n(19732),A=n(46694);function z(e){const{goodsInfo:t,cartCls:n="",wrapCls:a="",oakStage:s,pageElSn:o,autoAddSingleSku:i=!0,source_goods_id:c,source_sku_id:l,skuParams:d,style:p={},showParams:g={},grayConfig:f,...h}=e,{goodsId:y,pRec:E,specIds:v,thumbUrl:I}=t||{},{isRTL:k}=(0,A.Sz)(),[_,b]=(0,r.useState)(t?.cartAmount||0);(0,r.useEffect)((()=>{const e=(0,u.Xu)((e=>{let{cartGoodsNumMap:t}=e;"object"==typeof t&&b(t[y]||0)}));return()=>{e()}}),[]);const C="string"==typeof E?E:JSON.stringify((0,x.qi)(E)),S=(0,r.useMemo)((()=>{const e={p_rec:C,source_goods_id:c,source_sku_id:l};return o&&(e.page_el_sn=o),{imprEventData:e,clickEventData:e,autoAddSingleSku:i,...g}}),[y,v,E,g]);return r.createElement(m.nU,{useClick:!1,page_el_sn:200061,others:{cart_scene:g?.cartScene,goods_id:y,p_rec:C}},r.createElement(w.A,{style:{[k?"marginLeft":"marginRight"]:"6px",...p},showParams:S,thumbUrl:I,grayConfig:f},r.createElement(R.A,(0,N.A)({cartAmount:_,addCart:()=>{}},h))))}var L=n(41722),M=n.n(L);function P(e){const{cartMouseEnter:t,cartMouseLeave:n,showCart:a=!0,goodsInfo:o,mainGoodsTrackingInfo:i,classConfig:c,saleInfoCls:l,goodsInfoCls:u="",showFlashSaleIcon:m,showParams:d,grayConfig:p}=e,{priceInfo:g,salesTipText:f,salesTip:h,noSalesTipText:y,salesTipTextList:E}=o||{},{priceStr:v,priceText:x,marketPriceText:I,priceColor:k,marketPriceIcon:_}=g||{},b=x?x[1]:v,w=x?x[0]:"",C=x?x[2]:"",S=I&&I.length?I.join(""):"",R=E?.length?E:f;return r.createElement("div",{className:s()(M().goodsInfo,u)},r.createElement(T.A,{className:s()(l,M().goodsSaleInfo),classConfig:{...c,flexContainer:s()(M().flexContainer,c?.flexContainer),price:c?.price},price:b,pricePrefix:w,priceSuffix:C,marketPrice:S,sales:h,salesArray:R,marketPriceIcon:_,priceColor:k,noSalesTipText:y,enableScale:!0,showFlashSaleIcon:m}),!!a&&r.createElement("div",{className:s()(M().cartIcon,c?.cartIcon)},r.createElement(z,(0,N.A)({},i||{},{key:o?.goodsId,goodsInfo:o,onMouseEnter:()=>t?.(),onMouseLeave:()=>n?.(),showParams:d,grayConfig:p}))))}var D=n(83052),U=n(23450),B=n(59661),W=n(14825),O=n(13852),F=n(80907),H=n(3759),V=n.n(H),$=(0,c.W4)({name:"bottomRecPopup"})((function(e){let{data:t,index:n}=e;const{goodsId:a,selectedSku:i,options:c,showQuickLook:l,grayConfig:u}=(0,k.Pj)(),m=u?.cp149563||{},{skuId:p}=i||{},{pageSn:g}=c||{},f={supportPersonalize:!0},{goodsName:h,skuList:y,salesTip:E,thumbUrl:v,marketPriceText:w,goodsId:N,priceInfo:T,pRec:R,seoLinkUrl:A,linkUrl:z,activityType:L,specIds:M,tagsInfo:D}=t||{},{skuId:U}=y?.[0]||{},B="string"==typeof R?R:JSON.stringify((0,x.qi)(R)),W=(0,r.useMemo)((()=>(0,S.L)(A||z)),[A,z]),{price:H,currency:$}=T||{},{adTags:q}=D||{},G=(0,r.useMemo)((()=>{if(!q?.[0])return{};const{extMap:e}=q?.[0]||{},{ad:t}=e||{};return{is_ad_tag:q?.[0]?.text?1:0,ad:t}}),[]),j={source_sku_id:p,source_goods_id:a,show_currency:$,show_price:H,show_sales:E||w,idx:n,p_rec:B,rec_goods_id:N,rec_sku_id:U},K=(0,r.useMemo)((()=>({pageSn:g,addCart:!0,showAdded:!0,...f?{frontControl:f}:{},...m?.prerender?{grayConfig:u}:{},params:{goods_id:N,_oak_spec_ids:M,_oak_stage:17,_oak_sku_id:U,_oak_page_source:424},cartScene:275,isAutoShowToast:!0,callback:e=>{const{error:t}=e;if(t)return(0,I.Ku)(t)}})),[N,g]);return r.createElement(F.Ay,{page_el_sn:221581,others:{...j,...G}},r.createElement(b.A,{className:s()(V().item,V().normalItem,l?V().showQuickLook:""),thumbUrl:v,url:(0,O.rE)({_oak_sku_id:U},W),uniformForwardParams:{openTarget:"_blank"},grayConfig:m,pageName:I.kg},r.createElement("div",{className:V().goodsImg},v?r.createElement(d.Ay,{src:v,alt:"",lazy:!0}):null,r.createElement(_.A,{className:V().quickLook,id:`QuickLook-${N}`,showParams:K,thumbUrl:v,grayConfig:m,classConfig:{icon:V().quickLookIcon}}),r.createElement(o.r,{data:t})),r.createElement("div",{className:V().goodsInfo},y&&y.length>0?r.createElement("div",{className:V().skuList},y.map(((e,t)=>e?.thumbUrl?r.createElement(d.Ay,{alt:"",key:t,className:V().sku,src:e.thumbUrl}):null))):null),r.createElement("div",{className:V().goodsName},h),r.createElement(P,{showCart:!0,saleInfoCls:V().saleInfo,goodsInfo:t,showParams:K,classConfig:{price:V().normalPrice,pricePrefix:V().unit,priceSuffix:V().unit},mainGoodsTrackingInfo:j,showFlashSaleIcon:L===C.Mr.Lightning,grayConfig:m})))})),q=n(76737),G=n.n(q);const j=()=>{const{bottomRecStore:e}=(0,k.Pj)(),{goodsList:t,queryFrequentBought:n,hasMore:a}=e,[o,i]=(0,r.useState)(t),[c,l]=(0,r.useState)(a);return c&&!o?.length?null:r.createElement(U.A,{wrapperClass:G().list,datasource:o,hasMore:c,loadMoreData:async()=>n().then((e=>{let{goodsList:t,hasMore:n}=e;i(t),l(n)})),renderItem:$,loadMode:"auto",showLoading:!0,bottomWrapperClass:s()(G().bottomBtn,c?"":G().none)})},K=()=>r.createElement("div",{className:G().container},r.createElement("div",{className:G().head},(0,D.t)("SkuRecommend.bottomRecTitle",{ns:"bec-fe.web-sku-selector"})),r.createElement("div",{className:G().goodsList},r.createElement(j,null))),Q=(0,c.W4)()((0,r.memo)((e=>{let{store:t,onClose:n}=e;return r.createElement(k.Pd.Provider,{value:t},r.createElement(B.Ay,{onClick:()=>{(0,W.b9)({op:"click",page_el_sn:201063}),n()}},r.createElement(K,null)))})));var J=n(12707),Y=n.n(J);const X=e=>{let{data:t,index:n,className:a,cartScene:i=275,pageElSn:c,priceClsConfig:h,outerPageSn:y,outerMainGoodsId:E,isShowQuickLook:v=!0,isShowLocalWarehouseTag:N,addCartBtnPageElSn:T=200061}=e;const{currency:R,thumbUrl:A,pRec:z,title:L,goodsName:M,linkUrl:D,seoLinkUrl:U,priceInfo:B,skuList:W,specIds:O,goodsId:F,salesTip:H,extendFields:V,activityType:$,complianceInfo:q,tagsInfo:G}=t||{},j="string"==typeof z?z:JSON.stringify((0,x.qi)(z)),{skuId:K=""}=W?.[0]||{},{t:Q}=(0,l.B)("bec-fe.web-sku-selector"),{options:J,goodsId:X,selectedSku:Z,showQuickLook:ee,grayConfig:te}=(0,k.Pj)(),ne=te?.cp149563||{},{pageSn:re,frontControl:ae}=J||{},se=y||re,oe=E||X,ie=(0,r.useMemo)((()=>(0,S.L)(U||D)),[U,D]),[ce,le]=(0,r.useState)(t?.cartAmount||0);(0,r.useEffect)((()=>{const e=(0,u.Xu)((e=>{let{cartGoodsNumMap:t}=e;"object"==typeof t&&le(t[F]||0)}));return()=>{e()}}),[]);const{priceStr:ue,priceText:me}=B||{},de=me?me[0]:"",pe=me?me[2]:"",ge=Array.isArray(me)?me[1]:ue,{adTags:fe}=G||{},he=(0,r.useMemo)((()=>{if(!fe?.[0])return{};const{extMap:e}=fe?.[0]||{},{ad:t}=e||{};return{is_ad_tag:fe?.[0]?.text?1:0,ad:t}}),[]),ye={source_sku_id:Z?.skuId,source_goods_id:oe,show_currency:R,show_price:ge,show_sales:H,idx:n,p_rec:j,rec_goods_id:F,rec_sku_id:K},{iconInfo:Ee}=q||{},ve=de?.length>1||pe?.length>1,xe={...ve?{cartIcon:Y().cartIcon}:{},...h},Ie=(0,r.useMemo)((()=>({imprEventData:ye,clickEventData:ye,pageSn:se,params:{goods_id:F,_oak_spec_ids:O,_oak_stage:17,_oak_sku_id:K,_oak_page_source:424},addCart:!0,showAdded:!0,frontControl:{...ae,supportPersonalize:!0},...ne?.prerender?{grayConfig:te}:{},cartScene:i||"275",isAutoShowToast:!0,callback:e=>{const{error:t}=e;if(t)return(0,I.Ku)(t)}})),[F,O,K,ye]);return r.createElement(m.nU,{page_el_sn:c||221581,others:{...ye,...he}},r.createElement(b.A,{className:s()(Y().goodsItem,a,ee&&v?Y().showQuickLook:""),thumbUrl:A,url:ie,uniformForwardParams:{openTarget:"_blank"},grayConfig:ne,pageName:I.kg,supportLongPress:!0},r.createElement("div",{className:Y().imgWrap},r.createElement(d.Ay,{src:A,alt:"",className:Y().img}),r.createElement(_.A,{className:Y().quickLook,id:`QuickLook-${F}`,showParams:Ie,trackingInfo:ye,thumbUrl:A,grayConfig:ne,classConfig:{container:Y().quicklookContainer,icon:Y().quickLookIcon,contentCls:Y().quicklookContentCls}}),N?r.createElement("div",{className:Y().localWarehouse},Q("LocalMallRecommendPopup.localWarehouse")):null,r.createElement(o.r,{data:t})),r.createElement("div",{className:Y().goodsName},L||M),r.createElement(P,{showCart:!1,goodsInfo:t,goodsInfoCls:ve?Y().goodsInfo:"",classConfig:xe,showFlashSaleIcon:$===C.Mr.Lightning}),r.createElement(m.nU,{page_el_sn:T,others:{...ye,cart_scene:i}},r.createElement(w.A,{className:Y().addCartBtn,showParams:Ie,thumbUrl:A,grayConfig:ne},r.createElement(p.A,{type:g.el.border,autoScale:!0,size:"md",className:Y().addCartBtnText},Q("add_to_cart"),ce?r.createElement(f.Ex,{type:"number",content:ce,className:Y().addCartBadge}):null)))))},Z=(0,c.W4)({name:"BottomRec"})((function(){const e=(0,k.Pj)(),{t:t}=(0,l.B)("bec-fe.web-sku-selector"),{bottomRecStore:n,addedAmount:a,hitBottomRec:s}=e,{goodsList:o,queryFrequentBought:c}=n,u=(0,r.useCallback)(((e,t)=>r.createElement(X,{data:e,index:t})),[]);return(0,r.useEffect)((()=>{!o?.length&&a&&s&&c()}),[a,o?.length]),o?.length?r.createElement("div",{className:Y().wrap},r.createElement(m.nU,{page_el_sn:221579,useClick:!1},r.createElement("div",{className:Y().title,onClick:()=>{const t=(0,i.A)(r.createElement(Q,{onClose:()=>t(),store:e}),{})},role:"button",tabIndex:0},r.createElement("div",{className:Y().titleText},t("SkuRecommend.bottomRecTitle",{ns:"bec-fe.web-sku-selector"})),r.createElement(m.nU,{page_el_sn:221580},r.createElement("div",{className:Y().seeMore},t("see_more",{ns:"bec-fe.web-sku-selector"}),r.createElement(h.hu,{className:Y().titleArrowIcon,direction:"right","aria-hidden":!0}))))),r.createElement("div",{className:Y().bottom},r.createElement(ee,{renderItem:u,list:o}))):null})),ee=e=>{const{renderItem:t,list:n}=e,{bottomRecStore:a}=(0,k.Pj)(),{initDataPromise:o,userBottomRecInteraction:i}=a,c=(0,r.useRef)();(0,r.useEffect)((()=>{o instanceof Promise&&o.then((()=>i?.end?.({name:"pc_skuShowBottomRecTime"})))}),[]);const l=e=>{const{splideRef:t}=c.current||{},n=t.current?.splide;if(!n)return;const r=n.index,a=n.Components.Slides.get(),s=a.filter((e=>(0,y.Jj)(n.root,e.slide)))?.length,o="next"===e?r+s:r-s;n.go(Math.max(a?.[0].index,Math.min(o,a?.[a?.length-1].index)))};return r.createElement(y.pM,{pageSize:1,ref:c,customArrows:r.createElement("div",{className:s()("splide__arrows",Y().arrowMask)},r.createElement("div",{style:{opacity:0,display:"none"},className:s()("splide__arrow splide__arrow--prev",Y().leftArrow,Y().arrow)},r.createElement(E.A,{direction:"left",className:Y().baseArrowBtn,onClick:()=>l("prev")})),r.createElement("div",{style:{opacity:0,display:"none"},className:s()("splide__arrow splide__arrow--next",Y().rightArrow,Y().arrow)},r.createElement(E.A,{direction:"right",className:Y().baseArrowBtn,onClick:()=>l("next")})))},n.map(((e,n)=>r.createElement(v.Nn,{className:s()(Y().item),key:n},t(e,n)))))}},45362:function(e,t,n){"use strict";n.d(t,{F:function(){return w}});var r=n(33514),a=n(32485),s=n.n(a),o=n(14511),i=n(82370),c=n(53075),l=n(77805),u=n(94317),m=n(84369);const d=e=>{let{item:t,index:n,imageMarginRight:a,imgHasWrap:s,imgClass:o}=e;const{image:c}=t||{},{url:l,width:u,height:m}=c||{},d={width:u,height:m,marginRight:a||"2px",maxWidth:u};return l?s?r.createElement("span",{className:o},r.createElement(i.Ay,{key:n,src:l,style:d,"aria-hidden":!0,alt:""})):r.createElement(i.Ay,{key:n,src:l,style:d,className:o,"aria-hidden":!0,alt:""}):null},p=e=>{let{item:t,index:n,delimeterConfig:a}=e;const{color:s,width:o,height:i,margin:c,opacity:l}=a||{},{delimeter:u}=t||{},{color:m="#000000"}=u||{},d={display:"inline-block",backgroundColor:s||m,width:o||"1px",height:i||"10px",margin:c||"0 4px",opacity:l||.1};return r.createElement("span",{key:n,style:d})},g=e=>{let{item:t,index:n,ignoreFontSize:a,DialogComponent:s,type:o}=e;const{text:i,textFormat:c,dialog:l}=t||{};if(!i)return null;const{color:u,fontSize:m,fontWeight:d}=c||{},p={color:u,fontWeight:d};return!a&&m&&(p.fontSize=`${m}px`),3===o&&l&&s?r.createElement("span",null,r.createElement("span",{key:n,style:p},i),r.createElement(s,{dialog:l})):r.createElement("span",{key:n,style:p},i)};var f=(0,r.memo)((e=>{let{richText:t,className:n,ignoreFontSize:a,DialogComponent:s,imgClass:o,imgHasWrap:i,basicStyleConfig:c}=e;const{image:l,delimeter:u}=c||{},{marginRight:m}=l||{};return r.createElement("div",{className:n},(t||[]).map(((e,t)=>{const{type:n=0}=e||{};switch(n){case 1:return r.createElement(d,{item:e,index:t,alt:"",imageMarginRight:m,imgHasWrap:i,imgClass:o,key:t});case 2:return r.createElement(p,{item:e,index:t,delimeterConfig:u,key:t});default:return r.createElement(g,{item:e,index:t,ignoreFontSize:a,DialogComponent:s,type:n,key:t})}})))})),h=n(42743),y=n(66531);let E=function(e){return e[e.Normal=0]="Normal",e[e.UnfinishedBenefit=1]="UnfinishedBenefit",e[e.AddCart=2]="AddCart",e}({});var v=n(80518),x=n.n(v);function I(e){let{richText:t,marketing:n}=e;const{promotionProgressStatus:a,minAmount:o,gapAmount:i,cartLink:l,progressShow:m}=n||{};return r.createElement("div",{className:x().right},r.createElement("div",{className:s()(x().text,l?x().clickStatus:""),onClick:()=>{l&&(0,c.MJ)((0,y.L)(l))}},r.createElement(f,{richText:t})),!!m&&r.createElement(u.D,{gapAmount:i,minAmount:o,promotionProgressStatus:a}))}const k=e=>{let{marketing:t,className:n,richCls:a,customRenderWhiteList:o,customRenderTextRichItem:c}=e;const{iconUrl:l,textRich:u=[],customType:m}=t||{};return u?.length?m&&o?.includes?.(m)&&"function"==typeof c?c(t):r.createElement("div",{className:s()(x().wrap,n),"aria-label":(0,h.yQ)(u)},l?r.createElement("div",{className:x().icon,"aria-hidden":!0},r.createElement(i.Ay,{src:l,resizeWidth:40})):null,m===E.UnfinishedBenefit?r.createElement(I,{richText:u,marketing:t}):r.createElement(f,{richText:u,className:s()(x().rich,a)})):null},_=e=>{let{carousel:t,isResizeTrigger:n,style:a,className:o,carouselItemCls:i,customRenderWhiteList:c,customRenderTextRichItem:u,canStopCarousel:d}=e;const{scrollTime:p,scrollTimeMs:g,carouselDisplayList:f}=t,h=(0,r.useMemo)((()=>[...f||[]]),[f]),[y,E]=(0,r.useState)(!1),v=g?g/1e3:p,{containerRef:I,scrollRef:_,transformStyle:b,containerHeight:w,start:C,reset:S,stop:N,continueCarousel:T}=(0,m.g)({scrollTime:v,carouselLength:h?.length}),R=(0,r.useCallback)((0,l.s)(N,500),[N]),A=(0,r.useCallback)((0,l.s)(T,500),[T]);if((0,r.useEffect)((()=>{E(!0)}),[]),(0,r.useEffect)((()=>{C()}),[C,y]),(0,r.useEffect)((()=>{S()}),[n,S,h]),!h?.length||!y)return null;return r.createElement("div",{className:s()(x().multiContainer,o),ref:I,style:{...a,"--container-height":`${w}px`},onMouseEnter:()=>{d&&R()},onMouseLeave:()=>{d&&A()}},r.createElement("div",{className:x().scrollWrap,ref:_,style:b},[...h,h[0]].map(((e,t)=>r.createElement(k,{marketing:e,key:`${e.iconUrl}${t+1}`,customRenderWhiteList:c,customRenderTextRichItem:u,className:i})))))},b=e=>{let{carousel:t,isResizeTrigger:n,style:a={},className:s,carouselItemCls:o,customRenderWhiteList:i,customRenderTextRichItem:c,canStopCarousel:l}=e;const{carouselDisplayList:u}=t||{},m=[...u||[]];return m?.length>1?r.createElement(_,{carousel:t,isResizeTrigger:n,style:a,className:s,carouselItemCls:o,customRenderWhiteList:i,customRenderTextRichItem:c,canStopCarousel:l}):1===m?.length?r.createElement("div",{style:a},r.createElement(k,{marketing:m[0],customRenderWhiteList:i,customRenderTextRichItem:c,className:o})):null},w=(0,o.W4)({name:"MarketingComponent"})((0,r.memo)(b))},5887:function(e,t,n){"use strict";n.d(t,{K:function(){return je},r:function(){return Ke}});n(44114),n(16280);var r=n(33514),a=n(34477),s=n(83836),o=n(32470),i=n(95789),c=n(97582),l=n(83052),u=n(46272),m=n(20162),d=n(59661),p=n(59024),g=n(79691),f=n(32485),h=n.n(f),y=n(7638),E=n(32167),v=n(1528),x=n(53075),I=n(80907),k=n(99117),_=n(87837),b=n(10147),w=n(82856),C=n.n(w);const S=(0,r.memo)((e=>{let{onClose:t}=e;const{t:n}=(0,c.B)("bec-fe.web-sku-selector",{keyPrefix:"Editor"}),{t:a}=(0,c.B)("bec-fe.web-sku-selector"),s=e=>{e&&(0,x.MJ)(e,{openTarget:"_blank"})};return r.createElement(d.Ay,{onClick:()=>{t(),(0,k.OS)({page_el_sn:215983,op:"click"})},useSplitBg:!0},r.createElement(_.Rp,{page_el_sn:203753,useClick:!1},r.createElement("div",{className:C().wrap},r.createElement("div",{className:C().title},n("sensitiveTitle")),r.createElement("div",{className:C().content},r.createElement(y.x,{t:n,i18nKey:"sensitiveContent",ns:"bec-fe.web-sku-selector"},r.createElement("span",null),r.createElement("span",{className:C().contentActive,onClick:()=>s(n("link.temuOfUse"))}),r.createElement("span",{className:C().contentActive,onClick:()=>s(n("link.guideline"))}))),r.createElement(_.Rp,{page_el_sn:215985},r.createElement("div",{className:C().btnWrapper},r.createElement(b.A,{className:C().btn,onClick:t},a("Success.btn")))))))}));var N=n(9694),T=n(55095);const R={failInfo:{failStatus:N.c8.mergeImgRisk},idx:-1},A={failInfo:{failStatus:N.c8.none},idx:-1};var z=n(19670),L=n(27219),M=n(83005),P=n(14623),D=n.n(P);const U=e=>{const{size:t=16,strokeWidth:n=2,percent:a=0,color:s="#fff",trackColor:o="#000",className:i,style:c}=e,l=(t-n)/2,u=(0,r.useMemo)((()=>{const e=2*Math.PI*l;return`${a/100*e} ${e}`}),[l,a]);return r.createElement("div",{className:i,style:{width:`${t}px`,height:`${t}px`,display:"inline-flex",...c}},r.createElement("svg",{width:t,height:t,className:D().progress},r.createElement("circle",{cx:t/2,cy:t/2,r:l,stroke:o,strokeWidth:n,fill:"none",className:D().graphOuter}),r.createElement("circle",{cx:t/2,cy:t/2,r:l,stroke:s,strokeWidth:n,strokeLinecap:"round",fill:"none",transform:`matrix(0,-1,1,0,0,${t})`,strokeDasharray:u,className:D().graphInner})))};n(64979),n(21489),n(48140),n(75044),n(21903),n(91134),n(28845),n(373);const B=e=>e?.touches?.length?e.touches[0]:e,W=e=>{e?.touches?.length&&e.preventDefault()},O=e=>2*Math.PI/360*e,F=(e,t,n)=>({x:(e.x-t.x)*Math.cos(O(n))-(e.y-t.y)*Math.sin(O(n))+t.x,y:(e.x-t.x)*Math.sin(O(n))+(e.y-t.y)*Math.cos(O(n))+t.y}),H=(e,t)=>({x:e.x+(t.x-e.x)/2,y:e.y+(t.y-e.y)/2});var V=n(71042),$=n.n(V);const q=(0,r.memo)((0,r.forwardRef)((function(e,t){const{customizedTag:n,data:a,update:s,onFailStatusChange:o,idx:i,surfaceRefuseRiskIds:l,removeSurfaceRefuseRiskIds:d,setRegionActiveIdx:f,isV3:y}=e,{element:E,regionIdx:x,elementIdx:k}=a||{},{renderUrl:_="",require:w,userPlacementData:C,minWidth:S,minHeight:T,imageUrl:R}=E||{},A=w||!y,P=(0,r.useRef)(E),{maxSize:D}=P.current||{},[B,W]=(0,r.useState)(),{t:O}=(0,c.B)("bec-fe.web-sku-selector"),{t:F}=(0,c.B)("bec-fe.web-sku-selector",{keyPrefix:"Editor"}),[H,V]=(0,r.useState)(!1),[q,G]=(0,r.useState)(_),[j,K]=(0,r.useState)(0),Q=(0,r.useRef)(),[J,Y]=(0,r.useState)(N.c8.none),X=(0,r.useMemo)((()=>!!l?.some((e=>e.riskId===`${x}${k}`))),[l,x,k]);(0,r.useEffect)((()=>{Y(X?N.c8.risk:N.c8.none)}),[X]),(0,r.useEffect)((()=>{P.current=a.element}),[a]),(0,r.useEffect)((()=>{q&&!B&&(async()=>{try{const e=await(async()=>new Promise((e=>{const t=new Image;t.src=q,t.onload=()=>e(t),t.onerror=()=>e(t)})))(),{width:t,height:n}=e||{};W((e=>!e&&t&&n?{width:t,height:n}:e))}catch(e){}})()}),[q,B]),(0,r.useEffect)((()=>{C?.dimension&&W(C.dimension)}),[C]),(0,r.useImperativeHandle)(t,(()=>({checkDataValid:async()=>!q&&A?((0,p.A)("customizedUploadImgEmpty"),Y(N.c8.empty),!1):!H&&!J&&(!(A&&!R)||((0,p.A)("customizedUploadImgWaitUploaded"),!1))})));const Z=(0,u.A)((async e=>{V(!0),(0,p.A)("customizedUploadImgStart");const t=await new Promise(((e,t)=>{const n=document.createElement("input");n.type="file",n.accept="image/jpeg, image/png",n.style.display="none",document.body.appendChild(n),n.click(),n.addEventListener("change",(t=>{e(n.files),document.body.removeChild(n)})),n.addEventListener("cancel",(t=>{e(null),document.body.removeChild(n)}))}));if(!t)return void V(!1);const r=t?.[0]||[],o=new FileReader,{size:i}=r||{};o.readAsDataURL(r),o.onloadend=async e=>{await(async()=>{let{result:t}=e.target||{};t&&G(t);const o=await(e=>{const t=new Image;return new Promise(((n,r)=>{t.crossOrigin="anonymous",t.onload=()=>{n({width:t.width,height:t.height})},t.onerror=()=>{n(!1)},t.src=e}))})(t);if(!o)return(0,p.A)("customizedUploadImgInvalidType"),void Y(N.c8.invalidType);if(W(o),S&&T&&(o.width<S||o.height<T))Y(N.c8.invalidDimension);else{if(i>D)return(0,p.A)(`customizedUploadImgoversize:${i}`),void Y(N.c8.oversize);Y(N.c8.none);try{try{Q.current?.abort?.()}catch(e){}const{instance:e,upload:o}=(0,g.bv)(r,{tag:n,onProgress:e=>{K(e)}});Q.current=e,(0,p.A)("customizedUploading");const i=await o(),{url:c,imageInfo:l}=i||{},{width:u,height:d}=l||{};if(!c)return(0,p.A)("customizedUploadImgFail"),Y(N.c8.network),void m.A.error(O("networkError"));const f={...P.current,imageUrl:c,renderUrl:t,userPlacementData:{...P.current?.userPlacementData,dimension:{width:u,height:d}}},{element:h,...y}=a||{};s({...y,newElement:f}),Y(N.c8.none)}catch(e){const{errorCode:t}=e||{};34!==t?((0,p.A)("customizedUploadImgError"),Y(N.c8.network),m.A.error(O("networkError"))):(0,p.A)("customizedUploadImgManualAbort")}}})(),K(0),V(!1)},o.onerror=()=>{K(0),V(!1)}}));(0,r.useEffect)((()=>{if(J&&J!==N.c8.risk){const{element:e,...t}=a;s({...t,newElement:{...P.current,renderUrl:"",imageUrl:""}})}}),[J]),(0,r.useEffect)((()=>{o({failInfo:{failStatus:J,minWidth:S,minHeight:T,maxSize:D,regionIdx:x},idx:i})}),[J]),(0,r.useEffect)((()=>{G(_||"")}),[_]),(0,r.useEffect)((()=>{_&&f(x)}),[_]);const ee=()=>{(0,p.A)("customizedUploadImgClear");const{element:e,...t}=a;G(""),Q.current?.abort?.(),d({...t}),s({...t,newElement:{...P.current,renderUrl:"",imageUrl:"",userPlacementData:{}}}),K(0),V(!1),Y(N.c8.none)};return r.createElement("div",{className:$().wrap},r.createElement("div",{onClick:q?void 0:Z,className:h()($().operateArea,{[$().missingUrl]:J===N.c8.empty})},q?r.createElement("div",{className:$().preview},q?r.createElement("div",{style:{backgroundImage:(0,L.L)(q)},className:$().previewImg}):null,J?(()=>{const e={[N.c8.risk]:F("failed")},t={[N.c8.oversize]:F("tryAgain"),[N.c8.network]:F("tryAgain"),[N.c8.risk]:F("Replace"),[N.c8.invalidType]:F("Replace"),[N.c8.invalidDimension]:F("Replace")};return r.createElement("div",{className:$().failMask},r.createElement("div",{className:$().failMaskNotice},e?.[J]||F("uploadFail")),r.createElement(b.A,{className:$().failMaskBtn,type:v.el.border,innerCls:$().btnInner,onClick:Z},t[J]))})():null,!J&&H&&j>=0?r.createElement(r.Fragment,null,r.createElement("div",{className:$().failMask}),r.createElement(U,{size:28,className:$().progress,percent:j,trackColor:"rgba(255,255,255,0.6)"})):null,r.createElement("div",{className:$().previewClose,onClick:ee,role:"button",tabIndex:0},r.createElement(z.A,{className:$().closeIcon}))):r.createElement("div",null,r.createElement(I.Ay,{page_el_sn:227909},r.createElement("div",null,r.createElement("div",{className:$().uploadIcon},r.createElement(M.JM,null)),r.createElement("div",{className:$().uploadText},r.createElement("div",null,F("imageIdx",{val1:x+1})),A?null:r.createElement("div",{className:$().optional},F("optional")))))),q&&B?r.createElement("div",{className:h()($().imgDimension,{[$().imgDimensionInvalid]:J===N.c8.invalidDimension})},B.width,"x",B.height):null))})));var G=n(91684),j=n.n(G);const K=e=>Math.floor(e/1024/1024),Q=e=>{let{failStatus:t,alertMessage:n,maxSize:a,onHeightChange:s}=e;const{t:o}=(0,c.B)("bec-fe.web-sku-selector",{keyPrefix:"Editor"}),i=(0,r.useRef)(null);(0,r.useEffect)((()=>{if(i.current){const{height:e}=i.current?.getBoundingClientRect()||{};s(e)}}),[t]);const l=[N.c8.none,N.c8.network].includes(t)?T.WH.grayText:T.WH.redText;return r.createElement("div",{ref:i},t===N.c8.empty?r.createElement(T.Fc,{type:T.SK.text,status:T.WH.redText,message:o("uploadRequirement"),classConfig:{text:j().noticeText,textIcon:j().noticeTextIcon}}):r.createElement(T.Fc,{type:T.SK.text,status:l,classConfig:{text:j().noticeText,textIcon:j().noticeTextIcon},message:n||o("uploadInfo",{val:a})}))},J=(0,r.memo)((0,r.forwardRef)((function(e,t){const{editId:n,imgControlList:a,update:s,customizedTag:o,surfaceRefuseRiskIds:i,removeSurfaceRefuseRiskIds:l,surface:u,setRegionActiveIdx:m,isV3:d}=e,{t:p}=(0,c.B)("bec-fe.web-sku-selector",{keyPrefix:"Editor"}),[g,f]=(0,r.useState)(40),h=(0,r.useRef)({}),y=(0,r.useMemo)((()=>i?.filter((e=>[N.tz.mergeImg,N.tz.mergeImg].includes(e.previewType)))),[i]),E=(0,r.useCallback)((e=>{I((t=>{const{failInfo:n,idx:r}=e||{},{failStatus:a}=n||{},s=[...t];if(h.current[r]>-1){const e=s.findIndex((e=>e.idx===r));s.splice(e,1),h.current[r]=-1}return a&&(s.push({...n,idx:r}),h.current[r]=s.length-1),s}))}),[]),v=(0,r.useMemo)((()=>u?.regions?.map((e=>e.elements?.filter((e=>e.type===N.UM.image))?.map((e=>e.renderUrl))?.join(",")))),[u]);(0,r.useEffect)((()=>{E(A)}),[...v,n]),(0,r.useEffect)((()=>{1===y?.length&&"0"===y[0]?.riskId&&E(R)}),[y]);const[x,I]=(0,r.useState)([{failStatus:N.c8.none,maxSize:a?.[0]?.element?.maxSize}]),k=x[x.length-1],{failStatus:_,maxSize:b}=k||{},w=(0,r.useMemo)((()=>(e=>{const{failStatus:t,maxSize:n,minWidth:r,minHeight:a,regionIdx:s=0}=e||{},o=K(n);return t===N.c8.oversize?p("fileSizeRequirement",{val:o}):t===N.c8.invalidType?p("fileFormatRequirement",{val:o}):t===N.c8.risk?p("imgRiskRequirement"):t===N.c8.invalidDimension?p("imgDimensionInvalid",{val1:r,val2:a,var3:s+1}):t===N.c8.mergeImgRisk?p("mergeImgRiskRequirement"):void 0})(k)),[k]);return(0,r.useImperativeHandle)(t,(()=>({checkDataValid:async()=>{const e=await Promise.all(a.map((e=>{let{ref:t}=e;return t.current?.checkDataValid?.()})));return e.every(Boolean)&&!_}}))),r.createElement("div",{className:j().wrap},r.createElement("div",{className:j().title},p("image")),r.createElement("div",{className:j().imgs},a?.map(((e,t)=>r.createElement(q,{ref:a[t]?.ref,onFailStatusChange:E,surfaceRefuseRiskIds:i,removeSurfaceRefuseRiskIds:l,data:e,key:t,idx:t,isV3:d,update:s,setRegionActiveIdx:m,customizedTag:o})))),r.createElement("div",{className:j().noticeWrap,style:{height:g}},r.createElement(Q,{failStatus:_,alertMessage:w,maxSize:K(b),onHeightChange:f})))})));var Y=n(14825);n(25440);const X={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"};let Z=null;function ee(e){let{nodeStyleData:t,value:n,minRows:r,maxRows:a,className:s}=e;var o;Z||(Z=document.createElement("textarea"),Z.setAttribute("tabindex","-1"),Z.setAttribute("aria-hidden","true"),Z.setAttribute("class",s),o=Z,Object.keys(X).forEach((e=>{o.style.setProperty(e,X[e],"important")}))),null===Z.parentNode&&document.body.appendChild(Z);const{paddingSize:i,borderSize:c}=t;Z.value=n;let l=((e,t)=>e.scrollHeight+t.borderSize)(Z,t);Z.value="x";const u=Z.scrollHeight-i;let m=u*r;m=m+i+c,l=Math.max(m,l);let d=u*a;return d=d+i+c,l=Math.min(d,l),l}const te=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(new RegExp(["\ud83c[\udf00-\udfff]","\ud83d[\udc00-\ude4f]","\ud83d[\ude80-\udeff]"].join("|"),"g"),"")};var ne=n(98949),re=n.n(ne);const ae=(e,t)=>{const{minHeight:a=0,minRows:s=1,maxRows:o,maxLength:i=0,placeholder:c="",onInput:l,value:u="",onConfirm:m,beforeFocusCalibrate:d,isShow:p,autoFocus:g=!0,className:f,focusClassName:y}=e,E=(0,r.useRef)(null),[v,x]=(0,r.useState)(a),I=(0,r.useRef)(0),k=(0,r.useRef)(),[_,b]=(0,r.useState)(0),[w,C]=(0,r.useState)(!1),[S,N]=(0,r.useState)(g),T=(0,r.useRef)(u);(0,r.useImperativeHandle)(t,(()=>({updateTextareaFocus:()=>{E.current?.focus&&E.current.focus()}})));const R=async()=>{const e=E.current;if(!e)return;const t=(e=>{const t=window?.getComputedStyle(e);return t?{paddingSize:parseFloat(t.paddingBottom)+parseFloat(t.paddingTop),borderSize:parseFloat(t.borderBottomWidth)+parseFloat(t.borderTopWidth)}:null})(e);if(!t||w)return;const n=ee({nodeStyleData:t,value:e.value||c||"x",minRows:s,maxRows:o,className:re().textarea});I.current!==n&&(I.current=n,x(n));const r=k.current,a=r?e.value?.replace(r,"").slice(0,i):te(e.value).slice(0,i),u=a.trim();e.value=a,b(a.length),l?.(u),T.current=u},A=(0,r.useCallback)((()=>{C(!0)}),[w]),z=(0,r.useCallback)((()=>{C(!1)}),[w]);return(0,r.useEffect)((()=>{const e=E.current;e&&u&&(e.value=u)}),[p]),(0,r.useEffect)((()=>{w||R()}),[w]),(0,r.useEffect)((()=>{n.e(6119).then(n.bind(n,30744)).then((e=>{let{emojiRegExp:t}=e;k.current=t}))}),[]),p?r.createElement("div",{className:h()(re().wrap,f,S?y:"")},r.createElement("textarea",{className:re().textarea,ref:E,style:{height:v},onChange:R,onFocus:async()=>{("function"!=typeof d||await d())&&E.current?.focus&&E.current.focus(),N(!0)},onBlur:()=>{setTimeout((()=>{T.current&&m?.(T.current)}),300),N(!0)},maxLength:i,onCompositionStart:A,onCompositionEnd:z,placeholder:c,autoFocus:g}),i?r.createElement("div",{className:re().count},r.createElement("span",{className:h()(_>0&&re().textLength)},_)," / ",i):null):null};var se=(0,r.forwardRef)(ae),oe=n(79746),ie=n.n(oe);const ce=e=>{let{activeColor:t,onColorItemClick:n,textColorList:a,idx:s}=e;const{t:o}=(0,c.B)("bec-fe.web-sku-selector",{keyPrefix:"Editor"});return r.createElement("div",{className:ie().wrap},r.createElement("div",{className:ie().title},o("colorIdx",{val1:s+1})),r.createElement("div",{className:ie().list},a?.map(((e,a)=>{const{red:s,green:o,blue:i}=e||{},{red:c,green:l,blue:u}=t||{},m=`rgb(${s},${o},${i})`,d=s===c&&o===l&&i===u;return r.createElement("div",{className:h()(ie().item,{[ie().itemActive]:d}),key:a},r.createElement("div",{className:ie().color,style:{background:m,color:m},onClick:()=>n(e)}))}))))};var le=(0,r.memo)(ce),ue=n(45030),me=n.n(ue);const de=(0,r.memo)((0,r.forwardRef)(((e,t)=>{const{data:n,update:a,surfaceRefuseRiskIds:s,removeSurfaceRefuseRiskIds:o,setRegionActiveIdx:i,isV3:l}=e,{element:u,textColorList:m,color:d,...g}=n||{},{regionIdx:f,elementIdx:h}=g||{},{lengthLimit:y,require:E,text:v}=u||{},{t:x}=(0,c.B)("bec-fe.web-sku-selector",{keyPrefix:"Editor"}),[k,_]=(0,r.useState)(v),[b,w]=(0,r.useState)(N.c8.none),C=(0,r.useRef)(!1),S=!l||E,T=(0,r.useMemo)((()=>!!s?.some((e=>e.riskId===`${f}${h}`))),[s,f,h]);(0,r.useEffect)((()=>{w(T?N.c8.risk:N.c8.none)}),[T]);const R=(0,r.useCallback)((e=>{_(e);const t={...u,text:e};a({...g,newElement:t}),i(f),e&&b&&(w(N.c8.none),o({...g}))}),[u,g,b,a]);(0,r.useImperativeHandle)(t,(()=>({checkDataValid:async()=>!k&&S?((0,p.A)("customizedUploadTextEmpty"),w(N.c8.empty),!1):!b})));const A={[N.c8.empty]:x("textRequirement"),[N.c8.risk]:x("textRiskRequirement")},z=(0,r.useCallback)((e=>{a({...g,newElement:{color:e}})}),[a,g]),[L,M]=(0,r.useState)(0);return r.createElement("div",{className:me().wrap},r.createElement("div",{className:me().title},S?r.createElement("span",{className:me().star},"*"):null,r.createElement("span",null,l?x("textIdx",{val1:f+1}):x("text"))),r.createElement(I.Ay,{page_el_sn:227910,useClick:!1},r.createElement("div",{className:me().operateArea,onClick:()=>{C.current||(C.current=!0,(0,Y.r_)({op:"click",page_el_sn:227910}))}},r.createElement(se,{placeholder:x("enterText"),minRows:2,className:b?me().error:me().textInputWarp,minHeight:38,maxRows:4,maxLength:y,focusClassName:me().focusClassName,isShow:!0,value:k,autoFocus:!1,autoShowCharCount:!0,onInput:R}))),r.createElement("div",{className:me().notice,style:{height:L}},r.createElement(pe,{failStatus:b,alertStatusTextMap:A,onHeightChange:M})),m?.length?r.createElement(le,{textColorList:m,onColorItemClick:z,activeColor:d,idx:f}):null)}))),pe=e=>{let{failStatus:t,alertStatusTextMap:n,onHeightChange:a}=e;const s=(0,r.useRef)(null);return(0,r.useEffect)((()=>{if(s.current){const{height:e}=s.current?.getBoundingClientRect()||{};a?.(e)}}),[t]),r.createElement("div",{ref:s},t?r.createElement(T.Fc,{type:T.SK.text,status:T.WH.redText,message:n[t],classConfig:{text:me().noticeText,textIcon:me().noticeTextIcon}}):null)},ge=(0,r.memo)((0,r.forwardRef)(((e,t)=>{const{textControlList:n,update:a,goodsId:s,surfaceRefuseRiskIds:o,removeSurfaceRefuseRiskIds:i,setRegionActiveIdx:c,isV3:l}=e;return(0,r.useImperativeHandle)(t,(()=>({checkDataValid:async()=>{const e=await Promise.all(n.map((e=>{let{ref:t}=e;return t.current?.checkDataValid?.()})));return e.every(Boolean)}}))),n?.length?n.map(((e,t)=>r.createElement(de,{surfaceRefuseRiskIds:o,ref:n[t]?.ref,goodsId:s,data:e,isV3:l,setRegionActiveIdx:c,removeSurfaceRefuseRiskIds:i,key:t,update:a}))):null}))),fe=(0,r.memo)((0,r.forwardRef)(((e,t)=>{const{goodsId:n,customizedTag:a,update:s,surface:o,surfaceIdx:i,setRegionActiveIdx:c,surfaceRefuseRiskIds:l,removeSurfaceRefuseRiskIds:u,editId:m,isV3:d}=e,p=(0,r.useRef)(),g=(0,r.useRef)(),{imgControlList:f,textControlList:h}=(0,r.useMemo)((()=>{const e=[],t=[];return o?.regions?.forEach(((n,a)=>{const{elements:s,textColorList:o}=n||{};s?.forEach(((n,s)=>{const{type:c}=n||{};if(c!==N.UM.image){if(c===N.UM.text){const{color:e}=n||{};t.push({surfaceIdx:i,regionIdx:a,elementIdx:s,element:n,ref:(0,r.createRef)(),textColorList:o,color:e||o?.[0]})}}else e.push({surfaceIdx:i,regionIdx:a,elementIdx:s,element:n,ref:(0,r.createRef)()})}))})),{imgControlList:e,textControlList:t}}),[o]);return(0,r.useImperativeHandle)(t,(()=>({checkDataValid:async()=>{const e=[];p.current&&e.push(p),g.current&&e.push(g);return(await Promise.all(e.map((e=>e.current?.checkDataValid())))).every(Boolean)}}))),r.createElement("div",null,f?.length?r.createElement(J,{ref:p,update:s,editId:m,surface:o,setRegionActiveIdx:c,surfaceRefuseRiskIds:l,customizedTag:a,removeSurfaceRefuseRiskIds:u,imgControlList:f,isV3:d}):null,h?.length?r.createElement(ge,{textControlList:h,ref:g,isV3:d,goodsId:n,setRegionActiveIdx:c,removeSurfaceRefuseRiskIds:u,surfaceRefuseRiskIds:l,update:s}):null)})));var he=n(14511),ye=n(80179),Ee=n(82370),ve=n(22703),xe=n.n(ve),Ie=function(e){return e.move="move",e.rotate="rotate",e.bottomLeft="bottom-left",e.bottomRight="bottom-right",e.topLeft="top-left",e.topRight="top-right",e}(Ie||{});const ke=(e,t)=>{[].concat(e).forEach((e=>{Object.entries(t||{}).forEach((t=>{let[n,r]=t;e.style[n]=r}))}))},_e=e=>{const{topLeftRef:t,topRightRef:n,bottomLeftRef:a,bottomRightRef:s,resizerRef:o,wrapRef:i,onMoving:c,onScaling:l,onRotating:u,rotateRef:m,enableMove:d,enableScale:p,enableRotate:g,onEnd:f}=e,h=(0,r.useRef)({}),y=(0,r.useRef)({}),E=(0,r.useRef)(!1),v=(0,r.useRef)(),x=(0,r.useRef)(),I=(0,r.useRef)({x:0,y:0}),k=(0,r.useRef)(),_=(e,t)=>{const n={x:t.x,y:t.y,width:t.width,height:t.height,rotate:t.rotate},r={x:n.x+n.width/2,y:n.y+n.height/2},a=((e,t,n)=>{let r;switch(n){case"top-left":default:return r={x:e.x,y:e.y},F(r,t,e.rotate);case"top-right":return r={x:e.x+e.width,y:e.y},F(r,t,e.rotate);case"bottom-left":return r={x:e.x,y:e.y+e.height},F(r,t,e.rotate);case"bottom-right":return r={x:e.x+e.width,y:e.y+e.height},F(r,t,e.rotate)}})(n,r,e);return{rect:n,center:r,handlePoint:a,sPoint:{x:r.x+Math.abs(a.x-r.x)*(a.x<r.x?1:-1),y:r.y+Math.abs(a.y-r.y)*(a.y<r.y?1:-1)},ratio:n.width/n.height}},b=(0,r.useMemo)((()=>{const e=[];return d&&e.push({ref:o,action:Ie.move}),p&&e.push({ref:a,action:Ie.bottomLeft},{ref:s,action:Ie.bottomRight},{ref:t,action:Ie.topLeft},{ref:n,action:Ie.topRight}),g&&e.push({ref:m,action:Ie.rotate}),e}),[d,p,g,a,s,t,n,m,o]);(0,r.useEffect)((()=>{if(!o.current)return;const e={[Ie.bottomLeft]:l,[Ie.bottomRight]:l,[Ie.topLeft]:l,[Ie.topRight]:l,[Ie.move]:c,[Ie.rotate]:u},t=t=>{if(!E.current)return;const n=v.current;W(t),t.stopPropagation(),t=B(t);const r=((e,t,n,r,a)=>{const{left:s,top:o}=i.current.getBoundingClientRect()||{},c={...t.current},{x:l,y:u}=x.current||{},{x:m,y:d}=a.current||{},{clientX:p,clientY:g}=n,f=p-s-m,h=g-o-d,y=f-l,E=h-u;switch(e){case Ie.move:c.top=t.current.y+E,c.left=t.current.x+y;break;case Ie.topRight:{const e={x:f,y:h},{sPoint:n,rect:a,ratio:s}=r.current;let o=H(e,n),i=F(e,o,-a.rotate),l=F(n,o,-a.rotate),u=i.x-l.x,m=l.y-i.y;u/m>s?(i.y-=Math.abs(m-u/s),m=u/s):(i.x+=Math.abs(u-m*s),u=m*s);const d=F(i,o,a.rotate);if(o=H(d,n),i=F(d,o,-a.rotate),l=F(n,o,-a.rotate),u=i.x-l.x,m=l.y-i.y,5>u||5/s>m)return;c.left=l.x,c.top=i.y,c.height=m,c.width=u,Object.assign(t.current,{x:l.x,y:i.y,height:m,width:u});break}case Ie.topLeft:{const{sPoint:e,rect:n,ratio:a}=r.current,s={x:f,y:h};let o=H(s,e),i=F(s,o,-n.rotate),l=F(e,o,-n.rotate),u=l.x-i.x,m=l.y-i.y;u/m>a?(i.x+=Math.abs(u-m*a),u=m*a):(i.y+=Math.abs(m-u/a),m=u/a);const d=F(i,o,n.rotate);if(o=H(d,e),i=F(d,o,-n.rotate),l=F(e,o,-n.rotate),u=l.x-i.x,m=l.y-i.y,5>u||5/a>m)return;c.left=i.x,c.top=i.y,c.height=m,c.width=u,Object.assign(t.current,{x:i.x,y:i.y,height:m,width:u});break}case Ie.bottomRight:{const{sPoint:e,rect:n,ratio:a}=r.current,s={x:f,y:h};let o=H(s,e),i=F(e,o,-n.rotate),l=F(s,o,-n.rotate),u=l.x-i.x,m=l.y-i.y;u/m>a?(l.y+=Math.abs(m-u/a),m=u/a):(l.x+=Math.abs(u-m*a),u=m*a);const d=F(l,o,n.rotate);if(o=H(d,e),l=F(d,o,-n.rotate),i=F(e,o,-n.rotate),u=l.x-i.x,m=l.y-i.y,5>u||5/a>m)return;c.left=i.x,c.top=i.y,c.height=m,c.width=u,Object.assign(t.current,{x:i.x,y:i.y,height:m,width:u});break}case Ie.bottomLeft:{const{sPoint:e,rect:n,ratio:a}=r.current,s={x:f,y:h};let o=H(s,e),i=F(e,o,-n.rotate),l=F(s,o,-n.rotate),u=i.x-l.x,m=l.y-i.y;u/m>a?(l.y+=Math.abs(m-u/a),m=u/a):(l.x-=Math.abs(u-m*a),u=m*a);const d=F(l,o,n.rotate);if(o=H(d,e),l=F(d,o,-n.rotate),i=F(e,o,-n.rotate),u=i.x-l.x,m=l.y-i.y,5>u||5/a>m)return;c.left=l.x,c.top=i.y,c.height=m,c.width=u,Object.assign(t.current,{x:l.x,y:i.y,height:m,width:u});break}case Ie.rotate:{const e={x:f,y:h},{center:n}=r.current||{},{x:a,y:s}=n,o=Math.abs(e.x-a),i=Math.abs(e.y-s),l=Math.sqrt(o*o+i*i);let u=Math.round(Math.asin(i/l)/Math.PI*180);e.x>=a&&e.y<=s?u=90-u:e.x<=a&&e.y<=s?u=270+u:e.x<=a&&e.y>=s?u=270-u:e.x>=a&&e.y>=s&&(u=90+u),u=360===u?0:parseInt(u),c.rotate=u,c.top=t.current.y,c.left=t.current.x,t.current.rotate=u;break}}return c})(n,y,t,k,I)||{},{top:a,left:s,width:c,height:l,rotate:u}=r,m=e[n];m?.(r);const d={width:`${c}px`,height:`${l}px`,left:0,top:0,transform:`translate(${s}px,${a}px) rotate(${u}deg)`};h.current=r,o.current.dataset.width=c,o.current.dataset.height=l,o.current.dataset.left=s,o.current.dataset.top=a,o.current.dataset.rotate=u,ke(o.current,d)},n=e=>{if(!E.current)return;W(e),e.stopPropagation();const t=v.current;E.current=!1,Ie.move===t&&(y.current.x=h.current.left,y.current.y=h.current.top),f?.(h.current)},r=b.map((e=>{const{ref:t,action:n}=e,r=t?.current;if(!r)return;const a=e=>{E.current=!0,v.current=n,W(e),e.stopPropagation(),e=B(e);const{clientX:t,clientY:r}=e||{},{left:a,top:s}=i.current.getBoundingClientRect()||{},c=t-a,l=r-s;x.current={x:c,y:l};const{top:u,left:d,width:p,height:g}=o.current?.getBoundingClientRect()||{},f=u-s,h=d-a,{top:b,left:w}=m?.current?.getBoundingClientRect()||{},C=b-s,S=w-a,{dataset:N}=o.current||{},{rotate:T,left:R,top:A,width:z,height:L}=N||{},M=[Ie.bottomLeft,Ie.bottomRight,Ie.topLeft,Ie.topRight].includes(n),P=n===Ie.rotate;y.current.x=y.current.x||Number(R)||h,y.current.y=y.current.y||Number(A)||f,y.current.height=y.current.height||Number(L)||g,y.current.width=y.current.width||Number(z)||p,y.current.prevHeight=y.current.height||Number(L)||g,y.current.prevWidth=y.current.width||Number(z)||p,y.current.rotate=y.current.rotate||Number(T)||0,k.current=_(n,y.current)||{},I.current=M?{x:M?c-k.current?.handlePoint.x:0,y:M?l-k.current?.handlePoint.y:0}:P?{x:c-(S+be/2),y:l-(C+we/2)}:{x:0,y:0}};return r.addEventListener("touchstart",a,{passive:!1}),r.addEventListener("mousedown",a),()=>{r.removeEventListener("mousedown",a),r.removeEventListener("touchstart",a)}}));return window.addEventListener("touchmove",t,{passive:!1}),window.addEventListener("mousemove",t),window.addEventListener("touchend",n,{passive:!1}),window.addEventListener("mouseup",n),()=>{window.removeEventListener("mousemove",t),window.removeEventListener("touchmove",t),window.removeEventListener("mouseup",n),window.removeEventListener("touchend",n),r?.forEach((e=>e?.()))}}),[o.current,t.current,n.current,a.current,s.current,m?.current,b,c,u,l,f]);return{reset:()=>{I.current={x:0,y:0},x.current=void 0,y.current={},h.current={},k.current={},E.current=!1}}},be=13,we=13,Ce=(0,he.W4)({name:"EditorResizerWrap"})((e=>{const{children:t,resizerRef:n,topLeftRef:a,topRightRef:s,bottomLeftRef:o,bottomRightRef:i,wrapRef:c,initStyle:l,onMoving:u,onScaling:m,onRotating:d,onClick:p,dragEleRef:g,enableMove:f,enableScale:y,enableRotate:E,onEnd:v,resetDeps:x=[]}=e,{reset:I}=_e({resizerRef:n,bottomLeftRef:o,bottomRightRef:i,topLeftRef:a,topRightRef:s,wrapRef:c,rotateRef:g,onMoving:u,onScaling:m,onRotating:d,enableMove:f,enableScale:y,enableRotate:E,onEnd:v});return(0,r.useEffect)((()=>{I()}),[...x]),r.createElement("div",{className:h()(xe().resizer,xe().pointerEnhance),ref:n,style:l,onMouseDown:p,onTouchStart:p},t,E?r.createElement("div",{className:xe().dragPointer,ref:g,style:{width:be,height:we}},r.createElement(Ee.Ay,{className:xe().rotateIcon,alt:"",src:"https://aimg.kwcdn.com/upload_aimg/web/fb608889-ef9d-48e7-a42c-f4cbf0a3b0ef.png.slim.png"})):null,y?r.createElement(r.Fragment,null,r.createElement("div",{ref:a,className:h()(xe().topLeft,xe().pointer)}),r.createElement("div",{ref:s,className:h()(xe().topRight,xe().pointer)}),r.createElement("div",{ref:o,className:h()(xe().bottomLeft,xe().pointer)}),r.createElement("div",{ref:i,className:h()(xe().bottomRight,xe().pointer)})):null)}));var Se=n(18906),Ne=n.n(Se);const Te=e=>{let{element:t,regionInfo:n,regionOriginInfo:a,scaleRatio:s,regionRefList:o,regionIdx:i,setRegionRefList:c,showRegionActive:l,elementIdx:u}=e;const{imageUrl:m,userPlacementData:d,renderUrl:p}=t||{},{regionWidth:g,regionLeft:f,regionHeight:h,regionTop:y}=n||{},{regionOriginWidth:E,regionOriginLeft:v,regionOriginHeight:x,regionOriginTop:I}=a||{},k=(0,r.useRef)(),_=(0,r.useMemo)((()=>{const{dimension:e,position:t,angleOfRotation:n=0,scale:r}=d||{},{scaleX:a=1,scaleY:o=1}=r||{},{width:i=0,height:c=0}=e||{},l=!t?.x&&!t?.y,{x:u=0,y:m=0}=t||{},p=i>=c,v=(p?E:x)/(p?i:c);if(l){const e=v*s*i,t=v*s*c,r=(g-e)/2,a=(h-t)/2;return{width:e,height:t,left:0,top:0,transform:`translate(${r}px, ${a}px) rotate(${n}deg)`,datasetLeft:r+f,datasetTop:a+y}}return{width:i*a*s,height:c*o*s,left:0,top:0,transform:`translate(${u*s-f}px, ${m*s-y}px) rotate(${n}deg)`,datasetLeft:u*s,datasetTop:m*s}}),[p]);return(0,r.useEffect)((()=>{c((e=>{const t=[...e];return t[i]=k,t}))}),[m,p,k.current,i]),m&&p?r.createElement("div",{onClick:()=>{l()},role:"button",tabIndex:0,className:Ne().imgWrap,style:{width:g,height:h,top:y,left:f}},r.createElement("img",{alt:"",ref:k,"data-regionidx":i,"data-elementidx":u,"data-width":_?.width,"data-left":_?.datasetLeft,"data-top":_?.datasetTop,"data-height":_?.height,"data-rotate":d?.angleOfRotation,src:p,className:Ne().uploadImg,style:_})):null};var Re=n(5676),Ae=n.n(Re);const ze=e=>{let{element:t,regionInfo:n,regionOriginInfo:a,scaleRatio:s,color:o,regionRefList:i,regionIdx:l,showRegionActive:u,setRegionRefList:m,elementIdx:d}=e;const{text:p,userPlacementData:g,textAlign:f=1}=t||{},{t:h}=(0,c.B)("bec-fe.web-sku-selector",{keyPrefix:"Editor"}),y=(0,r.useRef)(null);(0,r.useEffect)((()=>{m((e=>{const t=[...e];return t[l]=y,t}))}),[p,y.current,l]);const E=Number(h("defaultFontSize"))||12,{regionWidth:v,regionLeft:x,regionHeight:I,regionTop:k}=n||{},_=(0,r.useMemo)((()=>{const{fontSize:e=E,position:t}=g||{},{x:n=0,y:r=0}=t||{},a=!t,{red:i=0,green:c=0,blue:l=0}=o||{};if(a){const t=f===N.Rx.left?0:f===N.Rx.right?v-e:f===N.Rx.center?(v-e)/2:0;return{fontSize:e,color:`rgb(${i}, ${c}, ${l})`,top:(I-e)/2,left:t,datasetLeft:t+x,datasetTop:(I-e)/2+k}}return{fontSize:e*s,color:`rgb(${i}, ${c}, ${l})`,top:r*s-k,left:n*s-x,datasetLeft:n*s,datasetTop:r*s}}),[n]);if(!p)return null;const{red:b=0,green:w=0,blue:C=0}=o||{},S=`rgb(${b}, ${w}, ${C})`;return r.createElement("div",{onClick:()=>{u()},className:Ae().textWrap,role:"button",tabIndex:0,style:{width:v,height:I,top:k,left:x}},r.createElement("div",{ref:y,className:Ae().uploadText,style:{..._,color:S},"data-elementidx":d,"data-latestfontsize":_?.fontSize,"data-height":_?.fontSize,"data-prevfontsize":_?.fontSize,"data-left":_?.datasetLeft,"data-top":_?.datasetTop},p))};var Le=n(18298),Me=n.n(Le);const Pe=e=>{let{region:t,scaleRatio:n,regionRefList:a,regionIdx:s,setRegionRefList:o,setRegionActiveIdx:i,templateType:l}=e;const{elements:u,dimension:m,position:d,textColorList:p}=t||{},{width:g,height:f}=m||{},{x:h,y:y}=d||{},{t:E}=(0,c.B)("bec-fe.web-sku-selector",{keyPrefix:"Editor"}),v=(0,r.useMemo)((()=>({regionWidth:g*n,regionHeight:f*n,regionLeft:h*n,regionTop:y*n})),[g,f,h,y,n]),x=(0,r.useMemo)((()=>({regionOriginHeight:f,regionOriginWidth:g,regionOriginLeft:h,regionOriginTop:y})),[f,h,y,g]),I=(0,r.useMemo)((()=>{const{regionWidth:e,regionHeight:t,regionLeft:n,regionTop:r}=v;return{width:e,height:t,left:n,top:r}}),[v]),k=(0,r.useCallback)((()=>{i(s)}),[s,i]);return g&&f?r.createElement(r.Fragment,null,r.createElement("div",{className:Me().region,style:{...I}},r.createElement("div",{className:Me().idxTag},s+1),a?.length>1?null:r.createElement("div",{className:Me().overflowNotice},r.createElement("div",{className:Me().overflowNoticeText},E("overflowNotice")))),u?.map(((e,t)=>{const{type:i}=e||{};if(i===N.UM.image)return r.createElement(Te,{key:t,elementIdx:t,regionRefList:a,setRegionRefList:o,regionIdx:s,element:e,showRegionActive:k,scaleRatio:n,regionInfo:v,regionOriginInfo:x});if(i===N.UM.text&&l===N.YQ.both){const{color:i}=e||{};return r.createElement(ze,{key:t,elementIdx:t,color:i||p?.[0],regionRefList:a,setRegionRefList:o,regionIdx:s,scaleRatio:n,showRegionActive:k,element:e,regionInfo:v,regionOriginInfo:x})}}))):null};var De=n(60725),Ue=n.n(De);const Be=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"generatePreviewLoadImgError:";return Promise.all(e.map((e=>{let{url:n,useCredentials:r}=e;return new Promise(((e,a)=>{if(!n)return e(null);const s=new Image;s.crossOrigin=r?"use-credentials":"anonymous",s.src=n,s.onload=()=>e(s),s.onerror=()=>{(0,p.A)(`${t}${r}`),e(null)}}))})))},We=e=>{const{width:t,height:n}=e||{};return t&&n?t>=n?{width:"100%",height:"auto"}:{height:"100%",width:"auto"}:null},Oe=(e,t)=>{const{t:n}=(0,c.B)("bec-fe.web-sku-selector",{keyPrefix:"Editor"}),{t:a}=(0,c.B)("bec-fe.web-sku-selector"),{setEditId:s,baseImage:o,maskImage:i,customizedTag:l,regions:u,regionActiveIdx:d,setRegionActiveIdx:f,surface:y,templateType:E,isV3:v,onClose:x}=e,{imageUrl:I,dimension:k}=o||{},{imageUrl:_,dimension:b}=i||{},{width:w,height:C}=k||{},S=380/Math.max(w,C),T=(0,r.useMemo)((()=>We(k)),[k]),R=(0,r.useMemo)((()=>We(b)),[b]),A=Number(n("defaultFontSize"))||12,z=(0,r.useRef)(),L=(0,r.useRef)(),M=(0,r.useRef)(),P=(0,r.useRef)(),D=(0,r.useRef)(),U=(0,r.useRef)(),B=(0,r.useRef)(),W=(0,r.useRef)(),O=(0,r.useRef)(),{width:F,height:H,left:V=0,top:$=0}=O.current?.getBoundingClientRect()||{},q=u?.[d],{type:G}=q?.elements?.[0]||{},j=(0,r.useMemo)((()=>u?.some((e=>{const{width:t,height:n}=e?.dimension||{};return t&&n}))),[u]),[K,Q]=(0,r.useState)(!0),[J,Y]=(0,r.useState)(new Array(u?.length||0).fill(void 0)),X=J[d],[Z,ee]=(0,r.useState)();(0,r.useEffect)((()=>{U.current&&ke([U.current],(()=>{if(!X?.current)return null;const{width:e,height:t,left:n,top:r}=X.current?.getBoundingClientRect()||{},{left:a=0,top:s=0}=O.current?.getBoundingClientRect()||{},o=n-a,i=r-s,{dataset:c}=X.current,{elementidx:l=0,width:u,height:m,left:d,top:p,rotate:g,latestfontsize:f}=c||{},{elements:h}=q,{userPlacementData:y,type:E}=h?.[l]||{},v=(N.UM.image,E===N.UM.text),{position:x,dimension:I,scale:k,angleOfRotation:_=0,fontSize:b=A}=y||{},{width:w=0,height:C=0}=I||{},{x:T=0,y:R=0}=x||{},{scaleX:z=1,scaleY:L=1}=k||{},M=e/t,P=Math.min(e,t);U.current&&(U.current.dataset.rotate=`${_}`);const D=void 0!==g?Number(g):_,B=v?e:void 0!==u?Number(u):e,W=v?t:void 0!==m?Number(m):t,F=void 0!==d?Number(d):o,H=void 0!==p?Number(p):i,V=void 0!==f?Number(f):b*S;return U.current&&(U.current.dataset.left=d||""+T*S,U.current.dataset.top=p||""+R*S,U.current.dataset.width=B||""+w*z,U.current.dataset.height=W||""+C*L,U.current.dataset.rotate=`${D}`,v&&(U.current.dataset.latestfontsize=`${V}`,U.current.dataset.prevfontsize=`${V}`)),!x&&2>=P?{left:0,top:0,width:(M<1?2:e)-2+"px",height:(M<1?t:2)-2+"px",transform:`translate(${o}px,${i}px) rotate(${_}deg)`}:{left:0,top:0,width:`${B}px `,height:`${W}px`,transform:`translate(${F}px,${H}px) rotate(${D}deg)`,fontSize:V}})())}),[X?.current,q,d]),(0,r.useImperativeHandle)(t,(()=>({generatePreviewImg:async()=>{const e=O.current;if(!e||!u.find((e=>e?.dimension?.width&&e?.dimension?.height)))return;(0,p.A)("generatePreivewImg start");const{left:t,top:n}=e.getBoundingClientRect()||{};(0,p.A)("generatePreivewImg before collectData2Submit");const r=(e=>{const{regions:r}=e||{},a=r.map(((e,r)=>{const{dimension:a,elements:s}=e||{},o=J[r]?.current;if(!o||!a?.width||!a.height)return e;const{dataset:i}=o,{latestfontsize:c,rotate:l,elementidx:u,width:m,left:d,top:p}=i||{},{width:g,height:f,top:h,left:y}=o.getBoundingClientRect()||{},E=h-n,v=y-t,x=s.map(((e,t)=>{if(t!==Number(u))return e;const{userPlacementData:n,type:r}=e||{},{dimension:a}=n||{},s=r===N.UM.image,o=r===N.UM.text,i=Number(m)||g,f=a?.width?Number(i)/S/a.width:void 0,h=void 0!==d?Number(d):v,y=void 0!==p?Number(p):E,x={position:{x:h/S,y:y/S}};return a?.width&&(x.dimension=a),void 0!==l&&s&&(x.angleOfRotation=Number(l)),void 0!==f&&(x.scale={scaleX:f,scaleY:f}),void 0!==c&&o&&(x.fontSize=Number(c)/S),e.userPlacementData=x,e}));return{...e,elements:x}}));return{...e,regions:a}})(y),{baseImage:s,maskImage:o}=y||{},{imageUrl:i,dimension:c}=s||{},{imageUrl:d,dimension:f}=o||{},h=document.createElement("canvas");h.width=w,h.height=C;const E=h.getContext("2d");(0,p.A)("generatePreivewImg before regions2Canvas");const I=await(async e=>{const{regions:t,baseImage:n}=e||{},{imageUrl:r,dimension:s}=n||{},{width:o,height:i}=s||{},c=await Promise.all(t.map((async(e,t)=>{const{dimension:n,position:r,elements:s,textColorList:o}=e||{},{width:i,height:c}=n||{},{x:l,y:u}=r||{},d=J?.[t]?.current,{dataset:g}=d||{},{elementidx:f}=g||{},{color:h=o?.[0]}=s?.[f]||{};if(i&&c&&d){const{userPlacementData:e,type:n,renderUrl:r,text:o}=s?.[f]||{},{width:g,height:y}=d?.getBoundingClientRect?.()||{},E=n===N.UM.image,I=n===N.UM.text,k=document.createElement("canvas"),_=k.getContext("2d");if(k.width=i,k.height=c,E&&_){const{x:n=0,y:s=0}=e?.position||{},{scaleX:o=1,scaleY:d=1}=e?.scale||{},{width:f=0,height:h=0}=e?.dimension||{},[E]=await Be([{url:r,useCredentials:!0}],"uploadImgLoadError"),v=f*o||g/S,I=h*d||y/S,{canvas:b,gapX:w,gapY:C,width:N,height:T}=(e=>{let{width:t,height:n,angle:r,image:a}=e;const s=document.createElement("canvas"),o=s.getContext("2d");let i=0,c=0;const l=r*Math.PI/180,u=Math.sin(l),m=Math.cos(l);let d=Math.abs(t*m)+Math.abs(n*u),g=Math.abs(t*u)+Math.abs(n*m);return 90!==r&&270!==r||(d=n,g=t),d>0&&g>0&&a||(0,p.A)("generateImgCanvasInvalid",{fields:{data:JSON.stringify({width:t,height:n,angle:r,newWidth:d,newHeight:g})}}),i=(d-t)/2,c=(g-n)/2,s.width=d,s.height=g,o?.translate(d/2,g/2),o?.rotate(r*Math.PI/180),o?.drawImage(a,-t/2,-n/2,t,n),{canvas:s,width:d,height:g,gapX:i,gapY:c}})({width:v,height:I,angle:Number(e?.angleOfRotation)||0,image:E});try{_.drawImage(b,-l+n-w,-u+s-C,N,T)}catch(n){x?.(),m.A.error(a("networkError")),(0,p.A)("generateImgCanvas error",{fields:{data:JSON.stringify({newImgWidth:N,newImgHeight:T,imgWidth:v,imgHeight:I,regionIdx:t,scaleX:o,scaleY:d,uploadImgWidth:f,uploadImgHeight:h,scale:e?.scale,position:e?.position})}})}return{canvas:k,width:i,height:c,x:l,y:u}}if(I&&_&&v){const{x:n=0,y:r=0}=e?.position||{},{red:s,green:d,blue:g}=h||{},{fontSize:f}=e||{};_.font=`normal 400 ${f}px serif`;const y=`rgb(${s}, ${d}, ${g})`,E="http://www.w3.org/2000/svg",v=document.createElementNS(E,"svg"),I=document.createElementNS(E,"foreignObject");v.setAttributeNS(null,"width",i.toString()),v.setAttributeNS(null,"height",c.toString()),I.setAttributeNS(null,"width","100%"),I.setAttributeNS(null,"height","100%"),I.setAttributeNS(null,"x",(n-l).toString()),I.setAttributeNS(null,"y",(r-u).toString()),I.setAttributeNS(null,"externalResourcesRequired","true"),v.appendChild(I);const b=document.createElement("p"),w=o?.split("\n");w.forEach(((e,t)=>{if(t>=1){const e=document.createElement("br");b.appendChild(e)}const n=document.createTextNode(e);b.appendChild(n)})),b.style.margin="0",b.style.fontWeight="400",b.style.fontFamily="serif",b.style.fontSize=`${f}px`,b.style.lineHeight=`${f}px`,b.style.whiteSpace="pre",b.style.color=y,I.appendChild(b);const C=`data:image/svg+xml;charset=utf-8,${encodeURIComponent((new XMLSerializer).serializeToString(v))}`,[S]=await Be([{url:C}],"textImgLoadError");try{_.drawImage(S,0,0,i,c)}catch(e){x?.(),m.A.error(a("networkError")),(0,p.A)("generateTextSvgCanvas error",{fields:{data:JSON.stringify({regionWidth:i,regionHeight:c,regionIdx:t,fontSize:f})}})}return{canvas:k,width:i,height:c,x:l,y:u}}}})));return c})(r);if(E){const[e,t]=await Be([{url:i},{url:d}],"baseOrMaskImgLoadError");if(d&&!t||i&&!e)return x?.(),void m.A.error(a("networkError"));E.drawImage(e,0,0,w,C),(0,p.A)(`generatePreivewImg before drawImageList len:${I?.length}, type:${typeof I}`),I.forEach(((e,t)=>{const{canvas:n,x:r=0,y:s=0,width:o=0,height:i=0}=e||{};if(n)try{E.drawImage(n,r,s,o,i)}catch(e){x?.(),m.A.error(a("networkError")),(0,p.A)("mergeCanvasList error",{fields:{data:JSON.stringify({width:o,height:i,idx:t,innerCanvasWidth:n?.width,innerCanvasHeight:n?.height,x:r,y:s})}})}})),t&&E.drawImage(t,0,0,f.width,f.height)}(0,p.A)("generatePreivewImg canvas toDataURL");const k=h.toDataURL();(0,p.A)("generatePreivewImg canvasDataUrl toFile");const _=function(e){if(!e)return null;const t=e.split(","),n=t[0].match(/:(.*?);/)[1],r=atob(t[t.length-1]);let a=r.length;const s=new Uint8Array(a);for(;a--;)s[a]=r.charCodeAt(a);return new File([s],"",{type:n})}(k);if((0,p.A)("generatePreivewImg upload start",{fields:{data:JSON.stringify({length:k?.length,mergedSrc:!!_})}}),!_)return x?.(),void m.A.error(a("networkError"));const{url:b}=await(0,g.Fx)(_,{tag:l,eventName:"uploadMergedImg"});return b&&(0,p.A)("generatePreivewImg upload success"),{mergedImg:b}}})));const te=(0,r.useCallback)((()=>{Q(!0)}),[]),{run:ne}=(0,ye.A)(s,{wait:50}),re=(0,r.useCallback)((e=>{if(!X.current)return;const{left:t=0,top:n=0}=O.current?.getBoundingClientRect()||{},{parentElement:r,dataset:a}=X.current,{elementidx:s=""}=a||{},{type:o}=q?.elements?.[s]||{};o===N.UM.image&&ne((e=>e+1));const{left:i=0,top:c=0}=r?.getBoundingClientRect()||{},l=i-t,u=c-n,{left:m,top:d,rotate:p=0,width:g,height:f}=e||{};X.current.style.transform=`translate(${m-l}px,${d-u}px) rotate(${p}deg)`,X.current.style.left=0,X.current.style.top=0,X.current.dataset.left=m,X.current.dataset.top=d,X.current.dataset.width=g,X.current.dataset.height=f,X.current.dataset.rotate=p}),[X?.current,d,q]),ae=(0,r.useCallback)((()=>{if(!X.current)return;const{dataset:e}=X.current,{elementidx:t=""}=e||{},{type:n,userPlacementData:r}=q?.elements?.[t]||{};if(n===N.UM.text){const{fontSize:e=A}=r||{};X.current.dataset.prevfontsize=X.current.dataset.latestfontsize||e}}),[X?.current,d,q]),se=(0,r.useCallback)((e=>{if(!X.current)return;const{left:t,top:n,rotate:r=0,width:a,height:s}=e||{},{left:o=0,top:i=0}=O.current?.getBoundingClientRect()||{},{parentElement:c,dataset:l}=X.current,{elementidx:u=""}=l||{},{type:m}=q?.elements?.[u]||{};m===N.UM.image&&ne((e=>e+1));const{left:d=0,top:p=0}=c?.getBoundingClientRect()||{},g=d-o,f=p-i;X.current.style.transform=`translate(${t-g}px,${n-f}px) rotate(${r}deg)`,X.current.style.left=0,X.current.style.top=0,X.current.dataset.left=t,X.current.dataset.top=n,X.current.dataset.width=a,X.current.dataset.height=s,X.current.dataset.rotate=r}),[X?.current,d,q]),oe=(0,r.useCallback)((e=>{if(!X.current)return;const{left:t,top:n,rotate:r=0,width:a,height:s,prevHeight:o}=e||{},{parentElement:i,dataset:c}=X.current,{elementidx:l=""}=c||{},{left:u=0,top:m=0}=O.current?.getBoundingClientRect()||{},{type:d,userPlacementData:p}=q?.elements?.[l]||{},g=d===N.UM.image,f=d===N.UM.text;g&&ne((e=>e+1));const h=c.prevfontsize||p?.fontSize*S||A,{left:y=0,top:E=0}=i?.getBoundingClientRect()||{},v=y-u,x=E-m;if(X.current.style.transform=`translate(${t-v}px,${n-x}px) rotate(${r}deg)`,f||(X.current.style.width=`${a}px`),X.current.style.height=`${s}px`,X.current.style.left=0,X.current.style.top=0,X.current.dataset.left=t,X.current.dataset.top=n,X.current.dataset.width=a,X.current.dataset.height=s,X.current.dataset.rotate=r,d===N.UM.text){const e=Number(h)*(s/o);X.current.dataset.latestfontsize=e,X.current.style.fontSize=`${e}px`}}),[X?.current,q,d]),{enableMove:ie,enableScale:ce,enableRotate:le}=(0,r.useMemo)((()=>{const{elements:e,dimension:t}=u[d]||{},{width:n,height:r}=t||{},{type:a}=e?.[0]||{};let s=!1,o=!1,i=!1;return a===N.UM.text&&n&&r&&v&&(s=!0,o=!0,i=!1),a===N.UM.image&&r&&n&&(s=!0,o=!0,i=!0),{enableMove:s,enableScale:o,enableRotate:i}}),[X,d,u]),ue=(0,r.useMemo)((()=>{const{type:e,text:t}=q?.elements?.[0]||{},n=[d];return e===N.UM.text&&n.push(t),n}),[d,q]);return(0,r.useEffect)((()=>{(async()=>{const e=[];I&&e.push({url:I}),_&&e.push({url:_});const t=await Be(e,"initImgError");t?.some((e=>!e))&&u?.find((e=>e.dimension?.width&&e.dimension?.height))&&((0,p.A)("skuCustomizedInitImgError"),m.A.error(a("networkError")),x())})()}),[]),r.createElement("div",{className:Ue().wrap,ref:O},r.createElement("div",{className:Ue().baseBottom,onClick:()=>{f(-1)},"aria-label":"mask",role:"button",tabIndex:0}),I?r.createElement("img",{alt:"",src:I,className:h()(Ue().bottomImg,Ue().img),ref:B,style:T}):null,j?r.createElement(r.Fragment,null,u?.map(((e,t)=>r.createElement(Pe,{region:e,key:t,regionIdx:t,scaleRatio:S,templateType:E,setRegionActiveIdx:f,setRegionRefList:Y,regionRefList:J}))),_?r.createElement("img",{alt:"",src:_,className:h()(Ue().topImg,Ue().img,Ue().maskImg),ref:W,style:R}):null,X?.current?r.createElement(Ce,{enableMove:ie,enableScale:ce,enableRotate:le,onClick:te,resizerRef:U,dragEleRef:P,onEnd:ae,bottomLeftRef:M,bottomRightRef:D,topLeftRef:z,topRightRef:L,initStyle:Z,wrapRef:O,resetDeps:ue,onMoving:re,onRotating:se,onScaling:oe}):null):null)},Fe=(0,he.W4)({name:"EditorPreview"})((0,r.memo)((0,r.forwardRef)(Oe)));var He=n(65580),Ve=n.n(He);const $e=(0,r.memo)((function(e){let{surface:t,customizedType:n,goodsId:a,customizedTag:s,btnText:o,surfaceIdx:l,update:u,onClick:m,templateType:d,surfaceRefuseRiskIds:p,editId:g,setEditId:f,isV3:k,removeSurfaceRefuseRiskIds:_,onClose:b}=e;const{regions:w,baseImage:C,maskImage:T}=t||{},[R,A]=(0,r.useState)(0),z=n===N.BO.oldText,L=(0,r.useRef)(),M=(0,r.useRef)(),{t:P}=(0,c.B)("bec-fe.web-sku-selector",{keyPrefix:"Editor"}),{t:D}=(0,c.B)("bec-fe.web-sku-selector"),U=(0,r.useCallback)((async()=>{await(m?.({previewRef:L,controlRef:M,surface:t,surfaceIdx:l}))}),[L,M,t,l]);return r.createElement(r.Fragment,null,r.createElement("div",{className:h()(Ve().content,{[Ve().contentMinHeight]:!z})},z?null:r.createElement("div",{className:Ve().left},r.createElement("div",{className:Ve().leftTitle},P("approximatePreview")),r.createElement(Fe,{ref:L,customizedTag:s,baseImage:C,maskImage:T,setEditId:f,onClose:b,regions:w,isV3:k,templateType:d,regionActiveIdx:R,setRegionActiveIdx:A,surface:t})),r.createElement("div",{className:Ve().right},r.createElement(fe,{ref:M,customizedTag:`${s}`,goodsId:`${a}`,surface:t,editId:g,isV3:k,removeSurfaceRefuseRiskIds:_,regionActiveIdx:R,surfaceRefuseRiskIds:p,setRegionActiveIdx:A,update:u,surfaceIdx:l}),r.createElement("div",{className:Ve().sensitiveTips},r.createElement(y.x,{t:P,i18nKey:"newSensitiveTips",ns:"bec-fe.web-sku-selector"},r.createElement("span",{className:Ve().sensitiveUnderline,onClick:()=>{const e=(0,i.A)(r.createElement(S,{onClose:()=>e?.()}),{})},role:"button",tabIndex:0}),r.createElement("span",{className:Ve().sensitiveUnderline,onClick:()=>{const e=P("link.privacyPageUrl");e&&(0,x.MJ)(e,{openTarget:"_blank"})},role:"button",tabIndex:0}))),r.createElement(I.Ay,{page_el_sn:227911},r.createElement("div",{className:Ve().btnWrap},r.createElement(E.A,{size:"xl",type:v.el.primary,className:Ve().addCartBtn,onClick:U,timeout:5e4},o||D("add_to_cart")))))))}));var qe=n(83464),Ge=n.n(qe);const je=(0,r.memo)((e=>{let{onClose:t,customizationData:n,onClick:s,goodsId:o,skuId:i,btnText:l,customText:f,customTextLimit:h,titleDesc:y,urlMap:E,customizedType:v,customizedTag:x,templateType:I,templateId:k,snapshotId:_}=e;const{surfaces:b}=n||{},[w,C]=(0,r.useState)(!1),[S,T]=(0,r.useState)(0),R=v===N.BO.oldText,A=I===N.YQ.both,[z,L]=(0,r.useState)({}),M=(0,r.useCallback)((e=>{let{regionIdx:t,surfaceIdx:n,elementIdx:r}=e;L((e=>{const a=e?.[`${n}`]||[],s=`${t}${r}`;return{...e,[n]:a?.filter((e=>e.riskId!==s))}}))}),[]),[P,D]=(0,r.useState)((e=>{const{surfaces:t,decryptUrlMap:n,customizedType:r,customText:a="",customTextLimit:s}=e||{};return r===N.BO.oldText?[{regions:[{elements:[{text:a,lengthLimit:s,require:!0,type:N.UM.text}]}]}]:n?(t.forEach((e=>{e.regions?.forEach((e=>{e.elements.forEach((e=>{const{imageUrl:t,type:r}=e||{};r===N.UM.image&&t&&(e.renderUrl=n[t]?.signedUrl)}))}))})),t):t})({surfaces:b,decryptUrlMap:E,customizedType:v,customText:f,customTextLimit:h})),U=(0,r.useCallback)((e=>{const{surfaceIdx:t,regionIdx:n,elementIdx:r,newElement:a,newRegion:s,newSurface:o}=e||{};P?.length&&D((e=>{const i=e[t],{regions:c}=i,l=c[n],{elements:u}=l;return e.map(((e,i)=>i!==t?e:{...e,...o,regions:c?.map(((e,t)=>t!==n?e:{...e,...s,elements:u?.map(((e,t)=>t!==r?e:{...e,...a}))}))}))}))}),[b]),{t:B}=(0,c.B)("bec-fe.web-sku-selector",{keyPrefix:"Editor"}),{t:W}=(0,c.B)("bec-fe.web-sku-selector"),O=(0,u.A)((async e=>{let{controlRef:r,previewRef:c,surface:l,surfaceIdx:u}=e;C(!0);const{baseImage:d,regions:f}=l||{},h=await(r.current?.checkDataValid?.());if((0,p.A)(`customizedSubmitClick valid：${h}`),h){const e=async()=>{const e=[],t=[];f.forEach(((n,r)=>{const{elements:a}=n||{};a.forEach((n=>{const{type:a}=n||{};a===N.UM.image&&n.imageUrl&&e.push({previewType:N.tz.uploadImg,imageUrl:n.imageUrl,customizedAreaId:r}),a===N.UM.text&&n.text?.length&&t.push({previewType:N.tz.text,customizedText:n.text,customizedAreaId:r})}))}));const n=await(c.current?.generatePreviewImg?.()),{mergedImg:r}=n||{};if(f?.find((e=>e?.dimension?.width&&e?.dimension?.height))&&!r)throw m.A.error(W("networkError")),new Error("customizedSubmitClickMergeImgFail");const a=[];return(r||d?.imageUrl)&&a.push({previewType:N.tz.mergeImg,imageUrl:r||d?.imageUrl}),a.push(...e,...t),a},r=async e=>{const{result:t}=await(0,g.tB)({goodsId:`${o}`,previewInfos:e}),{riskStatus:n,refuseRiskIds:r}=t||{};return!r?.length&&n||(0,p.A)("customized verify risk fail"),{refuseRiskIds:r,riskStatus:n}};try{const a=async()=>{const e=f?.[0]?.elements?.[0]?.text,n=[{previewType:N.tz.text,customizedText:e,riskId:"00"}],{riskStatus:a,refuseRiskIds:s}=await r(n);if(!a)return s?.length&&L((e=>({...e,[u]:s.map((e=>{const t=n.find((t=>t.riskId===e));if(t){const{riskId:e,previewType:n}=t||{};return{riskId:e,previewType:n}}return null})).filter(Boolean)}))),void C(!1);let c;try{c=await(0,g.U2)({goodsId:o,skuId:i,lastSnapshotId:_,customizedText:e})}catch(e){throw t?.(),new Error("createCustomInfo error")}return c},c=async()=>{const a={goodsId:o,skuId:i,lastSnapshotId:_};k&&(a.templateId=k),I&&(a.templateType=I);const s=await e(),c=(()=>{const e=[{...s?.find((e=>e.previewType===N.tz.mergeImg)),riskId:"0"}];return f.forEach(((t,n)=>{const{elements:r}=t||{};r.forEach(((t,r)=>{const{type:a}=t||{};a===N.UM.image&&t.imageUrl&&e.push({previewType:N.tz.uploadImg,imageUrl:t.imageUrl,riskId:`${n}${r}`}),a===N.UM.text&&t.text?.length&&e.push({previewType:N.tz.text,customizedText:t.text,riskId:`${n}${r}`})}))})),e})(),{riskStatus:l,refuseRiskIds:m}=await r(c);if(!l)return m?.length&&L((e=>({...e,[u]:m.map((e=>{const t=c.find((t=>t.riskId===e));if(t){const{riskId:e,previewType:n}=t||{};return{riskId:e,previewType:n}}return null})).filter(Boolean)}))),void C(!1);const d={customizedData:(p={...n,surfaces:P},p?(p?.surfaces.forEach((e=>{e.regions?.forEach((e=>{e.elements.forEach((e=>{e&&"object"==typeof e&&delete e.renderUrl}))}))})),p):p),previewInfos:s};var p;const h={...a,...d};let y;try{y=await(0,g.U2)(h)}catch(e){throw t?.(),new Error("createCustomInfo error")}return y},d=await(R?a():c()),{customizedSnapshotId:h,success:y,toast:E}=d?.result||{};if(C(!1),y&&h)return(0,p.A)("customizedSubmit success"),s?.({data:n,customizedSnapshotId:h,customizedText:h?null:l?.[0]?.regions?.[0]?.elements?.[0]?.text}),void t?.();E&&m.A.error(E)}catch(e){(0,a.fL)(e,{error_message:"customizedSubmitClick fail"}),(0,p.A)("customizedSubmitClick fail"),m.A.error(W("networkError"))}}C(!1)}));return r.createElement(d.Ay,{onClick:t,maskClosable:!1,wrapClassName:Ge().popup,className:Ge().content},r.createElement("div",{className:Ge().wrap},r.createElement("div",{className:Ge().title},B("personalize")),y?r.createElement("div",{className:Ge().titleDesc},y):null,P?.map(((e,n)=>e?r.createElement($e,{key:n,editId:S,isV3:A,setEditId:T,surfaceIdx:n,surface:e,onClick:O,surfaceRefuseRiskIds:z?.[n],removeSurfaceRefuseRiskIds:M,goodsId:o,templateType:I,onClose:t,btnText:l,customizedType:v,customizedTag:x,update:U}):null)),w?r.createElement("div",{className:Ge().mask}):null))})),Ke=async e=>{let{goodsId:t,skuId:n,clickCb:a,btnText:c,onError:u,onClose:d,titleDesc:f}=e;try{const{result:e}=await(0,g.Mv)({goodsId:t,skuId:n}),{customizedType:l,customizedTextMaxLength:u,customizedTemplate:m,customizedTag:p,templateType:h,templateId:y}=e||{},E=m?(0,s.Cb)((0,o.NS)(m)):void 0,v=e=>{a?.({...e,customizedOperateType:1})},x=(0,i.A)(r.createElement(je,{customizationData:E,btnText:c,titleDesc:f,onClose:()=>{x?.(),d?.()},goodsId:t,skuId:n,templateType:h,templateId:y,onClick:v,customizedType:l,customizedTag:p,customTextLimit:u}),{})}catch(e){u?.(),(0,p.A)("showAddCustomInfoEditorError"),m.A.error((0,l.t)("networkError",{ns:"bec-fe.web-sku-selector"}))}}},79691:function(e,t,n){"use strict";n.d(t,{Fx:function(){return h},JS:function(){return I},Mv:function(){return E},U2:function(){return x},bv:function(){return y},tB:function(){return v}});var r=n(59024),a=n(56733),s=n(24808),o=n(83836),i=n(94971),c=n(52571),l=n(64491),u=n(7682);let m;const d=async e=>{let{url:t,params:n={},config:r={},disableCamel:a=!1}=e;return m||(m=(0,l.Km)({})),m.post(t,n,r).then((e=>a?e:(0,o.Cb)(e)))},p=async e=>{let{url:t,params:n={},config:r={},disableCamel:a=!1}=e;return d({url:t,params:n,config:{useAntiToken:!0,useRiskRetry:!0,...r},disableCamel:a})},g=e=>{const t=window.location.hostname.includes(a.Zc),n=(0,i.Ri)("region");return(new c.Ay).withCredentials().setScene(c.ju.C_END).setDr((0,s.xc)(+n)).setRegionId(+n).setSignatureHost(location.host).isProduct(!t).setTag(e).init()};let f;const h=(e,t)=>{const{tag:n,onProgress:a,eventName:s="uploadImg"}=t||{};return f||(f=g(n)),new Promise(((t,n)=>{let o=f.uploadImage().setData(e).saveOriginalImage();return o=o.onProgress((e=>a?.(e))),o.build().then(t).catch((()=>{n(),(0,r.A)(`${s}fail`)}))}))},y=(e,t)=>{const{tag:n,onProgress:r}=t||{};f||(f=g(n));let a=f.uploadImage().setData(e).saveOriginalImage();return a=a.onProgress((e=>r?.(e))),{instance:a,upload:async()=>new Promise(((e,t)=>a.build().then(e).catch(t)))}},E=async e=>{let{goodsId:t,skuId:n,snapshotId:r}=e;const{result:a}=await d({url:"/api/bg/bg-uranus-api/customized/template",params:{goods_id:t,sku_id:n,customized_snapshot_id:r},disableCamel:!0}),{url_map:s={},...i}=a||{};return{result:{...(0,o.Cb)(i),urlMap:Object.keys(s).reduce(((e,t)=>{const{signed_url:n}=s?.[t]||{};return e[t]={signedUrl:n},e}),{})}}},v=e=>{let{goodsId:t,previewInfos:n}=e;return p({url:"/api/bg/bg-uranus-api/customized/risk_status",params:{goods_id:t,preview_infos:(0,u.qi)(n)}})},x=e=>{let{goodsId:t,skuId:n,customizedText:a,previewInfos:s,customizedData:o,templateId:i,templateType:c,lastSnapshotId:l}=e;return(0,r.A)("createCustomInfo start"),p({url:"/api/bg/bg-uranus-api/customized/create",params:{goods_id:t,sku_id:n,customized_text:a,customized_data:o&&JSON.stringify((0,u.qi)(o)),preview_infos:s&&(0,u.qi)(s),template_id:i?`${i}`:null,template_type:c,last_snapshot_id:l}})},I=e=>{let{goodsId:t,skuId:n,skuNum:r,snapshotList:a}=e;return p({url:"/api/bg/bg-uranus-api/customized/preview_list",params:{sku_id:n,sku_num:r,customized_snapshots:(0,u.qi)(a),goods_id:t}})}},9694:function(e,t,n){"use strict";n.d(t,{BO:function(){return o},G5:function(){return i},Rx:function(){return u},UM:function(){return s},YQ:function(){return a},c8:function(){return r},tz:function(){return l},zQ:function(){return c}});let r=function(e){return e[e.none=0]="none",e[e.oversize=1]="oversize",e[e.invalidType=2]="invalidType",e[e.risk=3]="risk",e[e.empty=4]="empty",e[e.network=5]="network",e[e.invalidDimension=6]="invalidDimension",e[e.mergeImgRisk=7]="mergeImgRisk",e}({}),a=function(e){return e[e.img=1]="img",e[e.text=2]="text",e[e.both=3]="both",e}({}),s=function(e){return e[e.image=1]="image",e[e.text=2]="text",e}({}),o=function(e){return e[e.oldText=1]="oldText",e[e.newCustomized=2]="newCustomized",e}({}),i=function(e){return e[e.none=0]="none",e[e.text=1]="text",e[e.img=2]="img",e[e.textAndImg=3]="textAndImg",e[e.textAndBg=4]="textAndBg",e[e.richtext=5]="richtext",e}({}),c=function(e){return e[e.add=1]="add",e[e.update=2]="update",e[e.onlyLeftNoCustomized=3]="onlyLeftNoCustomized",e}({}),l=function(e){return e[e.mergeImg=1]="mergeImg",e[e.editImg=2]="editImg",e[e.uploadImg=3]="uploadImg",e[e.text=4]="text",e}({}),u=function(e){return e[e.left=1]="left",e[e.center=2]="center",e[e.right=3]="right",e}({})},42218:function(e,t,n){"use strict";n.d(t,{r:function(){return E}});var r=n(33514),a=n(32485),s=n.n(a),o=n(14511),i=n(87837),c=n(84973),l=n(82370),u=n(52248),m=n(53075),d=n(21614),p=n(35396),g=n(66531),f=n(80907),h=n(6278),y=n.n(h);const E=(0,o.W4)({name:"Rank"})((e=>{let{data:t,className:n,style:a,pageElSn:o,rankV4:h,rankExplainDialog:E,onRankExplaginShow:v}=e;const{iconUrl:x,content:I}=E||{},k=e=>{e&&v?.()};if(h)return(()=>{const{richTextBlock:e,jumpUrl:t,track:n}=h||{};return e?.textRich?.length?r.createElement(r.Fragment,null,r.createElement(i.nU,{page_el_sn:o,others:n},r.createElement("div",{className:s()(y().container,{[y().clickable]:!!t}),onClick:()=>{t&&(0,m.MJ)((0,g.L)(t),{openTarget:"_blank"})},role:"button",tabIndex:t?0:void 0},r.createElement(d.l5,{newRichText:e,className:y().richText,renderSuffix:()=>x&&I?r.createElement(c.A,{appendToBody:!0,onPopoverVisibleChange:k,overlay:r.createElement("div",{className:y().rankExplainDialog},I)},r.createElement(l.Ay,{src:x,alt:"",className:y().explainEntry})):null})))):null})();const{textRich:_=[],track:b,action:w}=t||{};if(!_||!_?.length)return null;const C=w?.type===p.E.link&&w?.content?.routerUrl;return r.createElement(f.Ay,{page_el_sn:o,others:{...b?.impr,is_exp:1},useClick:!!C},r.createElement("div",{className:s()(y().container,n,{[y().clickable]:!!C}),style:a},r.createElement(d.l5,{newRichText:t,className:y().richText,renderSuffix:()=>r.createElement(r.Fragment,null,x&&I?r.createElement(c.A,{appendToBody:!0,onPopoverVisibleChange:k,overlay:r.createElement("div",{className:y().rankExplainDialog},I)},r.createElement(l.Ay,{src:x,alt:"",className:y().explainEntry})):null,C?r.createElement(u.hu,{className:y().arrow,fill:_?.[_?.length-1]?.fontColor}):null)})))}))},60106:function(e,t,n){"use strict";n.d(t,{A:function(){return u}});var r=n(33514),a=n(32485),s=n.n(a),o=n(14511),i=n(82370),c=n(90368),l=n.n(c);const u=(0,o.W4)({name:"ModelTryOn"})((0,r.memo)((e=>{let{avatar:t,sizeDesc:n=[],bodyDesc:a={},selectUnit:o,itemCls:c="",sizeDescCls:u="",bodyDescCls:m=""}=e;const d=a[o]||[];return r.createElement("div",{className:l().wrap},r.createElement("div",{className:l().avatar},r.createElement(i.Ay,{src:t,alt:""})),r.createElement("div",{className:l().right},r.createElement("div",{className:s()(l().sizeDesc,u),"aria-label":n?.join("")},(n||[]).map(((e,t)=>r.createElement("div",{className:s()(l().item,c),key:t,"aria-hidden":!0},e)))),r.createElement("div",{className:s()(l().bodyDesc,m),"aria-label":d?.join("")},(d||[]).map(((e,t)=>r.createElement("span",{key:t,"aria-hidden":!0},e))))))})))},87110:function(e,t,n){"use strict";n.d(t,{Je:function(){return Dt},q$:function(){return Wt},$h:function(){return Ft}});var r=n(14242),a=(n(44114),n(33514)),s=n(32485),o=n.n(s),i=n(24517),c=n(63815),l=n(95789),u=n(14511),m=n(97582),d=n(81411),p=n(59661),g=n(53075),f=n(76475);var h=n(59024),y=n(42743),E=n(66622),v=n(80907),x=n(34243),I=n(48218),k=n.n(I);var _=e=>{let{onClick:t}=e;return a.createElement(x.E,{wrapClass:k().wrap,onClick:t})},b=n(46272),w=n(17475);const C=(0,a.createContext)({}),S=()=>(0,a.useContext)(C)||{},N=(0,a.createContext)({}),T=()=>(0,a.useContext)(N)||{},R=(e,t,n)=>{const{heads:r,metas:a,groupsInsertIndex:s,headRecords:o=[],groupRecords:i=[],metaRecords:c={},tailRecords:l=[],tails:u=[],metasV2:m,recordsInch:d,recordsCm:p}=e||{},g=[...r||[],...a||[],...u||[]];t?.id&&g.splice(s,0,t);const f=o.map(((e,t)=>({...o[t],...c?.[n]?.[t],...i[t],...l[t]})));return m?.length&&d?.length&&p?.length?{header:m,content:2==+n?d:p}:{header:g,content:f}};var A=n(69480),z=n.n(A);const L=(0,a.memo)((function(e){let{header:t=[],content:n=[],wrapCls:r="",showHover:s=!1,activeContentRowIndex:i,renderCustomHeaderItem:c}=e;const[l,u]=(0,a.useState)({row:-1,col:-1}),m=e=>{if(!s)return;const{row:t,col:n}=e.currentTarget.dataset||{},{row:r,col:a}=l||{};t===r&&n===a||u({row:t,col:n})},d=()=>{s&&u({row:-1,col:-1})};return t?.length&&n?.length?a.createElement("div",{className:o()(z().wrap,r)},a.createElement("table",{className:z().table,cellSpacing:0,cellPadding:0,onMouseLeave:d},a.createElement("tbody",null,a.createElement("tr",{className:z().columm,onMouseEnter:d},t.map(((e,t)=>{const{id:n}=e||{};return a.createElement("td",{key:n,className:o()(z().cell,0===t?z().headerLine:"")},c?.(e)||e.name)}))),n.map(((e,n)=>{const r=n===+l?.row;return a.createElement("tr",{key:n,className:o()(z().tr,{[z().activeRowV2]:i===n})},t.map(((t,s)=>{const i=s===+l?.col;return a.createElement("td",{key:t.id,className:o()(z().cell,z().content,{[z().activeCol]:i&&n<=+l?.row||r&&s<=+l?.col,[z().activeItem]:i&&r,[z().headerLine]:0===s}),onMouseEnter:m,"data-row":n,"data-col":s},e[t.id])})))}))))):null}));var M=n(40639),P=n(84973),D=n(52248),U=n(63521),B=n.n(U);const W=(0,u.W4)({name:"TypeSelect"})((function(e){let{activeId:t,groupList:n,onSelectCb:r,sizeSuffix:s,pageElSn:i,isScrolling:c,entryCls:l,listCls:u,wrapClassName:m}=e;const[d,p]=(0,a.useState)(!1),g=(0,a.useRef)(),f=(0,a.useRef)(),h=n?.find((e=>e.id===t))?.name;return(0,a.useEffect)((()=>{c&&f.current?.close?.()}),[c]),a.createElement(v.Ay,{page_el_sn:i,others:{country_select:h}},a.createElement("div",{className:o()(B().wrap,m)},a.createElement(P.A,{trigger:["click"],placement:"bottom",appendToBody:!0,innerStyle:{top:0},ref:f,onPopoverVisibleChange:e=>{p(e)},hideArrow:!0,overlay:a.createElement("div",{className:o()(B().list,u),style:{width:g?.current?.offsetWidth}},n?.map(((e,n)=>{const{id:s,name:i}=e||{},c=s===t;return a.createElement("div",{role:"button",tabIndex:0,key:s,"data-id":s,"data-index":n,className:o()(B().listItem,{[B().activeItem]:c}),onClick:t=>{r(t,e),f.current?.close?.()}},i,c?a.createElement(M.A,{className:B().selectedIcon}):null)})))},a.createElement("div",{className:o()(B().entry,l),ref:g},a.createElement("div",{className:B().content},a.createElement("span",{className:B().activeSize},h,a.createElement("span",{className:B().suffix},s)),a.createElement(D.hu,{direction:"bottom",className:o()(B().arrow,{[B().activeArrow]:d})}))))))}));var O=n(22639),F=n.n(O),H=function(e){return e[e.body=0]="body",e[e.product=1]="product",e}(H||{});var V=()=>{const{sizeData:e,unitId:t,suitIndex:n,onSelectGroupIdCb:s,activeSizeIndex:i}=T(),{t:c}=(0,m.B)("bec-fe.web-sku-selector",{keyPrefix:"sizeGuideV3"}),{sizeChart:l,bodyInstructions:u,bodyMeasurementTip:d,chooseGroupId:p,groupList:g,sizeSuffix:f}=e||{},{bodyMeasurement:h,productMeasurement:y}=l||{},{isScrolling:E}=S(),v=(0,a.useMemo)((()=>{const e=[];return h&&e.push({key:H.body,label:c("bodyCharts")}),y&&e.push({key:H.product,label:c("productCharts")}),e}),[]),[x,I]=(0,a.useState)(v[0]?.key),k=(0,a.useMemo)((()=>R(h?.[0],null,t)),[h,t]),_=(0,a.useMemo)((()=>R(y?.[n],null,t)),[y,t,n]),b=x===H.body?k:_,w=(0,a.useCallback)(((e,t)=>{const{id:n}=t||{};s(n)}),[s]),C=(0,a.useCallback)((e=>{const{id:t}=e||{};return t===p?a.createElement(W,{pageElSn:246604,onSelectCb:w,groupList:g,activeId:p,isScrolling:E,entryCls:F().typeSelect,listCls:F().listCls,wrapClassName:F().typeSelectWrap}):null}),[p,g,w,E]);return a.createElement("div",{className:F().wrap},a.createElement("div",{className:F().headers},v.map(((e,t)=>{const{label:n,key:r}=e||{};return a.createElement("div",{className:o()(F().headerItem,{[F().headerItemBorder]:v.length>1,[F().activeHeaderItem]:r===x&&v.length>1}),key:t,onClick:()=>I(r),role:"button",tabIndex:0,"data-aria-enter":"1"},n)}))),a.createElement(L,(0,r.A)({},b,{showHover:!0,activeContentRowIndex:i,renderCustomHeaderItem:C})))},$=n(46694),q=n(40304),G=n(27092),j=n(82370),K=n(23058),Q=n(23509),J=n(35870),Y=n(8917),X=n(34678),Z=n(81927),ee=n.n(Z),te=function(e){return e[e.body=0]="body",e[e.product=1]="product",e}(te||{});const ne=e=>{let{bodyInstructions:t,productInstructions:n}=e;const{t:r}=(0,m.B)("bec-fe.web-sku-selector",{keyPrefix:"sizeGuideV3"}),s=(0,a.useMemo)((()=>{const e=[];return t&&e.push({key:te.body,label:r("body"),data:t}),n&&e.push({key:te.product,label:r("product"),data:n}),e}),[t,n,r]),[i,c]=(0,a.useState)(s[0]?.key||0),l=(0,a.useMemo)((()=>a.createElement("div",{className:ee().titleWrap},s.map((e=>{const{key:t,label:n}=e||{};return a.createElement("div",{key:t,className:o()(ee().titleItem,{[ee().activeItem]:t===i,[ee().activeItemLine]:t===i&&s.length>1}),onClick:()=>c(t),role:"button",tabIndex:0,"data-aria-enter":"1"},n)})))),[s,i]),u=s?.find((e=>e.key===i))?.data;if(!Object.keys(u||{}).length)return null;const{contents:d,imageUrls:p=[]}=u;return a.createElement(X.A,{onClose:Q.L,title:l},a.createElement("div",{className:ee().content},a.createElement("div",{className:ee().info},d?.map(((e,t)=>a.createElement(a.Fragment,{key:t},a.createElement("div",{className:ee().label},e.name),a.createElement("div",{className:ee().desc},e.desc))))||null),p[0]&&a.createElement("div",{className:ee().imgWrap},a.createElement(j.Ay,{src:p[0]||"",alt:""}))||null))};var re=n(21356),ae=n.n(re);const se=()=>{const{sizeData:e,activeSizeIndex:t,bodySizeTabledata:n,productSizeTableData:r}=T(),{sizeChartImage:s}=e||{},{productChartImage:o,bodyChartImage:i}=s||{},c=(0,a.useMemo)((()=>{const e=[],a=(e,n)=>{const{imageElements:r}=n||{},a=r.map((n=>{const{elementId:r}=n||{};return{...n,label:e?.content?.[t]?.[r],name:e?.header?.find((e=>e.id===r))?.name}}));return{...n,imageElements:a}};return i?.url&&i?.imageElements?.length&&e.push(a(n,i)),o?.url&&o.imageElements?.length&&e.push(a(r,o)),e}),[i,o,r,n,t]),{isRTL:l}=(0,$.Sz)();return c.length?a.createElement("div",{className:ae().measure},c.map(((e,t)=>((e,t)=>{const{url:n,imageElements:r,imgHeight:s,imgLength:o}=e||{},i=o/s,c=i?{height:188/i,width:188}:void 0;return n?a.createElement("div",{className:ae().picWrap,key:t,style:c},a.createElement(j.Ay,{src:n,alt:"",className:ae().img,style:c}),r.map(((e,t)=>{const{verticalOrdinate:n,horizontalOrdinate:r,label:s,name:o}=e||{},i=a.createElement(a.Fragment,null,`${o}: `,a.createElement(Y._,null),s);return o&&s?a.createElement("div",{className:ae().pointer,key:t,role:"button",tabIndex:0,onClick:()=>{K.A.customize(a.createElement("span",null,i))},style:{top:n/2.805,left:r/2.805,transform:"translate(-50%, -50%)"}},s):null}))):null})(e,t)))):null},oe=()=>{const{sizeData:e,suitIndex:t}=T(),{bodyInstructions:n,productInstructions:r,sizeChart:s}=e||{},{bodyMeasurement:o,productMeasurement:i}=s||{},{t:c}=(0,m.B)("bec-fe.web-sku-selector",{keyPrefix:"sizeGuideV3"});return a.createElement("div",{className:ae().notice},a.createElement(J.d,null,a.createElement(q.A,{className:ae().noticeIcon})),a.createElement("span",{className:ae().noticeInfo},c("hoverNotice")),a.createElement("span",{className:ae().noticeMeasure,role:"button",tabIndex:0,onClick:()=>{if(!n&&!r)return null;(0,Q.P)({popupNode:a.createElement(ne,{productInstructions:i?r?.[t]:void 0,bodyInstructions:o?n:void 0})})}},c("howToMeasure"),a.createElement(J.d,null,a.createElement(G.A,{className:ae().noticeArrow}))))};var ie=n(20657),ce=n(87837),le=n(61410),ue=n.n(le);const me=()=>{const{sizeData:e,onSelectGroupIdCb:t,setActiveSizeIndex:n,activeSizeIndex:r}=T(),{isScrolling:s}=S(),{sizeChartImage:i,sizeSuffix:c}=e||{},l=(0,a.useRef)(),[u,m]=(0,a.useState)(!1),{displayPrefixTitle:d,sizeList:p,groupList:g,chooseGroupId:f}=i||{},h=(0,a.useMemo)((()=>g?.find((e=>e.id===f))?.name),[g,f]);return(0,a.useEffect)((()=>{s&&l.current?.close?.()}),[s]),a.createElement("div",{className:ue().wrap},a.createElement("div",{className:ue().sizeSpecHead},a.createElement("span",null,d),h?a.createElement(P.A,{appendToBody:!0,trigger:["click"],hideArrow:!0,ref:l,onPopoverVisibleChange:e=>m(e),overlay:g?.length?a.createElement("div",{className:ue().locationList},g.map(((e,n)=>a.createElement("div",{key:n,className:o()(ue().locationListItem,{[ue().locationListActiveItem]:e.id===f}),role:"button",tabIndex:0,onClick:()=>{t?.(e.id),l.current?.close?.()}},a.createElement("span",null,e.name),f===e.id?a.createElement(M.A,{className:ue().locationListItemSelected}):null)))):null},a.createElement("div",{className:ue().curLocationWrap},a.createElement(ce.nU,{page_el_sn:246603},a.createElement("div",{className:ue().curLocation},h,a.createElement("span",{className:ue().suffix},c),a.createElement(ie.A,{className:o()(ue().curLocationArrow,{[ue().curLocationArrowActive]:u})}))))):null),p?.length?a.createElement(ce.nU,{page_el_sn:246606},a.createElement("div",null,p.map(((e,t)=>a.createElement("div",{className:o()(ue().skuItem,{[ue().selected]:t===r}),onClick:()=>n(t),role:"button",tabIndex:0},e))))):null)};var de=n(88072),pe=n.n(de);const ge=()=>{const{sizeData:e,setUnitId:t,reportSizePreference:n,unitId:r}=T(),{sizeChart:s}=e||{},{units:i=[],userPreference:c}=s||{},l=(0,a.useCallback)(((e,r)=>{const{id:a}=r||{},s=i?.findIndex((e=>e?.id===a)),o=i[s]?.name;t(a);n({sizeUnit:o||c?.unit,index:s,id:a})}),[c,n,t,i]),{t:u}=(0,m.B)("bec-fe.web-sku-selector");return a.createElement("div",{className:pe().wrap},a.createElement("div",{className:pe().left},u("SizeChart.switch_to")),a.createElement("div",{className:pe().right},i.map(((e,t)=>a.createElement("div",{tabIndex:0,key:e.id,role:"button",className:o()(pe().unit,{[pe().isActive]:+r===e.id,[pe().in]:0===t,[pe().cm]:0!==t}),onClick:t=>l(t,e)},e.name)))))};var fe=n(1011),he=n.n(fe);const ye=()=>a.createElement("div",{className:he().wrap},a.createElement(ge,null),a.createElement(me,null),a.createElement(se,null),a.createElement(oe,null),a.createElement(V,null));var Ee=n(55095),ve=n(72620),xe=n(64138),Ie=n.n(xe);const ke=e=>{let{instructions:t,onClose:n,howToMeasureTitle:r}=e;const{contents:s,imageUrls:i=[]}=t||{},{t:c}=(0,m.B)("bec-fe.web-sku-selector",{keyPrefix:"sizeGuideV2"});return Object.keys(t||{}).length?a.createElement(p.Ay,{onClick:n},a.createElement("div",{className:o()(Ie().wrap)},a.createElement("div",{className:Ie().title},r),a.createElement("div",{className:Ie().scroll},a.createElement("div",{className:Ie().content},a.createElement("div",{className:Ie().info},s?.map(((e,t)=>a.createElement(a.Fragment,{key:t},a.createElement("div",{className:Ie().label},e.name),a.createElement("div",{className:Ie().desc},e.desc))))||null),i[0]&&a.createElement("div",{className:Ie().imgWrap},a.createElement(j.Ay,{src:i[0]||"",alt:""}))||null)))):null};var _e=n(78159),be=n.n(_e);const we=e=>{const{title:t,howToMeasureData:n,howToMeasureTitle:r}=e;return a.createElement("div",{className:be().tableHeader},a.createElement("div",{className:be().tableHeaderTitle},t),n?a.createElement("div",{onClick:()=>{const e=(0,l.A)(a.createElement(ke,{instructions:n,onClose:()=>e?.(),howToMeasureTitle:r}),{})},className:be().measureText,role:"button",tabIndex:0,"data-aria-enter":"1"},a.createElement("span",null,r),a.createElement(J.d,null,a.createElement(ve.A,{className:be().measureIcon}))):null)};var Ce=n(41637),Se=n.n(Ce);const Ne=e=>{let{isFirst:t}=e;const{sizeData:n,unitId:s}=T(),{t:i}=(0,m.B)("bec-fe.web-sku-selector",{keyPrefix:"sizeGuideV2"}),{sizeChart:c,bodyInstructions:l,bodyMeasurementTip:u}=n||{},{bodyMeasurement:d}=c||{},p=(0,a.useMemo)((()=>R(d?.[0],null,s)),[d,s]);return d?.[0]?a.createElement("div",{className:o()(Se().bodyMeasurement,t?Se().marginTop:"")},a.createElement(we,{title:i("bodyMeasurements"),howToMeasureData:l,howToMeasureTitle:i("howToMeasureBody")}),a.createElement(L,(0,r.A)({},p,{showHover:!0})),u?a.createElement(Ee.Fc,{message:u,type:Ee.SK.text,status:Ee.WH.grayText,classConfig:{text:Se().desc,textIcon:Se().tipIcon}}):null):null};var Te=n(60106),Re=n(67591),Ae=n.n(Re);const ze=e=>{let{isFirst:t}=e;const{sizeData:n,unitId:s,setSuitIndex:i,suitIndex:c}=T(),{t:l}=(0,m.B)("bec-fe.web-sku-selector",{keyPrefix:"sizeGuideV2"}),{sizeChart:u,productInstructions:d}=n||{},{productMeasurement:p}=u||{},g=p?.map((e=>e?.name)),f=p?.[c],h=(0,a.useMemo)((()=>R(f,null,s)),[f,s]);return f?a.createElement("div",{className:o()(Ae().productDetails,t?Ae().marginTop:"")},a.createElement(we,{title:l("productDetail"),howToMeasureData:d?.[c],howToMeasureTitle:l("howToMeasureProduct")}),g?.length>1&&a.createElement("div",{className:Ae().suitWrap},a.createElement("div",{className:Ae().baseChoiceBtns},g.map(((e,t)=>a.createElement(v.Ay,{page_el_sn:201041,key:t},a.createElement("div",{className:o()(Ae().baseChoiceBtn,{[Ae().selected]:t===c,[Ae().btnLeft]:0===t,[Ae().btnRight]:t===g.length-1}),key:t,role:"button",tabIndex:0,"data-aria-enter":"1",onClick:()=>i(t)},e)))))),a.createElement(L,(0,r.A)({},h,{showHover:!0})),a.createElement(Ee.Fc,{message:l("tip"),type:Ee.SK.text,status:Ee.WH.grayText,classConfig:{text:Ae().tip,textIcon:Ae().tipIcon}})):null};var Le=n(95352),Me=n.n(Le);const Pe=(0,a.memo)((e=>{let{isActive:t,value:n}=e;return a.createElement("div",{className:o()(Me().item,t?Me().activeItem:"")},a.createElement("div",{className:Me().content},n),t?a.createElement(D.ib,{className:Me().anchor,path:"M919.7 281.6l-815.4 0c-35.3 0-64 28.7-64 64 0 18.3 7.8 35.7 21.5 47.8l407.7 362.4c24.2 21.6 60.8 21.6 85 0l407.7-362.4c26.4-23.5 28.8-63.9 5.3-90.3-12.1-13.7-29.6-21.5-47.8-21.5z"}):a.createElement("div",{className:Me().line}))})),De=e=>{let{style:t,className:n}=e;return t?.length?a.createElement("div",{className:o()(Me().wrap,n)},t?.map(((e,t)=>{const{name:n,scale:r,value:s}=e;return a.createElement("div",{className:Me().container,key:t},a.createElement("div",{className:Me().title},n),a.createElement("div",{className:Me().list},r?.map(((e,t)=>{const n=e===s;return a.createElement(Pe,{isActive:n,value:e,key:t})}))))}))):null};var Ue=(0,u.W4)({name:"SizeDistribution"})((0,a.memo)(De)),Be=n(66709),We=n.n(Be);const Oe=()=>{const{t:e}=(0,m.B)("bec-fe.web-sku-selector"),{sizeData:t,suitIndex:n,reportSizePreference:r,onSelectGroupIdCb:s,setUnitId:o,unitId:i}=T(),{isScrolling:c}=S(),{sizeChart:l,sizeSuffix:u,groupList:d,chooseGroupId:p}=t||{},{units:g=[],userPreference:f,productMeasurement:h}=l||{},y=(0,a.useCallback)(((e,t)=>{const{id:n}=t||{},a=g?.findIndex((e=>e?.id===n)),s=g[a]?.name;o(n);r({sizeUnit:s||f?.unit,index:a,id:n})}),[h,n,f]),E=(0,a.useCallback)(((e,t)=>{const{id:n}=t||{};s(n)}),[s]);return a.createElement("div",{className:We().wrap},a.createElement("div",{className:We().left},e("sizeGuide.sizeChartSwitchText")),a.createElement("div",{className:We().right},d?.length?a.createElement(W,{onSelectCb:E,groupList:d,activeId:p,isScrolling:c,pageElSn:200978,sizeSuffix:u}):null,g?.length>=2?a.createElement("div",{className:We().unitWrap},a.createElement(W,{groupList:g,activeId:i,entryCls:We().entryCls,onSelectCb:y,isScrolling:c})):null))};var Fe=n(61504),He=n.n(Fe);const Ve=()=>{const{sizeData:e,goodsId:t,reportSizePreference:n,onSelectGroupIdCb:s,sizeGuideControl:o}=S(),{sizeInfoShowType:i=1}=o||{},{sizeChart:c,modelTryOn:l,sizeChartImage:u}=e||{},{defaultUnitId:m=0,units:d,productMeasurement:p,bodyMeasurement:g}=c||{},{chooseSizeIndex:f}=u||{},[h,y]=(0,a.useState)(f);(0,a.useEffect)((()=>{y(f)}),[f]);const[E,v]=(0,a.useState)(d[m]?.id),[x,I]=(0,a.useState)(0),k=(0,a.useMemo)((()=>({...l,selectUnit:d?.find((e=>String(e.id)===String(E)))?.name})),[E,d,l]),_=(0,a.useMemo)((()=>R(g?.[0],null,E)),[g,E]),b=p?.[x],w=(0,a.useMemo)((()=>R(b,null,E)),[b,E]);return a.createElement(N.Provider,{value:{sizeData:e,goodsId:t,onSelectGroupIdCb:s,unitId:E,setUnitId:v,suitIndex:x,setSuitIndex:I,reportSizePreference:n,bodySizeTabledata:_,productSizeTableData:w,activeSizeIndex:h,setActiveSizeIndex:y}},u?a.createElement(a.Fragment,null,a.createElement(ye,null),k?.avatar?a.createElement("div",{className:He().modelTryWrap},(()=>{if(k?.avatar)return a.createElement(a.Fragment,null,a.createElement("div",{className:He().modelTryOn},a.createElement(Te.A,(0,r.A)({},k,{bodyDescCls:He().bodyDescCls,sizeDescCls:He().sizeDescCls}))))})()):null):a.createElement("div",{className:He().wrap},a.createElement(Oe,null),a.createElement(Ue,{style:e?.style,className:He().SizeDistribution}),1===i?a.createElement(Ne,{isFirst:!0}):a.createElement(ze,{isFirst:!0}),k?.avatar?a.createElement(a.Fragment,null,a.createElement("div",{className:He().modelTryOn},a.createElement(Te.A,(0,r.A)({},k,{bodyDescCls:He().bodyDescCls,sizeDescCls:He().sizeDescCls})))):p?.[0]&&g?.[0]?a.createElement("div",{className:He().line}):void 0,1===i?a.createElement(ze,null):a.createElement(Ne,null)))};let $e=function(e){return e[e.product=0]="product",e[e.body=1]="body",e}({});const qe=e=>{let{goodsId:t,onChangeUnit:n}=e;const{mainData:r,getSizeGuideInfo:s,isMainReady:o,setIsMainError:i,setMainData:c,setChooseGroupId:l,isScrolling:u}=(0,a.useContext)(f.ll),{sizeGuideControl:m}=r||{},[d,p]=(0,a.useState)(),[g,h]=(0,a.useState)({}),[y,E]=(0,a.useState)(!1),v=(0,a.useRef)({}),x=e=>{const{modelTryOn:t,productInstructions:n,bodyInstructions:r}=e||{};v.current={[$e.product]:n,[$e.body]:[r]},h(t),i(!e?.sizeChart&&!e?.success),p(e),setTimeout((()=>E(!0)),0)},I=(0,a.useCallback)((async e=>{const[n,r]=await Promise.all([(0,w.WD)({goods_id:t,group_id:e}),(0,w.Ec)({goods_id:t,select_location_id:e})]);return p(n||{}),c((e=>({...e,...n,userSizeRecommendData:r}))),l(e),n}),[]),k=(0,a.useCallback)((0,b.A)((async e=>{if(e!==d?.chooseGroupId){const t=await I(e);i(!t?.sizeChart&&!t?.success),t?.sizeChart&&d?.sizeChart&&(t.sizeChart.defaultUnitId=d.sizeChart.defaultUnitId)}})),[d]);return(0,a.useEffect)((()=>{!o||r?.sizeChart?r?.sizeChart&&x(r):s().then((e=>x(e)))}),[o]),y?a.createElement(C.Provider,{value:{sizeData:d,goodsId:t,reportSizePreference:e=>{let{sizeUnit:t,index:r}=e;(0,w.Fl)({sizeUnit:t}),h({...g,selectUnit:t}),n?.(t)},onSelectGroupIdCb:k,isScrolling:u,sizeGuideControl:m}},a.createElement("div",null,a.createElement(Ve,null))):null};var Ge=(0,u.W4)({name:"sizeGuideContent"})((0,a.memo)(qe)),je=n(91828),Ke=n(31264),Qe=n(83005),Je=n(12362),Ye=n.n(Je);const Xe=(0,a.memo)((e=>{let{header:t=[],content:n=[],wrapCls:r="",showHover:s=!0}=e;const[i,c]=(0,a.useState)({row:-1,col:-1}),l=e=>{if(!s)return;const{row:t,col:n}=e.currentTarget.dataset||{},{row:r,col:a}=i||{};t===r&&n===a||c({row:t,col:n})},u=()=>{s&&c({row:-1,col:-1})};return t?.length?a.createElement("div",{className:o()(Ye().wrap,r)},a.createElement("table",{className:Ye().table,cellSpacing:0,cellPadding:0,onMouseLeave:u},a.createElement("tbody",null,a.createElement("tr",{className:Ye().columm,onMouseEnter:u},t.map(((e,t)=>a.createElement("td",{key:e.id,className:o()(Ye().cell,{[Ye().firstCol]:0===t})},e.name)))),n.map(((e,n)=>{const r=n===+i?.row;return a.createElement("tr",{key:n,className:Ye().tr},t.map(((t,s)=>{const c=s===+i?.col;return a.createElement("td",{key:t.id,className:o()(Ye().cell,Ye().content,{[Ye().firstCol]:0===s,[Ye().activeCol]:c&&n<=+i?.row||r&&s<=+i?.col,[Ye().activeItem]:c&&r}),onMouseEnter:l,"data-row":n,"data-col":s},e[t.id])})))}))))):null})),Ze=e=>{let{data:t,unitId:n}=e;const{header:r,content:s}=(0,a.useMemo)((()=>((e,t)=>{const{heads:n,metas:r,groups:a,tails:s=[],groupsInsertIndex:o,headRecords:i=[],groupRecords:c=[],metaRecords:l={},tailRecords:u=[],metasV2:m,recordsInch:d,recordsCm:p}=e||{},g=[...n||[],...r||[],...s||[]];a?.length&&g.splice(o,0,...a);const f=i.map(((e,n)=>({...i[n],...l?.[t]?.[n],...c[n],...u[n]})));return m?.length&&d?.length&&p?.length?{header:m,content:2==+t?d:p}:{header:g,content:f}})(t,n)),[t,n]);return a.createElement(Xe,{header:r,content:s})};var et=(0,a.memo)(Ze),tt=n(24096),nt=n.n(tt);var rt=(0,u.W4)({name:"DetailContent"})((e=>{let{goodsId:t,recommendData:n,changeContent:s}=e;const{t:i}=(0,m.B)("bec-fe.web-sku-selector",{keyPrefix:"SizeRecommendation"}),{recommendContents:c,recommendSuc:l=!1,measureDto:u,userSizeDescList:p,bodyInfoTextPrefix:g,editText:f}=n||{},{selectUnitId:h,measurement:y,measurementName:E}=u||{},[x,I]=(0,d.A)();if(!p)return null;const k=e=>{let{contentBefore:t,contentAfter:n}=e;return a.createElement("div",{className:nt().unavailableSize},a.createElement("div",null,t),a.createElement("div",null,n))};return a.createElement("div",{className:nt().content},a.createElement(v.Ay,{page_el_sn:208373,others:{goods_id:t,result:l&&(c||[]).length>=2?c[1]:-1},useClick:!1},(()=>{if(c?.length>=2){const[e,t]=c;return l?a.createElement("div",{className:nt().recommendedSize},a.createElement("span",null,e||i("recommendedSize")),a.createElement("span",null,t)):k({contentBefore:e,contentAfter:t})}return k({contentBefore:i("unavailableSize"),contentAfter:i("subUnavailableSize")})})()),a.createElement("div",{className:nt().eidtBox},a.createElement("div",{className:nt().editInfo},a.createElement("div",null,g),a.createElement("div",null,(p||[]).join(" "))),a.createElement(v.Ay,{page_el_sn:208372,others:{goods_id:t},useImpr:!1},a.createElement("div",(0,r.A)({className:o()(nt().editBtn,x)},I,{onClick:()=>{s(!1)}}),a.createElement(Qe.AP,{className:o()(nt().editIcon,l&&nt().upper)}),a.createElement("span",null,f||i("edit"))))),a.createElement("div",{className:nt().mearsurementName},E),(y||[]).map(((e,t)=>a.createElement(et,{key:t,data:e,unitId:h}))))})),at=n(7638),st=n(20162),ot=n(10147),it=n(1528),ct=n(49318),lt=n(14825);let ut=function(e){return e.IN="IN",e.CM="CM",e.KG="KG",e.LBS="LBS",e}({});var mt=n(21657),dt=n.n(mt);const pt=e=>{let{onClose:t}=e;const{t:n}=(0,m.B)("bec-fe.web-sku-selector",{keyPrefix:"SizeRecommendation.learnMorePopup"});return a.createElement(p.Ay,{onClick:t},a.createElement("div",{className:dt().wrap},a.createElement("div",{className:dt().title},n("title")),a.createElement("div",{className:dt().desc},a.createElement(at.x,{t:n,i18nKey:"desc",ns:"bec-fe.web-sku-selector"},a.createElement("span",{className:dt().link,onClick:()=>(0,g.MJ)(n("links.termsOfUse"))}),a.createElement("span",{className:dt().link,onClick:()=>(0,g.MJ)(n("links.privacyPolicy"))}))),a.createElement(ot.A,{size:"lg",className:dt().btn,onClick:t},n("ok"))))};var gt=n(81783),ft=n.n(gt);const ht=e=>{let{instructions:t}=e;const{title:n,contents:r,imageUrls:s=[]}=t||{};return Object.keys(t||{}).length?a.createElement("div",{className:ft().wrap},a.createElement("div",{className:ft().content},a.createElement("div",{className:ft().title},n),a.createElement("div",{className:ft().info},r?.map((e=>e?.name&&e?.desc?a.createElement(a.Fragment,{key:`${e.name}${e.desc}`},a.createElement("div",{className:ft().label},e.name),a.createElement("div",{className:ft().desc},e.desc)):null)))),!!s[0]&&a.createElement("div",{className:ft().imgWrap},a.createElement(j.Ay,{src:s[0]}))):null};var yt=(0,a.memo)(ht),Et=n(79653),vt=n(68419),xt=n.n(vt);const It=e=>{let{value:t=1,min:n=1,max:r=99,delta:s=1,suffix:i="",fixed:c=1,onChange:l,className:u,disabled:d=!1,selectItemCls:p="",selectListCls:g=""}=e;const{t:f}=(0,m.B)("bec-fe.web-sku-selector",{keyPrefix:"SizeRecommendation"}),[h,y]=(0,a.useState)(+t),[E,v]=(0,a.useState)(!1),x=(0,a.useRef)(null),I=(0,a.useRef)(null),[k,_]=(0,a.useMemo)((()=>r<n?[r,n]:[n,r]),[n,r]),b=(0,a.useMemo)((()=>s<=0?[]:new Array(Math.floor((_-k)/s)+1).fill(0).map(((e,t)=>+(k+s*t).toFixed(c)))),[s,_,k,c]),w=()=>{const e=I.current;if(t&&k<=t&&t<=_&&e){const{scrollHeight:n}=e;if(n&&e?.parentElement&&b.length&&s>0){const r=n/b.length*Math.round((+t-k)/s);e.parentElement.scrollTop=r}}},C=(0,a.useMemo)((()=>({timer:null,lock:!1})),[]),S=(0,a.useCallback)((()=>{C.timer&&clearTimeout(C.timer),C.lock=!0,C.timer=setTimeout((()=>{C.lock=!1}),30)}),[]);if((0,a.useEffect)((()=>{y(t)}),[t]),s<=0)return null;const N=a.createElement("div",{className:o()(xt().list,g)},a.createElement("div",{className:xt().listContent,ref:I},b.map(((e,t)=>{const n=h===e;return a.createElement("div",{className:o()(xt().selectItem,p,{[xt().selectedItem]:n}),key:`${e}-${t}`,"data-val":e,role:"button",tabIndex:0,onClick:t=>((e,t)=>{e?.stopPropagation();const n=+t;y(n),l?.(n),v(!1)})(t,e),onMouseDown:S},a.createElement("div",null,e.toFixed(c)),n?a.createElement(D.ce,null):null)}))));return a.createElement(P.A,{placement:"bottom",innerClassName:xt().listInnerCls,visible:E,overlay:N,hideArrow:!0,appendToBody:!0,onPopoverVisibleChange:()=>{E?setTimeout((()=>w()),50):w()}},a.createElement("div",{className:o()(xt().wrap,u,d&&xt().disabled),onClick:()=>{v((e=>!e))},tabIndex:0,onBlur:e=>{C.lock?C.lock=!1:(clearTimeout(x.current),x.current=setTimeout((()=>{v(!1)}),200))},role:"button"},a.createElement("div",{className:o()(xt().currentVal,!h&&xt().unselected)},h?`${h.toFixed(c)} ${i||""}`:f("pleaseSelect")),a.createElement("div",{className:xt().arrow},a.createElement(D.hu,{className:o()(xt().arrowIcon,E?xt().activeArrowIcon:"")}))))};var kt=(0,u.W4)({name:"SelectSize"})((0,a.memo)(It)),_t=n(7981),bt=n.n(_t);const wt={bust_size:[60,150],waist_size:[50,140],weight:[2.5,150],height:[50,250]},Ct={bust_size:[23.6,59],waist_size:[19.7,55.1],weight:[5.5,330.8],height:[19.7,98.4]},St=e=>{let{curValue:t,fixedLen:n=1,convertRate:r,isToBasic:a,type:s}=e;const o=+(a?+t/r:+t*r).toFixed(n),i=a?wt:Ct;if(o&&s&&i[s]){const[e,t]=i[s];return Math.max(Math.min(o,t),e)}return o},Nt=e=>{let{data:t,selectUnitIndex:n=0,uploadData:r,unitList:s=[],unitBasicIndex:o=0,style:i={}}=e;const{reportName:c,showName:l,showLength:u=0,basicMax:m,basicMin:d,convertDeltaSize:p,basicDeltaSize:g,convertRate:f,unitIndex:h,basicDecimalPlace:y,convertDecimalPlace:E}=t||{},v=(0,a.useMemo)((()=>s[n]||[]),[n,s]),x=s[o]||[],I=(0,a.useMemo)((()=>x?.includes(v[h])),[v,h,x]),[k,_]=(0,a.useState)({curVal:St({curValue:St({curValue:+u,fixedLen:2,type:c,convertRate:f,isToBasic:!I}),fixedLen:2,type:c,convertRate:f,isToBasic:I}),localMin:d,localMax:m,localDelta:g,localFixed:0,localSuffix:v[h]?.toLowerCase()}),b=(0,a.useCallback)((e=>{if(_(e),e?.curVal){let t=+e.curVal;I||(t=St({curValue:t,fixedLen:3,type:c,convertRate:f,isToBasic:!0})),r?.({[c]:t})}}),[c,n,r,I,h,v]),w=(0,Et.A)(n);return(0,a.useEffect)((()=>{let e=k.curVal;w!==n&&void 0!==w&&(e=St({curValue:e,fixedLen:2,type:c,convertRate:f,isToBasic:I}));const t=St({curValue:d,convertRate:f,isToBasic:!1,fixedLen:I?y:E}),r=St({curValue:m,convertRate:f,isToBasic:!1,fixedLen:I?y:E});b({curVal:e,localMin:I?d:t,localMax:I?m:r,localDelta:I?g:p,localFixed:I?y:E,localSuffix:v[h]?.toLowerCase()})}),[d,m,n,c,g,p,h,s?.length,f]),c&&l&&k.localMin&&k.localMax?a.createElement("div",{className:bt().usItem,style:i},a.createElement("div",{className:bt().usTitle},l),a.createElement(kt,{value:k.curVal,min:+k.localMin,max:+k.localMax,delta:+k.localDelta,fixed:k.localFixed,suffix:k.localSuffix,onChange:e=>{b({...k,curVal:e})},className:bt().selectCountContent,selectItemCls:bt().selectItem,selectListCls:bt().selectList,showName:l})):null};var Tt=(0,u.eE)()((0,a.memo)(Nt));var Rt=(0,u.W4)({name:"EditContent"})((e=>{let{goodsId:t,recommendEditData:n,changeContent:r}=e;const{t:s}=(0,m.B)("bec-fe.web-sku-selector",{keyPrefix:"SizeRecommendation"}),{sizeDesc:i,userSizeEditList:u,bodyInstructions:d,unitList:p=[],unitBasicIndex:g,unitSelectIndex:f=0}=n||{},[h,y]=(0,a.useState)(f),E=(0,a.useRef)(null),x=(0,a.useCallback)((e=>{(0,lt.r_)({page_el_sn:208374,goods_id:t,type:p[e]?.join(",")}),y(e)}),[]),I=(0,a.useRef)({}),k=(0,a.useCallback)((e=>{I.current={...I.current,...e}}),[]),_=(0,ct.A)((async()=>{if(u?.some((e=>e?.reportName&&!I.current[e.reportName])))st.A.error(s("notFillCompletely"));else try{const e=p[h]?.[0]||ut.CM,t=setTimeout((()=>(0,c.Nx)()),1e3),n=await(0,je.VA)({...I.current,size_unit:e});clearTimeout(t),(0,c.jD)(),n?.result?r(!0):st.A.error(n.errorMsg||s("failedSubmit"))}catch(e){e?.errorMsg||st.A.error(s("failedSubmit"))}}));return u?.length?a.createElement("div",{className:bt().content,ref:E},a.createElement("div",{className:bt().sizeDescSection},a.createElement("div",{className:bt().leftText},!!i[0]?.name&&a.createElement("div",{className:bt().leftTextName},s("addBodyInformation")),!!i[0]?.content&&a.createElement("div",{className:bt().leftTextDesc},i[0].content)),a.createElement("div",{className:bt().btns},p?.length>0?p.map(((e,n)=>{const r=(e||[]).join(",");return a.createElement(v.Ay,{page_el_sn:200979,others:{unit_select:r,goods_id:t}},a.createElement("div",{className:o()(bt().btn,{[bt().selected]:h===n}),onClick:()=>x(n)},r))})):null)),a.createElement("div",{className:bt().userSizesSection},a.createElement("div",{className:bt().userSizesSelection},u?.map(((e,t)=>a.createElement(Tt,{key:`${e.showName}${t+1}`,data:e,selectUnitIndex:h,uploadData:k,unitList:p,unitBasicIndex:g,wrapEle:()=>E?.current,style:{zIndex:100-t}})))),a.createElement("div",{className:bt().learnMore},a.createElement(at.x,{t:s,i18nKey:"learnMore",ns:"bec-fe.web-sku-selector"},a.createElement("span",{className:bt().learnText,onClick:()=>{const e=(0,l.A)(a.createElement(pt,{onClose:()=>e?.()}),{})}},a.createElement(G.A,{className:bt().arrowIcon})))),a.createElement(v.Ay,{page_el_sn:208371,useImpr:!1,others:{goods_id:t}},a.createElement(ot.A,{className:bt().userSizesSubmit,onClick:_,type:it.el.main},s("submit")))),a.createElement(yt,{instructions:d})):null}));const At=e=>{const{success:t,errorCode:n,isApiError:r}=e||{};return r||"boolean"==typeof t&&!t||43201===n},zt=e=>{let{goodsId:t}=e;const{mainData:n,isMainReady:r,setMainData:s,chooseGroupId:o}=(0,a.useContext)(f.ll),[i,l]=(0,a.useState)({}),[u,m]=(0,a.useState)({}),[d,p]=(0,a.useState)(!0),[g,h]=(0,a.useState)(!1),[E,v]=(0,a.useState)(0),[x,I]=(0,a.useState)([]),k=(0,a.useCallback)((async()=>{const e=setTimeout((()=>(0,c.Nx)()),500),n=await(0,je.Fo)({goods_id:t});m({...n,userSizeEditList:x,unitSelectIndex:E}),h(n?.error||!x?.length),(0,c.jD)(),clearTimeout(e)}),[t,x,E]),b=(0,a.useCallback)((async()=>{const e=setTimeout((()=>(0,c.Nx)()),500),[n,r]=await Promise.all([(0,je.gF)({goods_id:t}),(0,w.Ec)({goods_id:t,...o?{select_location_id:o}:{}})]),{error:a}=n||{},{result:i}=r||{},{userSizeDescList:l,unitSelectIndex:u,userSizeEditList:m}=i||{};(0,Ke.CE)(),v(u),I(m),s((e=>({...e,userSizeRecommendData:r,sizeRecommendDetailV2:n}))),h(a||At(r)||!l),(0,c.jD)(),clearTimeout(e)}),[o,t]),C=(0,a.useCallback)((async e=>{const t=e?b:k;await t(),setTimeout((()=>p(e)),0)}),[b,k]);return(0,a.useEffect)((()=>{if(!r)return;const{sizeRecommendDetailV2:e,sizeRecommendUserSizeEditV2:t,userSizeRecommendData:a}=n||{},{result:s}=a||{},{unitSelectIndex:o,directJumpEditPage:i,userSizeEditList:c}=s||{};p(!i),v(o),I(c),m({...t,userSizeEditList:c}),l({...e,...s}),h(!(0,y.sc)()||At(a))}),[r,n]),g?a.createElement(_,{onClick:d?b:k}):r?a.createElement(a.Fragment,null,d&&i?.userSizeDescList?a.createElement(rt,{goodsId:t,recommendData:i,changeContent:C}):null,!d&&u?.userSizeEditList?.length?a.createElement(Rt,{goodsId:t,recommendEditData:u,changeContent:C}):null):null};var Lt=(0,u.W4)({name:"SizeRecommend"})((0,a.memo)(zt)),Mt=n(65200),Pt=n.n(Mt);let Dt=function(e){return e.Guide="guide",e.Recommend="recommend",e}({});function Ut(e){let{index:t,source:n,sizeGuideMultiTab:s,activeIndex:i,handleTabClick:c,item:l}=e;const u=(()=>{const[e,t]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{t("undefined"!=typeof window&&"ontouchstart"in window)}),[]),e})(),[m,p]=(0,d.A)();return a.createElement(v.Ay,{page_el_sn:0===t?222541:222542,others:{entrance_source:n===Dt.Guide?0:1,exprm_version:s?1:0}},a.createElement("div",(0,r.A)({key:l.key,className:o()(Pt().tabTitle,!u&&m,i===t&&Pt().active),onClick:()=>c(t,l.key),role:"button",tabIndex:0},p),l.key))}const Bt=(0,u.W4)({name:"SizePopup"})((function(e){let{onClose:t,params:n,prefetchSizePopupDataPromise:r,onContentShow:s}=e;const{t:l}=(0,m.B)("bec-fe.web-sku-selector"),{source:u,goodsId:d,onChangeUnit:v,chooseGroupId:x=0}=n,[I,k]=(0,a.useState)(0),[b,w]=(0,a.useState)(),[C,S]=(0,a.useState)(!1),[N,T]=(0,a.useState)(!1),[R,A]=(0,a.useState)(!1),[z,L]=(0,a.useState)(x||0),[M,P]=(0,a.useState)({}),[D,U]=(0,a.useState)(!1),B=(0,a.useRef)(!1),W=(0,a.useRef)(),O=(0,a.useRef)(null),F=(0,a.useMemo)((()=>({guide:l("sizeGuide.sizePopupTitle"),recommend:l("SizeRecommendation.sizeRecommendation")})),[]);(0,a.useEffect)((()=>{(0,h.A)("sizePopup")}),[]);const H=(0,a.useMemo)((()=>{const e=[{key:F.guide,Component:Ge}];return R&&e.push({key:F.recommend,Component:Lt}),e}),[F.guide,F.recommend,R]),V=async(e,t)=>{if(t===F.recommend){if(!await(0,i.mQ)())return void(B.current||((0,E.Vm)({onSuccess:()=>{(0,g.Qw)(location.href),B.current=!1},onClose:()=>{B.current=!1},loginScene:320}),B.current=!0))}k(e)},$=async()=>{const e=setTimeout((()=>(0,c.Nx)()),500);let t=[];r instanceof Promise&&(t=await r,r=null),t.length||(t=await Ot({goodsId:d,chooseGroupId:z}));const[n,a]=t||[],{sizeRecommendDetailV2:s,sizeRecommendUserSizeEditV2:o}=n||{},i=(s||o)&&!At(a);return i&&u===Dt.Recommend&&k(1),A(i),w({...n,userSizeRecommendData:a}),S(!0),T(!n?.sizeChart&&!n?.success),clearTimeout(e),(0,c.jD)(),{...n,userSizeRecommendData:a}},q=()=>{const e=O.current;if(e){const{clientHeight:t}=e;t>0&&P({height:t})}};(0,a.useEffect)((()=>{T(!(0,y.sc)()),$()}),[]),(0,a.useEffect)((()=>{R&&setTimeout(q,500)}),[R]),(0,a.useEffect)((()=>{C&&s?.()}),[C]);const G=()=>{U(!0),clearTimeout(W.current),W.current=setTimeout((()=>{U(!1)}),50)};return a.createElement(p.Ay,{onClick:t,useSplitBg:!0},a.createElement(f.ll.Provider,{value:{mainData:b,isMainReady:C,setMainData:w,getSizeGuideInfo:$,setIsMainError:T,chooseGroupId:z,setChooseGroupId:L,isScrolling:D}},a.createElement("div",{className:o()(Pt().wrap,N&&Pt().error),ref:O,style:M},N?a.createElement(_,{onClick:$}):a.createElement(a.Fragment,null,C?1===H.length?a.createElement("div",{className:Pt().titleWrap},a.createElement("div",{className:Pt().singleTitle},H[0].key)):a.createElement("div",{className:Pt().titleWrap},H.map(((e,t)=>a.createElement(Ut,{index:t,source:u,sizeGuideMultiTab:R,activeIndex:I,handleTabClick:V,item:e})))):null,a.createElement("div",{className:Pt().content,onScroll:G},H.map(((e,t)=>{let{key:n,Component:r}=e;return a.createElement("div",{className:o()(Pt().tabContent,I===t&&Pt().contentActive),key:n},a.createElement(r,{goodsId:d,onChangeUnit:v}))}))),a.createElement("div",{className:Pt().mask})))))})),Wt=e=>{const t=(0,l.A)(a.createElement(Bt,{params:e,onClose:()=>{t()}}),{})},Ot=async e=>{let{goodsId:t,chooseGroupId:n}=e;return await Promise.all([(0,w.WD)({goods_id:t,...n?{group_id:n}:{}}),(0,w.Ec)({goods_id:t,...n?{select_location_id:n}:{}})])},Ft=()=>{const e=(0,a.useRef)();return(0,a.useMemo)((()=>({perfetchSizePopupData:async t=>{e.current=Ot(t)},renderSizePopup:(t,n)=>{const r=(0,l.A)(a.createElement(Bt,{params:t,onContentShow:n,prefetchSizePopupDataPromise:e.current,onClose:()=>{r()}}),{})}})),[])}},17475:function(e,t,n){"use strict";n.d(t,{AL:function(){return l},Ec:function(){return u},Fl:function(){return o},WD:function(){return s}});var r=n(24517),a=n(97216);const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.b)({url:"/api/oak/size_guide/render",params:{front_supports:["supportSizeGuideV2Logic"],not_login_show_size_recommend:1,...e}})},o=async e=>{let{sizeUnit:t}=e;if(await c())return i({size_unit:t})},i=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.b)({url:"/api/bg-barbera-api/user/size/preference/report",params:e})},c=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.b)({url:"/api/bg-barbera-api/user/short/profile",params:{errorCodeHandlers:{40001:()=>null},...e},errorHandler:async()=>null,config:{useAntiToken:!0,errorCodeHandlers:{40001:()=>null}}}).then((e=>e?.result||null))},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.b)({url:"/api/bg-barbera-api/user/size/recommend",params:e,config:{useAntiToken:!0}})},u=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await(0,r.mQ)()?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.b)({url:"/api/bg-barbera-api/user/size/recommend/guide",params:e,config:{useAntiToken:!0}})}(e):Promise.resolve()}},83005:function(e,t,n){"use strict";n.d(t,{AP:function(){return o},JM:function(){return i},ec:function(){return c}});var r=n(14242),a=n(33514);n(32485),n(99148);const s=e=>{let{className:t,style:n,path:s,children:o,title:i,alt:c,...l}=e;const u="string"==typeof s?[s]:s;return a.createElement("svg",(0,r.A)({viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",className:t,style:n,role:"img",alt:c||""},l),i?a.createElement("title",null,i):null,o,u.map(((e,t)=>a.createElement("path",{key:t,d:e}))))},o=e=>{let{className:t,style:n,...o}=e;return a.createElement(s,(0,r.A)({},o,{path:"M480 153.4c21.2 0 38.4 17.2 38.4 38.4 0 19.1-13.9 34.9-32.2 37.9l-6.2 0.5-234.7 0c-40.9 0-74.5 31.1-78.5 70.8l-0.4 8.1 0 469.3c0 40.9 31.1 74.5 70.9 78.6l8 0.4 469.4 0c40.9 0 74.5-31.1 78.5-70.9l0.4-8.1 0-234.6c0-21.2 17.2-38.4 38.4-38.4 19.1 0 34.9 13.9 37.9 32.1l0.5 6.3 0 234.6c0 82.6-64.3 150.1-145.5 155.4l-10.2 0.4-469.4 0c-82.6 0-150.1-64.3-155.4-145.5l-0.3-10.3 0-469.3c0-82.6 64.3-150.1 145.5-155.4l10.2-0.3 234.7 0z m402-5.3c15 15 15 39.3 0 54.3l-352.9 353c-15 15-39.3 15-54.3 0-15-15-15-39.3 0-54.3l352.9-353c15-15 39.3-15 54.3 0z",className:t,style:n}))},i=e=>{let{className:t,style:n={},...s}=e;return a.createElement("svg",(0,r.A)({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"40px",height:"40px",viewBox:"0 0 40 40",version:"1.1",style:n,className:t},s),a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},a.createElement("g",{transform:"translate(-627.000000, -38.000000)"},a.createElement("g",{id:"Photo",transform:"translate(460.000000, 38.000000)"},a.createElement("g",{transform:"translate(167.000000, 0.000000)"},a.createElement("rect",{x:"0",y:"0",width:"40",height:"40"}),a.createElement("path",{d:"M10.5594178,16.2727448 C15.1939863,16.2727448 18.9510464,20.0298049 18.9510464,24.6643734 C18.9510464,29.2989419 15.1939863,33.056002 10.5594178,33.056002 C5.92484932,33.056002 2.16778922,29.2989419 2.16778922,24.6643734 C2.16778922,20.0298049 5.92484932,16.2727448 10.5594178,16.2727448 Z M10.5,17.9 C6.7444637,17.9 3.7,20.9444637 3.7,24.7 C3.7,28.4555363 6.7444637,31.5 10.5,31.5 C14.2555363,31.5 17.3,28.4555363 17.3,24.7 C17.3,20.9444637 14.2555363,17.9 10.5,17.9 Z M33.5291763,9 C34.8384028,9 35.4174686,9.11927795 35.9082323,9.34507912 L36.1150246,9.44833569 C36.6620345,9.74087976 37.091331,10.1701763 37.3838751,10.7171862 L37.4871317,10.9239785 C37.7129328,11.4147422 37.8322108,11.993808 37.8322108,13.3030345 L37.8322108,27.0746418 C37.8322108,28.3838683 37.7129328,28.9629341 37.4871317,29.4536978 L37.3838751,29.6604901 C37.091331,30.2075 36.6620345,30.6367965 36.1150246,30.9293406 L35.9082323,31.0325972 C35.4174686,31.2583983 34.8384028,31.3776763 33.5291763,31.3776763 L18.0652193,31.3777083 C18.5543859,30.8311729 18.9847373,30.2308933 19.3463242,29.5868187 L33.7520369,29.5864954 L34.1335745,29.578427 C34.7608599,29.5557289 35.013949,29.4880511 35.2707617,29.3507062 C35.5057937,29.2250097 35.6795442,29.0512592 35.8052407,28.8162272 C35.9300997,28.5827611 35.9973826,28.3523723 36.0256373,27.8411241 L36.0380552,27.4984006 L36.0419967,27.0746418 L36.0417892,24.554 L31.0204461,19.7605854 L23.2499252,25.8566872 C23.076873,25.9924005 22.8495381,26.0290499 22.6463293,25.9610931 L22.5279264,25.9077219 L20.628359,24.8086924 C20.6290337,24.7606666 20.6293721,24.7125595 20.6293721,24.6643734 C20.6293721,23.8178884 20.5249273,22.9957978 20.3282218,22.2102856 L20.7108554,22.4557981 L22.8494478,23.6912578 L30.7176114,17.5214593 C30.9342099,17.3515956 31.229561,17.3401731 31.4558154,17.4800099 L31.5625,17.5625 L36.0417892,21.838 L36.0410299,13.0801739 L36.0329615,12.6986363 C36.0102634,12.0713509 35.9425856,11.8182618 35.8052407,11.5614491 C35.6795442,11.3264171 35.5057937,11.1526666 35.2707617,11.0269701 C35.0372956,10.9021111 34.8069069,10.8348282 34.2956586,10.8065734 L33.9529351,10.7941556 C33.8894401,10.792817 33.8225687,10.7918316 33.7520369,10.7911809 L15.2820337,10.7902141 L14.8582749,10.7941556 L14.5155514,10.8065734 C14.0043032,10.8348282 13.7739144,10.9021111 13.5404484,11.0269701 C13.3054164,11.1526666 13.1316658,11.3264171 13.0059694,11.5614491 C12.8811104,11.7949151 12.8138275,12.0253039 12.7855727,12.5365521 L12.7731548,12.8792757 C12.7718163,12.9427706 12.7708309,13.0096421 12.7701802,13.0801739 L12.7699912,14.8378176 C12.1901377,14.7079395 11.5913922,14.6280727 10.9785199,14.6029822 L10.9789993,13.3030345 C10.9789993,11.993808 11.0982772,11.4147422 11.3240784,10.9239785 L11.4273349,10.7171862 C11.719879,10.1701763 12.1491756,9.74087976 12.6961854,9.44833569 L12.9029778,9.34507912 C13.3586869,9.13540661 13.8905341,9.01758319 15.0124272,9.00182103 L33.5291763,9 Z M10.4643108,19.853173 C10.8721518,19.853173 11.2087124,20.1946431 11.2580776,20.6359997 L11.2643108,20.74828 L11.2641104,23.864173 L14.3804041,23.8643734 C14.8747581,23.8643734 15.2755112,24.2225456 15.2755112,24.6643734 C15.2755112,25.0722144 14.9340411,25.408775 14.4926844,25.4581403 L14.3804041,25.4643734 L11.2641104,25.464173 L11.2643108,28.5804667 C11.2643108,29.0748207 10.9061386,29.4755738 10.4643108,29.4755738 C10.0564697,29.4755738 9.71990919,29.1341037 9.67054391,28.6927471 L9.66431077,28.5804667 L9.66411037,25.464173 L6.54821743,25.4643734 C6.05386345,25.4643734 5.65311037,25.1062012 5.65311037,24.6643734 C5.65311037,24.2565323 5.99458045,23.9199718 6.4359371,23.8706065 L6.54821743,23.8643734 L9.66411037,23.864173 L9.66431077,20.74828 C9.66431077,20.2539261 10.022483,19.853173 10.4643108,19.853173 Z M17.1328602,12.9160933 C18.0597739,12.9160933 18.8111859,13.6675054 18.8111859,14.5944191 C18.8111859,15.5213328 18.0597739,16.2727448 17.1328602,16.2727448 C16.2059465,16.2727448 15.4545345,15.5213328 15.4545345,14.5944191 C15.4545345,13.6675054 16.2059465,12.9160933 17.1328602,12.9160933 Z",fill:"#222222",fillRule:"nonzero"}))))))},c=e=>{let{className:t,style:n,...o}=e;return a.createElement(s,(0,r.A)({},o,{path:"M512 0c282.8 0 512 229.2 512 512 0 282.8-229.2 512-512 512-282.8 0-512-229.2-512-512 0-282.8 229.2-512 512-512z m0 78.8c-239.3 0-433.2 194-433.2 433.2 0 239.3 194 433.2 433.2 433.2 239.3 0 433.2-194 433.2-433.2 0-239.3-194-433.2-433.2-433.2z m0 578.9c39.2 0 70.9 31.7 70.9 70.9 0 39.2-31.7 70.9-70.9 70.9-39.2 0-70.9-31.7-70.9-70.9 0-39.2 31.7-70.9 70.9-70.9z m0.1-476.5c26.1 0 47.3 21.2 47.3 47.2l0 299.4c0 26.1-21.2 47.3-47.3 47.2-26.1 0-47.3-21.2-47.2-47.2l0-299.4c0-26.1 21.2-47.3 47.2-47.2z",className:t,style:n}))}},84369:function(e,t,n){"use strict";n.d(t,{g:function(){return i}});var r=n(33514),a=n(35439);const s=(0,a.M)("transition"),o=(0,a.M)("transform");function i(e){let{scrollTime:t,carouselLength:n,animationTime:a=.5,minItemHeight:i=20}=e;const[c,l]=(0,r.useState)(!0),[u,m]=(0,r.useState)(0),[d,p]=(0,r.useState)(0),[g,f]=(0,r.useState)({[o]:"translateY(0px)"}),h=(0,r.useRef)(),y=(0,r.useRef)(),E=(0,r.useRef)(0),v=(0,r.useRef)(null),x=(0,r.useRef)(null),I=c?{...{[s]:`all ${a}s`},...g}:g,k=(0,r.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;E.current+=1,m((e=>e+1===n?0:e+1)),l(!0),f({[o]:`translateY(-${e*E.current}px)`}),h.current=setTimeout((()=>k(e)),1e3*(t+a)),E.current>=n&&(y.current=setTimeout((()=>{E.current=0,l(!1),f({[o]:"translateY(0px)"})}),1e3))}),[n,t]),_=(0,r.useCallback)((e=>{const n=x.current,r=v.current;if(!n||!n.style||!r)return;clearTimeout(h.current),clearTimeout(y.current);const a=Array.from(r?.children);a.forEach((e=>{e?.style&&(e.style.height="auto")}));let s=i;a.forEach((e=>{const{clientHeight:t}=e||{};t&&(s=Math.max(s,t))})),n.style.height=`${s}px`,p(s),a.forEach((e=>{e?.style&&(e.style.height=`${s}px`)})),e||(l(!1),E.current=0,m(0)),f({[o]:`translateY(-${s*E.current}px)`}),h.current=setTimeout((()=>k(s)),1e3*t)}),[k,t]),b=(0,r.useCallback)((()=>{window.removeEventListener("resize",_),clearTimeout(h.current),clearTimeout(y.current)}),[_]),w=(0,r.useCallback)((()=>{b(),_(),window.addEventListener("resize",_)}),[b,_]),C=(0,r.useCallback)((()=>{t&&n&&x.current&&v.current&&(_(),window.addEventListener("resize",_))}),[n,t,_]),S=(0,r.useCallback)((()=>{b()}),[b]),N=(0,r.useCallback)((()=>{_(!0),window.addEventListener("resize",_)}),[_]);return(0,r.useEffect)((()=>b),[b]),{activeIndex:u,containerRef:x,scrollRef:v,transformStyle:I,containerHeight:d,reset:w,start:C,stop:S,continueCarousel:N}}},733:function(e,t,n){"use strict";n.d(t,{LP:function(){return a},Mr:function(){return s},YK:function(){return r}});let r=function(e){return e[e.inline=0]="inline",e[e.buttons=1]="buttons",e[e.list=2]="list",e}({}),a=function(e){return e[e.AdulthoodPopup=0]="AdulthoodPopup",e[e.MinorRefusalPopup=1]="MinorRefusalPopup",e[e.AgeVerifyPopup=2]="AgeVerifyPopup",e}({}),s=function(e){return e[e.Lightning=2]="Lightning",e}({})},35439:function(e,t,n){"use strict";n.d(t,{M:function(){return s}});n(25440);let r="";r=(()=>{const e=document.createElement("div");e.style.cssText="-webkit-transition:all .1s; -moz-transition:all .1s; -o-transition:all .1s; -ms-transition:all .1s; transition:all .1s;";const{style:t}=e;return t.webkitTransition?"-webkit-":t.MozTransition?"-moz-":t.oTransition?"-o-":t.msTransition?"-ms-":""})();const a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.charAt(0).toUpperCase()+e.substr(1)},s=e=>{const t=r.replace(/-/g,"");return""===t?e:a(t)+a(e)}},71496:function(e,t,n){"use strict";n.d(t,{Ay:function(){return s},Q6:function(){return a}});n(44114);function r(e){return e?.length?e.slice().sort(((e,t)=>e.specKeyId-t.specKeyId)).reduce((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;const{specKeyId:n="",specValueId:r=""}=t||{};return`${e}${n}${r}`}),""):""}function a(e){return e?r(Object.entries(e||{}).map((e=>{let[t="",n=""]=e;return{specValueId:n,specKeyId:t}}))):""}function s(e,t,n){const a=[],s={},o={},i={},c={},l={},u={},m={},d={},p={};return(t||[]).forEach(((e,t)=>{const{specId:n}=e;c[n]||(c[n]=t)})),(e||[]).forEach((e=>{const{specs:t,skuId:g,isOnsale:f}=e,h=n[g]||{};o[g]={...e,salePriceTextRich:h},(t||[]).forEach((e=>{const{specKey:t,specKeyId:n,specValue:r,specValueId:s,specKeyShowName:o}=e||{},h=`${n}${s}`;f&&(p[h]=!0),m[s]||(m[s]=e),d?.[h]||(d[h]=new Set),d[h].add(g);const y=a.find((e=>e?.specKeyId===n)),E=c[s],v="number"==typeof E;if(void 0===u?.[s]&&(u[s]=r),y){const{values:e,valueIds:t}=y;t.includes(s)||(v?(e[E]=r,t[E]=s):(e.push(r),t.push(s)))}else{i[n]=null;const e=[],c=[];v?(e[E]=r,c[E]=s):(e.push(r),c.push(s)),a.push({type:t,specKeyId:n,specKeyShowName:o,values:e,valueIds:c})}l[n]||(l[n]=t)}));const y=r(t||[]);s[y]=g})),{skuTypeValues:a,skuInfos:o,currentIdSelect:i,specKeyId2SpecKeyMap:l,specIdStrToSkuId:s,specValueId2SpecValueMap:u,specValueId2SpecMap:m,specIdStr2SkuIdsMap:d,specIdIsOnsaleMap:p}}},42743:function(e,t,n){"use strict";n.d(t,{Hm:function(){return b},eM:function(){return k},uj:function(){return w},Rs:function(){return _},BX:function(){return I},Xf:function(){return x},yk:function(){return v},eq:function(){return E},sc:function(){return y},yQ:function(){return h},To:function(){return f}});var r=n(42877),a=n.n(r),s=(n(25440),n(16280),n(71496)),o=(n(44114),(e,t)=>{if(!e||!t?.length)return[];const n=[];for(const r of t){const t={},{specs:a}=r;(a||[]).forEach((e=>{const{specKeyId:n,specValueId:r}=e;t[n]=r}));let s=!0;for(const n in e)e[n]&&t[n]!==e[n]&&(s=!1);s&&n.push(r)}return n}),i=n(99523),c=n(68009),l=n(64423),u=n(20162),m=n(15193),d=n(35396),p=n(59024);let g;async function f(){return g||(g=Promise.all([n.e(7302),n.e(8096),n.e(1530),n.e(2916),n.e(1168),n.e(2137),n.e(9773)]).then(n.bind(n,93190)).catch((e=>{g=null})),g)}const h=e=>e?.length?e.map((e=>e.text)).join(""):"",y=()=>window.navigator.onLine;function E(e){let{formatSkuData:t,currentSpecIdSelect:n}=e;const{specValueId2SpecMap:r}=t;return Object.values(n).map((e=>r[e])).filter((e=>!!e))}function v(e){let{sku:t,formatSkuData:n,currentSpecIdSelect:r,isChangeSpec:i,defaultSkuId:c,bestSkuByQuantityTip:l,stockQuantityTipThreshold:u}=e;const{specIdStrToSkuId:m,skuInfos:d}=n,p=d[m[(0,s.Q6)(r)]]||{};if(p?.skuId)return p;const g=E({formatSkuData:n,currentSpecIdSelect:r});if(g?.length===t[0]?.specs?.length)return;let f=t.filter((e=>!!e.isOnsale));if(Object.entries(r).some((e=>{let[t,n]=e;return t&&n}))){const e=o(r,t),n=e.filter((e=>!!e.isOnsale));f=n?.length?n:e}if(f=f?.length?f:t,!i&&c){const e=f.find((e=>e.skuId===c));if(e)return e}const h=l&&!!f?.some((e=>e.stockQuantity<u));return a()(f,["normalPrice",e=>h&&e.stockQuantity||0,e=>e.normalLinePrice||0,e=>e.stockQuantity||0,"skuId"],["asc","asc","desc","asc","desc","asc"])?.[0]}function x(e){let{num:t,fromNum:n,operateType:r}=e;return 0===n&&t>0&&r!==i.oi.Add?i.oi.Add:n>0&&t>0&&r!==i.oi.Update?i.oi.Update:n>0&&0===t&&r!==i.oi.Delete?i.oi.Delete:r}function I(e,t){if("string"==typeof e&&"string"==typeof t){const[n,r]=e.split("?"),a=`${n}?${t}`;return r?`${a}&${r}`:a}return e}function k(e,t){let{successToastInfo:n,failToastInfo:r,onSuccessCb:a,onFailCb:s}=t;const o=(0,c.tb)(),i=document.createElement("textarea");let m,d;i.style.position="fixed",i.style.top="0",i.style.left="0",i.value=e,i.hasAttribute("readonly")||i.setAttribute("readonly",""),document.body.appendChild(i),o.system===l.IJ.IOS?(m=document.createRange(),m.selectNodeContents(i),d=window.getSelection(),d&&(d.removeAllRanges(),d.addRange(m)),i.setSelectionRange(0,999999)):i.select();try{if(!document.execCommand("copy"))throw new Error;a?a():u.A.success(n)}catch(e){s?s():u.A.success(r)}finally{document.body.removeChild(i)}}const _=e=>{if(!e)return null;const{customizedSnapshots:t}=e?.optCustomizedInfo||{};return t?.length?{customized_snapshot_info:JSON.stringify({snapshot_list:t.map((e=>{let{customizedSnapshotId:t,customizedNum:n}=e;return{customized_snapshot_id:t,customized_num:n}}))})}:null},b=(e,t)=>{(0,m.T)((()=>{if(e?.textRich?.length&&e?.action){const{action:n}=e.textRich.find((e=>!!e?.action))||{};n?.type&&n?.content?.popType&&(0,p.A)("SS-Price label double action",{fields:{data:JSON.stringify({...e,...t})}})}}),"")};function w(e){const{textRich:t}=e||{};return t?.find((e=>e?.type===d.aV.text))?.fontColor}},49318:function(e,t,n){"use strict";n.d(t,{A:function(){return r}});n(16280);new Error("lockError");function r(e){let t=!1;return async function(){if(!t){t=!0;try{const n=await e(...arguments);return t=!1,n}catch(e){throw t=!1,e}}}}},66622:function(e,t,n){"use strict";n.d(t,{Vm:function(){return i}});var r=n(33514),a=n(94971),s=n(95789),o=n(47739);function i(e){let{onClose:t=()=>{},onSuccess:n=()=>{},axiosHttp:i,loginScene:c,moduleConfig:l}=e;const u=()=>{d(),t?.()},m=(0,a.Ri)("region"),d=(0,s.A)(r.createElement(o.Ay,{modalVisible:!0,axiosHttp:i,onCloseClick:u,regionId:m,loginScene:c,onSuccess:async()=>{await(n?.()),u()},moduleConfig:l}))}},35870:function(e,t,n){"use strict";n.d(t,{d:function(){return c}});var r=n(33514),a=n(32485),s=n.n(a),o=n(58600),i=n.n(o);const c=e=>{const{className:t,style:n,children:a}=e;return r.createElement("div",{className:s()(i().align,t),style:n},a)}},8917:function(e,t,n){"use strict";n.d(t,{_:function(){return s}});var r=n(33514),a=n(46694);const s=()=>{const{isRTL:e}=(0,a.Sz)();return e?r.createElement("span",{dangerouslySetInnerHTML:{__html:"&rlm;"}}):null}},15193:function(e,t,n){"use strict";function r(e,t){try{return e()}catch(e){return t}}n.d(t,{T:function(){return r}})}}]);
//# sourceMappingURL=http://temudebug.com/sourcemaps/assets/modernjs/6267_6b0bb51c8b8f0af73c4f.js.map